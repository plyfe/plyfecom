deferred('$lib/jquery_color_picker.js', function() {
/*! Color picker Author: Stefan Petre www.eyecon.ro Dual licensed under the MIT and GPL licenses */(function($){var a=function(){var a={},b,c=65,d,e='<div class="colorpicker round"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" class="round picker_hex" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" class="round" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" class="round" /><span></span></div><button class="colorpicker_submit"></button></div>',f={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!1,submitText:"Done"},g=function(a,b){var c=N(a);$(b).data("colorpicker").fields.eq(1).val(c.r).end().eq(2).val(c.g).end().eq(3).val(c.b).end()},h=function(a,b){$(b).data("colorpicker").fields.eq(4).val(a.h).end().eq(5).val(a.s).end().eq(6).val(a.b).end()},i=function(a,b){$(b).data("colorpicker").fields.eq(0).val(P(a)).end()},j=function(a,b){$(b).data("colorpicker").selector.css("backgroundColor","#"+P({h:a.h,s:100,b:100})),$(b).data("colorpicker").selectorIndic.css({left:parseInt(150*a.s/100,10),top:parseInt(150*(100-a.b)/100,10)})},k=function(a,b){$(b).data("colorpicker").hue.css("top",parseInt(150-150*a.h/360,10))},l=function(a,b){$(b).data("colorpicker").currentColor.css("backgroundColor","#"+P(a))},m=function(a,b){$(b).data("colorpicker").newColor.css("backgroundColor","#"+P(a))},n=function(a){var b=a.charCode||a.keyCode||-1;if(b>c&&b<=90||b==32)return!1;var d=$(this).parent().parent();d.data("colorpicker").livePreview===!0&&o.apply(this)},o=function(a){var b=$(this).parent().parent(),c;this.parentNode.className.indexOf("_hex")>0?b.data("colorpicker").color=c=L(J(this.value)):this.parentNode.className.indexOf("_hsb")>0?b.data("colorpicker").color=c=H({h:parseInt(b.data("colorpicker").fields.eq(4).val(),10),s:parseInt(b.data("colorpicker").fields.eq(5).val(),10),b:parseInt(b.data("colorpicker").fields.eq(6).val(),10)}):b.data("colorpicker").color=c=M(I({r:parseInt(b.data("colorpicker").fields.eq(1).val(),10),g:parseInt(b.data("colorpicker").fields.eq(2).val(),10),b:parseInt(b.data("colorpicker").fields.eq(3).val(),10)})),a&&(g(c,b.get(0)),i(c,b.get(0)),h(c,b.get(0))),j(c,b.get(0)),k(c,b.get(0)),m(c,b.get(0)),b.data("colorpicker").onChange.apply(b,[c,P(c),N(c)])},p=function(a){var b=$(this).parent().parent();b.data("colorpicker").fields.parent().removeClass("colorpicker_focus")},q=function(){c=this.parentNode.className.indexOf("_hex")>0?70:65,$(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),$(this).parent().addClass("colorpicker_focus")},r=function(a){var b=$(this).parent().find("input").focus(),c={el:$(this).parent().addClass("colorpicker_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:a.pageY,field:b,val:parseInt(b.val(),10),preview:$(this).parent().parent().data("colorpicker").livePreview};$(document).bind("mouseup",c,t),$(document).bind("mousemove",c,s),$(document).bind("mousedown",c,s)},s=function(a){return a.data.field.val(Math.max(0,Math.min(a.data.max,parseInt(a.data.val+a.pageY-a.data.y,10)))),a.data.preview&&o.apply(a.data.field.get(0),[!0]),!1},t=function(a){return o.apply(a.data.field.get(0),[!0]),a.data.el.removeClass("colorpicker_slider").find("input").focus(),$(document).unbind("mouseup",t),$(document).unbind("mousemove",s),$(document).unbind("mousedown",s),!1},u=function(a){var b={cal:$(this).parent(),y:$(this).offset().top};b.preview=b.cal.data("colorpicker").livePreview,$(document).bind("mouseup",b,w),$(document).bind("mousemove",b,v),$(document).bind("mousedown",b,v)},v=function(a){return o.apply(a.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,a.pageY-a.data.y)))/150,10)).get(0),[a.data.preview]),!1},w=function(a){return g(a.data.cal.data("colorpicker").color,a.data.cal.get(0)),i(a.data.cal.data("colorpicker").color,a.data.cal.get(0)),$(document).unbind("mouseup",w),$(document).unbind("mousemove",v),$(document).unbind("mousedown",v),!1},x=function(a){var b={cal:$(this).parent(),pos:$(this).offset()};b.preview=b.cal.data("colorpicker").livePreview,$(document).bind("mouseup",b,z),$(document).bind("mousemove",b,y),$(document).bind("mousedown",b,y)},y=function(a){return o.apply(a.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,a.pageY-a.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,a.pageX-a.data.pos.left))/150,10)).get(0),[a.data.preview]),!1},z=function(a){return g(a.data.cal.data("colorpicker").color,a.data.cal.get(0)),i(a.data.cal.data("colorpicker").color,a.data.cal.get(0)),$(document).unbind("mouseup",z),$(document).unbind("mousemove",y),$(document).unbind("mousedown",y),!1},A=function(a){$(this).addClass("colorpicker_focus")},B=function(a){$(this).removeClass("colorpicker_focus")},C=function(a){var b=$(this).parent(),c=b.data("colorpicker").color;return b.data("colorpicker").origColor=c,l(c,b.get(0)),b.data("colorpicker").onSubmit(c,P(c),N(c),b.data("colorpicker").el),a.preventDefault(),!1},D=function(a){var b=$("#"+$(this).data("colorpickerId"));b.data("colorpicker").onBeforeShow.apply(this,[b.get(0)]);var c=$(this).offset(),d=G(),e=c.top+this.offsetHeight,f=c.left;return e+176>d.t+d.h&&(e-=this.offsetHeight+176),f+356>d.l+d.w&&(f-=356),b.css({left:f+"px",top:e+"px"}),b.data("colorpicker").onShow.apply(this,[b.get(0)])!=0&&b.show(),$(document).bind("mousedown",{cal:b},E),!1},E=function(a){if(!F(a.data.cal.get(0),a.target,a.data.cal.get(0))){var b=P(a.data.cal.data("colorpicker").color);a.data.cal.data("colorpicker").onHide(a.data.cal.get(0),b)!=0&&a.data.cal.hide(),$(document).unbind("mousedown",E)}},F=function(a,b,c){if(a==b)return!0;if(a.contains)return a.contains(b);if(a.compareDocumentPosition)return!!(a.compareDocumentPosition(b)&16);var d=b.parentNode;while(d&&d!=c){if(d==a)return!0;d=d.parentNode}return!1},G=function(){var a=document.compatMode=="CSS1Compat";return{l:window.pageXOffset||(a?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(a?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(a?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(a?document.documentElement.clientHeight:document.body.clientHeight)}},H=function(a){return{h:Math.min(360,Math.max(0,a.h)),s:Math.min(100,Math.max(0,a.s)),b:Math.min(100,Math.max(0,a.b))}},I=function(a){return{r:Math.min(255,Math.max(0,a.r)),g:Math.min(255,Math.max(0,a.g)),b:Math.min(255,Math.max(0,a.b))}},J=function(a){var b=6-a.length;if(b>0){var c=[];for(var d=0;d<b;d++)c.push("0");c.push(a),a=c.join("")}return a},K=function(a){var a=parseInt(a.indexOf("#")>-1?a.substring(1):a,16);return{r:a>>16,g:(a&65280)>>8,b:a&255}},L=function(a){return M(K(a))},M=function(a){var b={h:0,s:0,b:0},c=Math.min(a.r,a.g,a.b),d=Math.max(a.r,a.g,a.b),e=d-c;return b.b=d,d==0,b.s=d!=0?255*e/d:0,b.s!=0?a.r==d?b.h=(a.g-a.b)/e:a.g==d?b.h=2+(a.b-a.r)/e:b.h=4+(a.r-a.g)/e:b.h=-1,b.h*=60,b.h<0&&(b.h+=360),b.s*=100/255,b.b*=100/255,b},N=function(a){var b={},c=Math.round(a.h),d=Math.round(a.s*255/100),e=Math.round(a.b*255/100);if(d==0)b.r=b.g=b.b=e;else{var f=e,g=(255-d)*e/255,h=(f-g)*(c%60)/60;c==360&&(c=0),c<60?(b.r=f,b.b=g,b.g=g+h):c<120?(b.g=f,b.b=g,b.r=f-h):c<180?(b.g=f,b.r=g,b.b=g+h):c<240?(b.b=f,b.r=g,b.g=f-h):c<300?(b.b=f,b.g=g,b.r=g+h):c<360?(b.r=f,b.g=g,b.b=f-h):(b.r=0,b.g=0,b.b=0)}return{r:Math.round(b.r),g:Math.round(b.g),b:Math.round(b.b)}},O=function(a){var b=[a.r.toString(16),a.g.toString(16),a.b.toString(16)];return $.each(b,function(a,c){c.length==1&&(b[a]="0"+c)}),b.join("")},P=function(a){return O(N(a))},Q=function(){var a=$(this).parent(),b=a.data("colorpicker").origColor;a.data("colorpicker").color=b,g(b,a.get(0)),i(b,a.get(0)),h(b,a.get(0)),j(b,a.get(0)),k(b,a.get(0)),m(b,a.get(0))};return{init:function(a){a=$.extend({},f,a||{});if(typeof a.color=="string")a.color=L(a.color);else if(a.color.r!=undefined&&a.color.g!=undefined&&a.color.b!=undefined)a.color=M(a.color);else{if(a.color.h==undefined||a.color.s==undefined||a.color.b==undefined)return this;a.color=H(a.color)}return this.each(function(){if(!$(this).data("colorpickerId")){var b=$.extend({},a);b.origColor=a.color;var c="collorpicker_"+parseInt(Math.random()*1e3);$(this).data("colorpickerId",c);var d=$(e).attr("id",c);b.flat?d.appendTo(this).show():d.appendTo(document.body),b.fields=d.find("input").bind("keyup",n).bind("change",o).bind("blur",p).bind("focus",q),d.find("span").bind("mousedown",r).end().find(">div.colorpicker_current_color").bind("click",Q),b.selector=d.find("div.colorpicker_color").bind("mousedown",x),b.selectorIndic=b.selector.find("div div"),b.el=this,b.hue=d.find("div.colorpicker_hue div"),d.find("div.colorpicker_hue").bind("mousedown",u),b.newColor=d.find("div.colorpicker_new_color"),b.currentColor=d.find("div.colorpicker_current_color"),d.data("colorpicker",b);var f=d.find(".colorpicker_submit");f.bind("mouseenter",A).bind("mouseleave",B).bind("click",C),f.text(b.submitText||"Done"),g(b.color,d.get(0)),h(b.color,d.get(0)),i(b.color,d.get(0)),k(b.color,d.get(0)),j(b.color,d.get(0)),l(b.color,d.get(0)),m(b.color,d.get(0)),b.flat?d.css({position:"relative",display:"block"}):$(this).bind(b.eventName,D)}})},showPicker:function(){return this.each(function(){$(this).data("colorpickerId")&&D.apply(this)})},hidePicker:function(){return this.each(function(){$(this).data("colorpickerId")&&$("#"+$(this).data("colorpickerId")).hide()})},setColor:function(a){if(typeof a=="string")a=L(a);else if(a.r!=undefined&&a.g!=undefined&&a.b!=undefined)a=M(a);else{if(a.h==undefined||a.s==undefined||a.b==undefined)return this;a=H(a)}return this.each(function(){if($(this).data("colorpickerId")){var b=$("#"+$(this).data("colorpickerId"));b.data("colorpicker").color=a,b.data("colorpicker").origColor=a,g(a,b.get(0)),h(a,b.get(0)),i(a,b.get(0)),k(a,b.get(0)),j(a,b.get(0)),l(a,b.get(0)),m(a,b.get(0))}})},rgb2hex:function(a){}}}();$.fn.extend({ColorPicker:a.init,ColorPickerHide:a.hidePicker,ColorPickerShow:a.showPicker,ColorPickerSetColor:a.setColor})})(jQuery)
});
define("app/ui/color_picker",["module","require","exports","core/component","core/i18n","$lib/jquery_color_picker.js"],function(module, require, exports) {
function colorPicker(){var a=$("body"),b=$(window);this.defaultAttrs({all:"*",offsetTop:0,offsetLeft:0,target:null,colorPickerSelector:"div.colorpicker",colorPickerContainerClass:"colorpicker-container"}),this.setElements=function(){if(this.$picker)return;this.$container=$("<div>").addClass(this.attr.colorPickerContainerClass).appendTo("body").ColorPicker({flat:!0,submitText:_('Done')}),this.$picker=this.$container.find(this.attr.colorPickerSelector),this.$picker.data("colorpicker").onSubmit=this.submit.bind(this),this.$picker.data("colorpicker").onChange=this.sendPreview.bind(this),this.$trigger=$(this.$node),this.isInput=this.$trigger.is("input"),this.$target=this.attr.target?$(typeof this.attr.target=="function"?this.attr.target.call(this):this.attr.target):this.$trigger},this.sendPreview=function(a,b){this.trigger("uiColorPreview",{targetSelector:"#"+this.$trigger.attr("id"),hex:"#"+b})},this.attachEvents=function(){if(!this.isInput){$(document).on("click","#"+this.node.id,this.toggle.bind(this)),this.on(document,"uiShortcutEsc",this.hide),this.on("uiHideColorPicker",this.hide);return}return this.$trigger.on("click",!1).on("focus",this.show.bind(this)).on("blur",function(){this.$trigger.data("color",this.$trigger.val())}.bind(this)).on("keydown",function(a){this.isShown&&(a.which==9||a.which==13)&&(this.$picker.find(".colorpicker_submit").click(),a.preventDefault())}.bind(this))},this.toggle=function(a){this[this.isShown?"hide":"show"](a)},this.show=function(a){var c;this.isShown=!0,this.isInput?(c=this.$trigger.offset(),c.top+=this.$target[0].offsetHeight):c={left:a.clientX+b.scrollLeft(),top:a.clientY+b.scrollTop()},this.$container.css({left:c.left+this.attr.offsetLeft,top:c.top+this.attr.offsetTop}).ColorPickerSetColor(this.$target.data("color")||"#000000").show()},this.hide=function(){this.isShown=!1,this.$container&&this.$container.hide()},this.submit=function(a,b,c,d){var e="#"+b;this.$target.data("color",e).val(e),this.trigger("uiColorPicked",{targetSelector:"#"+this.$trigger.attr("id"),hex:e}),this.hide()},this.after("initialize",function(){if(this.$node[0].type==="color")return;this.setElements(),this.attachEvents()}),this.before("teardown",function(){this.$container.remove()})}var defineComponent=require("core/component"),_=require("core/i18n");require("$lib/jquery_color_picker.js"),module.exports=defineComponent(colorPicker)
});
define("app/ui/profile/inline_edit_user_color",["module","require","exports","core/component"],function(module, require, exports) {
function inlineEditUserColor(){this.setUserColor=function(a){this.trigger("uiOverrideUserCss",{color:a}),this.$node.attr("data-color",a)},this.saveOldColor=function(){this.oldColor=this.$node.attr("data-color")},this.setNewColor=function(a,b){this.$node.is(b.targetSelector)&&this.setUserColor(b.hex)},this.syncValue=function(){var a=this.$node.attr("data-color");this.oldColor!==a&&this.trigger("uiInlineEditSave",{newValue:a,field:this.$node.attr("name")})},this.resetOldColor=function(){this.oldColor&&this.setUserColor(this.oldColor)},this.hideColorPicker=function(){this.trigger("uiHideColorPicker")},this.after("initialize",function(){this.on(document,"uiEditProfileStart uiEditProfileSuccess",this.saveOldColor),this.on(document,"uiColorPicked uiColorPreview",this.setNewColor),this.on(document,"uiEditProfileSaveFields",this.syncValue),this.on(document,"uiEditProfileCancel uiBeforePageChanged",this.resetOldColor),this.on(document,"uiEditProfileSuccess uiEditProfileCancel uiBeforePageChanged",this.hideColorPicker)})}var defineComponent=require("core/component");module.exports=defineComponent(inlineEditUserColor)
});
define("app/utils/blend_hex_color",["module","require","exports"],function(module, require, exports) {
function hexColorToIntArray(a){if(!a)return null;var b=a.replace(THREE_GROUPS_OF_ONE_CHAR_REGEX,"$1$1$2$2$3$3");return b.match(SIX_HEX_DIGITS_REGEX)?b.match(GLOBAL_MATCH_TWO_CHARS_REGEX).map(function(a){return parseInt(a,16)}):null}function blendHexColor(a,b,c){var d=hexColorToIntArray(a),e=hexColorToIntArray(c),f=1-b;return d&&e&&d.map(function(a,c){var d=Math.floor(a*b+e[c]*f);return(d+256).toString(16).slice(1)}).join("")}var THREE_GROUPS_OF_ONE_CHAR_REGEX=/^(.)(.)(.)$/,SIX_HEX_DIGITS_REGEX=/^[0-9a-f]{6}$/i,GLOBAL_MATCH_TWO_CHARS_REGEX=/.{2}/g;module.exports=blendHexColor
});
define("app/ui/profile/override_user_css",["module","require","exports","core/component","template","app/utils/blend_hex_color"],function(module, require, exports) {
function overrideUserCss(){this.defaultAttrs({overrideUserCssSelector:"#user-style-me"}),this.override=function(a,b){var c=b.color.replace(LEADING_HASH_REGEX,""),d={style_namespace:"me",user_color_lightest:blendHexColor(c,.1,"fff"),user_color_lighter:blendHexColor(c,.25,"fff"),user_color_light:blendHexColor(c,.4,"fff"),user_color:c,user_color_dark:blendHexColor(c,.8,"000"),user_color_darker:blendHexColor(c,.6,"000"),profile_link_color:c,profile_pretty_link_color:blendHexColor(c,.4,"fff")},e=template.user_css_color.render(d);this.select("overrideUserCssSelector").remove(),$("head").append(e)},this.after("initialize",function(){this.on("uiOverrideUserCss",this.override)})}var defineComponent=require("core/component"),template=require("template"),blendHexColor=require("app/utils/blend_hex_color"),LEADING_HASH_REGEX=/^#/;module.exports=defineComponent(overrideUserCss)
});
define("app/ui/profile/profile_header_image_cropper_sync",["module","require","exports","core/component"],function(module, require, exports) {
function profileHeaderImageCropperSync(){this.defaultAttrs({dialogSelector:"#header_image_upload_dialog",headerSelector:".ProfileCanopy-header",aspectRatio:3}),this.setCropMetrics=function(){var a=this.select("headerSelector"),b=a.width(),c=a.height(),d=b/this.attr.aspectRatio;this.select("dialogSelector").trigger("uiSetCropMetrics",{zoneWidth:b,zoneHeight:c,width:b,height:d,top:(c-d)/2,left:0})},this.after("initialize",function(){this.on(document,"uiDialogOpened",this.setCropMetrics),this.on(window,"resize",this.setCropMetrics)})}var defineComponent=require("core/component");module.exports=defineComponent(profileHeaderImageCropperSync)
});
define("app/ui/profile/add_header_callout",["module","require","exports","core/component"],function(module, require, exports) {
function addHeaderCallout(){this.requestHeaderEditing=function(){this.trigger("uiEditProfileInitializeAndFocusOnHeaderOptions",{scribeElement:"add_header_callout"})},this.after("initialize",function(){this.on("click",this.requestHeaderEditing)})}var defineComponent=require("core/component");module.exports=defineComponent(addHeaderCallout)
});
define("app/boot/highline_inline_edit",["module","require","exports","app/ui/inline_edit","app/data/async_profile","app/data/inline_edit_scribe","app/ui/inline_profile_editing_initializor","app/ui/inline_profile_editing","app/utils/image","app/ui/profile_edit_param","app/ui/color_picker","app/ui/profile/inline_edit_user_color","app/ui/profile/override_user_css","app/ui/dialogs/profile_image_upload_dialog","app/ui/dialogs/profile_confirm_image_delete_dialog","app/ui/profile/profile_header_image_cropper_sync","app/ui/droppable_image","app/data/settings/profile_image_upload_scribe","app/data/drag_and_drop_scribe","app/ui/settings/change_photo","app/ui/image_uploader","app/data/settings","app/ui/alert_banner_to_message_drawer","app/ui/profile/add_header_callout","core/i18n"],function(module, require, exports) {
var InlineEdit=require("app/ui/inline_edit"),AsyncProfileData=require("app/data/async_profile"),InlineEditScribe=require("app/data/inline_edit_scribe"),InlineProfileEditingInitializor=require("app/ui/inline_profile_editing_initializor"),InlineProfileEditing=require("app/ui/inline_profile_editing"),image=require("app/utils/image"),ProfileEditParam=require("app/ui/profile_edit_param"),ColorPicker=require("app/ui/color_picker"),InlineEditUserColor=require("app/ui/profile/inline_edit_user_color"),OverrideUserCss=require("app/ui/profile/override_user_css"),ProfileImageUploadDialog=require("app/ui/dialogs/profile_image_upload_dialog"),ProfileConfirmImageDeleteDialog=require("app/ui/dialogs/profile_confirm_image_delete_dialog"),ProfileHeaderImageCropperSync=require("app/ui/profile/profile_header_image_cropper_sync"),DroppableImage=require("app/ui/droppable_image"),ProfileImageUploadScribe=require("app/data/settings/profile_image_upload_scribe"),DragAndDropScribe=require("app/data/drag_and_drop_scribe"),ChangePhoto=require("app/ui/settings/change_photo"),ImageUploader=require("app/ui/image_uploader"),SettingsData=require("app/data/settings"),AlertBannerToMessageDrawer=require("app/ui/alert_banner_to_message_drawer"),AddHeaderCallout=require("app/ui/profile/add_header_callout"),_=require("core/i18n");module.exports=function(b){InlineProfileEditingInitializor.attachTo(".ProfilePage",{testForCssSelector:".ProfilePage-testForEditingCss:visible"},b),AddHeaderCallout.attachTo(".ProfileCanopy-addHeaderCallout");if(image.supportsCropper()){AlertBannerToMessageDrawer.attachTo(document),AsyncProfileData.attachTo(document,b),SettingsData.attachTo(document,b),InlineProfileEditing.attachTo(".ProfilePage",b,{saveProfileFooterSelector:".ProfilePage-editingButtons",saveProfileButtonSelector:".ProfilePage-saveButton",cancelProfileButtonSelector:".ProfilePage-cancelButton",profileSavingClass:"is-saving",profileEditingClass:"is-editing",useProfileErrorDialog:!1,bioProfileFieldSelector:".ProfileHeaderCard-bio",urlProfileFieldSelector:".ProfileHeaderCard-url",avatarSelector:".ProfileAvatar-image,.ProfileAvatarEditing-image",avatarContainerSelector:".ProfileAvatar-container,.ProfileAvatarEditing-container",avatarPlaceholderSelector:".ProfileAvatar-placeholder,.ProfileAvatarEditing-placeholder",avatarHiddenClass:"u-isHidden",editAvatarSelector:".ProfileAvatarEditing-button",editHeaderSelector:".ProfileHeaderEditing-button",previewHeaderUploading:!1,profileHeaderEditingClass:"is-editingHeader",profileHeaderInnerSelector:".ProfileCanopy-header",updateHeaderSizeValue:"",canToggleHeaderOptions:!0});var c={editableFieldSelector:".ProfileHeaderCardEditing-editableField",measuringFieldSelector:".ProfileHeaderCardEditing-measuringField"};InlineEdit.attachTo(".ProfileHeaderCardEditing-name",{globalProfileFieldSelector:".ProfileHeaderCard-nameLink, .ProfileCardMini .ProfileNameTruncated-link"},c),InlineEdit.attachTo(".ProfileHeaderCardEditing-bio",{globalProfileFieldSelector:".ProfileHeaderCard-bio",extraCharsForMeasuring:"WWW"},c),InlineEdit.attachTo(".ProfileHeaderCardEditing-location",{globalProfileFieldSelector:".ProfileHeaderCard-locationText",globalProfileFieldContainerSelector:".ProfileHeaderCard-location"},c),InlineEdit.attachTo(".ProfileHeaderCardEditing-url",{globalProfileFieldSelector:".ProfileHeaderCard-urlText",globalProfileFieldContainerSelector:".ProfileHeaderCard-url"},c),InlineEditUserColor.attachTo(".ProfileHeaderCardEditing-userColorButton"),ColorPicker.attachTo(".ProfileHeaderCardEditing-userColorButton",{offsetLeft:40,offsetTop:-100}),OverrideUserCss.attachTo(document),InlineEditScribe.attachTo(document),ProfileImageUploadScribe.attachTo("#profile_image_upload_dialog"),ProfileImageUploadScribe.attachTo("#header_image_upload_dialog"),DragAndDropScribe.attachTo(document);var d={scribeContext:{component:"profile_image_upload"}};ProfileConfirmImageDeleteDialog.attachTo("#avatar_confirm_remove_dialog",{uploadType:"avatar"}),ImageUploader.attachTo(".avatar-settings .uploader-image .photo-selector",{maxSizeInBytes:10485760,fileTooBigMessage:_('Please select a profile image that is less than 10 MB.'),uploadType:"avatar",eventData:d}),ProfileImageUploadDialog.attachTo("#profile_image_upload_dialog",{uploadType:"avatar",eventData:d,maximumWidth:b.maxAvatarUploadDimension,maximumHeight:b.maxAvatarUploadDimension,isAvatarWhenShowingAvatarOptions:!1}),ChangePhoto.attachTo("#choose-photo",{uploadType:"avatar",alwaysOpen:!0,confirmDelete:!0,eventData:d}),DroppableImage.attachTo(".ProfileAvatarEditing-button",{uploadType:"avatar",eventData:d});var e={scribeContext:{component:"header_image_upload"}};ProfileConfirmImageDeleteDialog.attachTo("#header_confirm_remove_dialog",{uploadType:"header"}),ImageUploader.attachTo(".header-settings .uploader-image .photo-selector",{fileNameString:"user[profile_header_image_name]",fileDataString:"user[profile_header_image]",fileInputString:"user[profile_header_image]",uploadType:"header",maxSizeInBytes:1024e4,fileTooBigMessage:_('Please select an image that is less than 10MB.'),onError:function(){window.scrollTo(0,0)},eventData:e}),ProfileImageUploadDialog.attachTo("#header_image_upload_dialog",{uploadType:"header",maskPadding:0,top:0,left:0,maximumWidth:1500,maximumHeight:500,imageNameSelector:"#choose-header div.photo-selector input.file-name",imageDataSelector:"#choose-header div.photo-selector input.file-data",eventData:e,modalEnabledClass:"",savingClass:"is-saving",isAvatarWhenShowingAvatarOptions:!1,cropMaskSelector:".ProfileHeaderUploadDialog-cropMask",cropZoneSelector:".ProfileHeaderUploadDialog-cropZone",cropImageSelector:".ProfileHeaderUploadDialog-cropImage",cropOverlaySelector:".ProfileHeaderUploadDialog-cropOverlay"}),ProfileHeaderImageCropperSync.attachTo(".ProfileCanopy"),ChangePhoto.attachTo("#choose-header",{uploadType:"header",chooseExistingSelector:"#header-choose-existing",chooseWebcamSelector:"#header-choose-webcam",deleteImageSelector:"#header-delete-image",alwaysOpen:!0,confirmDelete:!0,eventData:e}),DroppableImage.attachTo(".ProfileHeaderEditing-button",{uploadType:"header",eventData:e})}ProfileEditParam.attachTo(".ProfilePage")}
});
define("app/ui/profile/profile_opt_in_banner",["module","require","exports","core/component","core/i18n","app/utils/cookie"],function(module, require, exports) {
function profileOptInBanner(){this.defaultAttrs({optInButtonSelector:".js-opt-in-button",optOutButtonSelector:".js-opt-out-button",hiddenClass:"u-isHidden"}),this.showBanner=function(){this.$node.removeClass(this.attr.hiddenClass)},this.optIn=function(){this.trigger("uiProfileOptIn"),this.trigger("uiProfileOptInBannerOptInClick"),this.$optInButton.addClass("disabled")},this.optOut=function(a){a.preventDefault(),this.trigger("uiProfileOptInBannerOptOutClick"),cookie("in_bp",null),window.location.reload()},this.onOptInSuccess=function(){this.trigger("uiShowMessage",{message:_('Your new profile is live!')}),this.$node.remove()},this.onOptInError=function(){this.$optInButton.removeClass("disabled")},this.after("initialize",function(){this.$optInButton=this.select("optInButtonSelector"),this.on(document,"uiProfileHelpPromptsCompleted uiNoHelpPromptsToShow",this.showBanner),this.on(document,"dataProfileOptInSuccess",this.onOptInSuccess),this.on(document,"dataProfileOptInError",this.onOptInError),this.on("click",{optInButtonSelector:this.optIn,optOutButtonSelector:this.optOut})})}var defineComponent=require("core/component"),_=require("core/i18n"),cookie=require("app/utils/cookie");module.exports=defineComponent(profileOptInBanner)
});
define("app/ui/profile/help_prompts/profile_opt_in_help_prompts",["module","require","exports","core/component","app/utils/storage/core","app/utils/animate_window_scrolltop"],function(module, require, exports) {
function profileOptInHelpPrompts(){this.showNextPrompt=function(a){this.currentPromptId&&this.setPromptDismissed(this.currentPromptId),this.currentPromptId=this.promptIds.shift();if(this.currentPromptId===undefined){this.trigger("uiProfileHelpPromptsCompleted"),animateWinScrollTop(0);return}this.trigger(document,"uiShowProfileHelpPrompt",{promptId:this.currentPromptId,promptIndex:this.totalPrompts-this.promptIds.length,totalPrompts:this.totalPrompts})},this.setPromptDismissed=function(a){this.storage.setItem(a,!0)},this.isPromptUndismissed=function(a){return!this.storage.getItem(a)},this.after("initialize",function(a){this.storage=new Storage("profile_help_prompts"),this.totalPrompts=this.attr.promptIds.length,this.promptIds=this.attr.promptIds.filter(this.isPromptUndismissed.bind(this));if(this.promptIds.length==0){this.trigger("uiNoHelpPromptsToShow");return}this.on(document,"uiSwiftLoaded uiPageChanged uiProfileHelpPromptDismissed",this.showNextPrompt)})}var defineComponent=require("core/component"),Storage=require("app/utils/storage/core"),animateWinScrollTop=require("app/utils/animate_window_scrolltop");module.exports=defineComponent(profileOptInHelpPrompts)
});
define("app/ui/profile/help_prompts/profile_help_prompt",["module","require","exports","core/compose","template","app/ui/with_viewport_helpers","app/utils/animate_window_scrolltop"],function(module, require, exports) {
var compose=require("core/compose"),template=require("template"),withViewportHelpers=require("app/ui/with_viewport_helpers"),animateWinScrollTop=require("app/utils/animate_window_scrolltop");module.exports=function(){this.defaultAttrs({promptSelector:".js-prompt",dismissPromptSelector:".js-dismiss-prompt,.js-next-prompt",scrollIntoViewTopPadding:50,promptId:undefined,promptHeader:undefined,promptBody:undefined,promptHint:undefined,promptClasses:undefined}),compose.mixin(this,[withViewportHelpers]),this.showPrompt=function(a,b){if(b.promptId!=this.attr.promptId)return;this.$node.prepend(template.profile_help_prompt.render({header:this.attr.promptHeader,body:this.attr.promptBody,hint:this.attr.promptHint,prompt_class:this.attr.promptClasses.join(" "),prompt_index:b.promptIndex,total_prompts:b.totalPrompts,last_prompt:b.promptIndex===b.totalPrompts},template)),this.scrollIntoView(),this.trigger("uiProfileHelpPromptOpened",{promptId:this.attr.promptId})},this.dismissPrompt=function(a){var b=$(a.target).closest(this.attr.promptSelector);b.fadeOut(function(){b.remove(),this.trigger("uiProfileHelpPromptDismissed",{promptId:this.attr.promptId})}.bind(this))},this.hidePrompt=function(){this.select("promptSelector").hide()},this.scrollIntoView=function(){if(this.isWithinBounds(this.$window,this.$node))return;animateWinScrollTop(this.$node.offset().top-this.attr.scrollIntoViewTopPadding)},this.missingRequiredAttr=function(){return this.attr.promptId===undefined||this.attr.promptHeader===undefined||this.attr.promptBody===undefined},this.after("initialize",function(a){this.$window=$(window);if(this.missingRequiredAttr())throw Exception("Must specify promptId, promptHeader and promptBody attrs");this.on(document,"uiShowProfileHelpPrompt",this.showPrompt),this.on(document,"uiBeforePageChanged",this.hidePrompt),this.on("click",{dismissPromptSelector:this.dismissPrompt})})}
});
define("app/ui/profile/help_prompts/profile_add_avatar_help_prompt",["module","require","exports","core/component","app/ui/profile/help_prompts/profile_help_prompt","core/i18n"],function(module, require, exports) {
function profileAddAvatarHelpPrompt(){this.defaultAttrs({promptId:"add_avatar",promptHeader:_('Show your best side.'),promptBody:_('Upload a profile photo and it\'s automatically resized to fit.'),promptHint:_('Recommended size: 400x400 pixels.'),promptClasses:["ProfileHelpPrompt--addAvatar","ProfileHelpPrompt--onRight"]})}var defineComponent=require("core/component"),profileHelpPrompt=require("app/ui/profile/help_prompts/profile_help_prompt"),_=require("core/i18n");module.exports=defineComponent(profileHelpPrompt,profileAddAvatarHelpPrompt)
});
define("app/ui/profile/help_prompts/profile_add_header_help_prompt",["module","require","exports","core/component","app/ui/profile/help_prompts/profile_help_prompt","core/i18n"],function(module, require, exports) {
function profileAddHeaderHelpPrompt(){this.defaultAttrs({promptId:"add_header",promptHeader:_('Do some redecorating.'),promptBody:_('Choose your own image to create a bigger, more beautiful profile header.'),promptHint:_('Recommended size: 1500x500 pixels.'),promptClasses:["ProfileHelpPrompt--addHeader","ProfileHelpPrompt--onRight"]})}var defineComponent=require("core/component"),profileHelpPrompt=require("app/ui/profile/help_prompts/profile_help_prompt"),_=require("core/i18n");module.exports=defineComponent(profileHelpPrompt,profileAddHeaderHelpPrompt)
});
define("app/ui/profile/help_prompts/profile_pin_tweet_help_prompt",["module","require","exports","core/component","app/ui/profile/help_prompts/profile_help_prompt","core/i18n"],function(module, require, exports) {
function profilePinTweetHelpPrompt(){this.defaultAttrs({promptId:"pin_tweet",promptHeader:_('Make yourself heard.'),promptBody:_('Pin one of your Tweets to the top of your profile page for everyone to see.'),promptClasses:["ProfileHelpPrompt--pinTweet","ProfileHelpPrompt--onLeft"],moreTweetActionsButtonSelector:".js-more-tweet-actions .js-dropdown-toggle",pinButtonSelector:".js-actionPinTweet button"}),this.highlightPinButton=function(){setTimeout(function(){this.$moreTweetActionsButton.click(),this.$pinButton.addClass("selected")}.bind(this),0)},this.unHighlightPinButton=function(){this.$moreTweetActionsButton.click(),this.$pinButton.removeClass("selected")},this.after("initialize",function(){this.$moreTweetActionsButton=this.select("moreTweetActionsButtonSelector"),this.$pinButton=this.select("pinButtonSelector"),this.on("uiProfileHelpPromptOpened",this.highlightPinButton),this.on("uiProfileHelpPromptDismissed",this.unHighlightPinButton)})}var defineComponent=require("core/component"),profileHelpPrompt=require("app/ui/profile/help_prompts/profile_help_prompt"),_=require("core/i18n");module.exports=defineComponent(profileHelpPrompt,profilePinTweetHelpPrompt)
});
define("app/data/profile_opt_in",["module","require","exports","core/component","app/data/with_data"],function(module, require, exports) {
function profileOptInData(){this.defaultAttrs({triggerProfileOptIn:!1}),this.optIn=function(a,b){function c(a){this.trigger("dataProfileOptInSuccess")}function d(a){this.trigger("dataProfileOptInError")}this.post({url:"/i/profiles/opt_in",success:c.bind(this),error:d.bind(this)})},this.after("initialize",function(){this.on("uiProfileOptIn",this.optIn),this.attr.triggerProfileOptIn&&this.optIn()})}var defineComponent=require("core/component"),withData=require("app/data/with_data");module.exports=defineComponent(profileOptInData,withData)
});
define("app/data/profile_opt_in_scribe",["module","require","exports","core/component","app/data/with_scribe"],function(module, require, exports) {
function ProfileOptInScribe(){this.after("initialize",function(){this.scribeOnEvent("uiProfileOptinDialogImpression",{component:"profile_opt_in_dialog",action:"impression"}),this.scribeOnEvent("uiProfileOptInBannerOptInClick",{component:"profile_opt_in_banner",element:"opt_in_button",action:"click"}),this.scribeOnEvent("uiProfileOptInBannerOptOutClick",{component:"profile_opt_in_banner",element:"opt_out_button",action:"click"}),this.scribeOnEvent("dataProfileOptInSuccess",{component:"profile_opt_in",action:"success"}),this.scribeOnEvent("dataProfileOptInError",{component:"profile_opt_in",action:"failure"})})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(ProfileOptInScribe,withScribe)
});
define("app/data/profile_opt_in_help_prompts_scribe",["module","require","exports","core/component","app/data/with_scribe"],function(module, require, exports) {
function profileOptInHelpPromptsScribe(){this.scribePromptOpened=function(a,b){this.scribe({component:"profile_help_prompts",element:b.promptId,action:"open"})},this.scribePromptDismissed=function(a,b){this.scribe({component:"profile_help_prompts",element:b.promptId,action:"dismiss"})},this.after("initialize",function(){this.on("uiProfileHelpPromptOpened",this.scribePromptOpened),this.on("uiProfileHelpPromptDismissed",this.scribePromptDismissed),this.scribeOnEvent("uiProfileHelpPromptsCompleted",{component:"profile_help_prompts",action:"complete"})})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(withScribe,profileOptInHelpPromptsScribe)
});
define("app/boot/profile_opt_in",["module","require","exports","app/ui/profile/profile_opt_in_banner","app/ui/profile/help_prompts/profile_opt_in_help_prompts","app/ui/profile/help_prompts/profile_add_avatar_help_prompt","app/ui/profile/help_prompts/profile_add_header_help_prompt","app/ui/profile/help_prompts/profile_pin_tweet_help_prompt","app/data/profile_opt_in","app/data/profile_opt_in_scribe","app/data/profile_opt_in_help_prompts_scribe"],function(module, require, exports) {
var ProfileOptInBanner=require("app/ui/profile/profile_opt_in_banner"),ProfileOptInHelpPrompts=require("app/ui/profile/help_prompts/profile_opt_in_help_prompts"),ProfileAddAvatarHelpPrompt=require("app/ui/profile/help_prompts/profile_add_avatar_help_prompt"),ProfileAddHeaderHelpPrompt=require("app/ui/profile/help_prompts/profile_add_header_help_prompt"),ProfilePinTweetHelpPrompt=require("app/ui/profile/help_prompts/profile_pin_tweet_help_prompt"),ProfileOptInData=require("app/data/profile_opt_in"),ProfileOptInScribe=require("app/data/profile_opt_in_scribe"),ProfileOptInHelpPromptsScribe=require("app/data/profile_opt_in_help_prompts_scribe");module.exports=function(b){ProfileOptInScribe.attachTo(document),ProfileOptInData.attachTo(document,{triggerProfileOptIn:b.triggerProfileOptIn&&!b.fromCache});if(b.showProfileOptInPreview){ProfileOptInBanner.attachTo(".ProfileOptInBanner");var c=["add_avatar","add_header"],d=$(".js-tweet:not(.is-pinned):not(.is-retweeted)[data-user-id='"+b.userId+"']:first").parent();d.length>0&&!d.hasClass("ProfilePrefilledTweet")&&c.push("pin_tweet"),ProfileAddAvatarHelpPrompt.attachTo(".ProfileAvatar"),ProfileAddHeaderHelpPrompt.attachTo(".ProfileCanopy-headerPromptAnchor"),ProfilePinTweetHelpPrompt.attachTo(d),ProfileOptInHelpPrompts.attachTo(".ProfilePage",{promptIds:c}),ProfileOptInHelpPromptsScribe.attachTo(document)}}
});
define("app/ui/profile/follower_requests_reminder",["module","require","exports","core/component","app/utils/storage/core","core/i18n"],function(module, require, exports) {
function followerRequestsReminder(){this.possiblyShowMessage=function(){var a=+(new Date);(this.storage.getItem("hide_reminder_until")||0)<a&&this.showMessage(a)},this.showMessage=function(a){this.trigger("uiShowStickyMessage",{message:this.attr.followerRequestsReminderMessage}),this.storage.clear(),this.storage.setItem("hide_reminder_until",a+this.reminderTimeout())},this.reminderTimeout=function(){var a=1e3;if(this.attr.environment=="selenium")return a*10;var b=a*60*60*24;return b},this.after("initialize",function(){this.storage=new Storage("follower_requests"),this.on(document,"uiSwiftLoaded uiPageChanged",this.possiblyShowMessage)})}var defineComponent=require("core/component"),Storage=require("app/utils/storage/core"),_=require("core/i18n"),storage;module.exports=defineComponent(followerRequestsReminder)
});
define("app/ui/profile/highline_canopy",["module","require","exports","core/component","core/utils","app/utils/animate_window_scrolltop"],function(module, require, exports) {
function profileCanopy(){var a=$(window);this.defaultAttrs({disableScrollThreshold:!0,scrollDebounceInterval:0,resizeDebounceInterval:5,transitionDuration:300,finalHeaderHeight:20,originalHeaderImagePosition:50,finalHeaderImagePosition:0,enabledCanopyViewportThreshold:720,lockedStateClass:"is-locked",defaultStateClass:"is-default",profileHeaderClass:"ProfileCanopy-header",globalNavSelector:".global-nav",profileHeaderSelector:".ProfileCanopy-header",profileHeaderAvatarSelector:".ProfileCanopy-avatar",profileCardMiniSelector:".ProfileCanopy-card",largeCanopyClass:"ProfileCanopy--large"}),this.scrollRatioForHeader=function(a){return this.canopyLockPosition>0?this.scrollPos/this.canopyLockPosition:1},this.absoluteTransitionThreshold=function(){return this.globalNavHeight+this.profileHeaderHeight},this.withinAbsoluteTransitionThreshold=function(){return this.scrollPos<this.absoluteTransitionThreshold()},this.pastCanopyLockThreshold=function(){return this.scrollPos>=this.canopyLockPosition},this.determineScrollToTop=function(a){this.$node.hasClass(this.attr.lockedStateClass)&&animateWinScrollTop(0,this.attr.transitionDuration)},this.profileCanopyIsLocked=function(){return this.$node.hasClass(this.attr.lockedStateClass)},this.lockProfileCanopy=function(){this.removeAccessibilityOfProfileHeaderAvatar(),this.$node.addClass(this.attr.lockedStateClass),this.lockHeaderParallax()},this.unlockProfileCanopy=function(){this.removeAccessibilityOfMiniProfileCard(),this.$node.removeClass(this.attr.lockedStateClass),this.shiftHeaderParallax()},this.removeAccessibilityOfProfileHeaderAvatar=function(){this.removeAccessibility(this.$profileHeaderAvatar),this.reinstateAccessibility(this.$profileCardMini)},this.removeAccessibilityOfMiniProfileCard=function(){this.removeAccessibility(this.$profileCardMini),this.reinstateAccessibility(this.$profileHeaderAvatar)},this.lockHeaderParallax=function(){this.$profileHeader.css({"margin-top":this.globalNavHeight-this.canopyLockPosition,"background-position-y":this.attr.finalHeaderImagePosition+"%"})},this.shiftHeaderParallax=function(){var a=this.scrollRatioForHeader(),b=this.attr.originalHeaderImagePosition-this.attr.finalHeaderImagePosition,c=this.attr.originalHeaderImagePosition-b*a;this.$profileHeader.css({"margin-top":0,"background-position-y":c+"%"})},this.determineTransition=function(a){this.scrollPos=a,this.enabled&&this.pastCanopyLockThreshold()?this.lockProfileCanopy():this.unlockProfileCanopy()},this.determineCanopyScrollBehavior=function(){this.isEditingProfile||a.height()<this.attr.enabledCanopyViewportThreshold?this.enabled=!1:this.enabled=!0,this.updateCanopyValuesForReflow()},this.profileEditingOn=function(){this.isEditingProfile=!0,this.determineCanopyScrollBehavior()},this.profileEditingOff=function(){this.isEditingProfile=!1,this.determineCanopyScrollBehavior()},this.setResponsiveVariableValues=function(){this.profileHeaderHeight=this.$profileHeader.height(),this.canopyLockPosition=this.profileHeaderHeight-this.attr.finalHeaderHeight},this.updateCanopyValuesForReflow=function(a,b){this.setResponsiveVariableValues(),this.reflowCanopy()},this.reflowCanopy=function(){this.trigger("reflowCanopy",{scrollPos:a.scrollTop()})},this.showLargeCanopy=function(){this.$node.addClass(this.attr.largeCanopyClass)},this.showSmallCanopy=function(){this.$node.removeClass(this.attr.largeCanopyClass)},this.removeAccessibility=function(a){a.attr("aria-hidden",!0).find("a").attr("tabindex","-1")},this.reinstateAccessibility=function(a){a.removeAttr("aria-hidden").find("a").removeAttr("tabindex")},this.after("initialize",function(){this.isEditingProfile=!1,this.scrollPos=0,this.$body=$("body"),this.$window=$(window),this.$profileHeader=this.select("profileHeaderSelector"),this.$profileHeaderAvatar=this.select("profileHeaderAvatarSelector"),this.$profileCardMini=this.select("profileCardMiniSelector"),this.globalNavHeight=$(this.attr.globalNavSelector).height(),this.on(window,"scroll",utils.throttle(function(){this.reflowCanopy()}.bind(this),this.attr.scrollDebounceInterval)),this.on(window,"resize",utils.throttle(function(){this.determineCanopyScrollBehavior()}.bind(this),this.attr.resizeDebounceInterval)),this.on("reflowCanopy",function(a,b){this.determineTransition(b.scrollPos)}),this.on("click",{profileHeaderSelector:this.determineScrollToTop}),this.on(document,"uiProfileEditingOn",this.profileEditingOn),this.on(document,"uiProfileEditingOff",this.profileEditingOff),this.on(document,"uiShowLargeCanopy",this.showLargeCanopy),this.on(document,"uiShowSmallCanopy",this.showSmallCanopy),this.on(document,"uiSwiftLoaded uiPageChanged viewport-update",this.determineCanopyScrollBehavior)})}var defineComponent=require("core/component"),utils=require("core/utils"),animateWinScrollTop=require("app/utils/animate_window_scrolltop");module.exports=defineComponent(profileCanopy)
});
define("app/ui/profile/highline_profile_stats",["module","require","exports","core/component"],function(module, require, exports) {
function profileStats(){this.defaultAttrs({tweetStatTitleSelector:".ProfileNav-item--tweets .ProfileNav-stat--link",tweetStatSelector:".ProfileNav-item--tweets .ProfileNav-value",mediaStatTitleSelector:".ProfileNav-item--media .ProfileNav-stat--link",mediaStatSelector:".ProfileNav-item--media .ProfileNav-value",followingStatTitleSelector:".ProfileNav-item--following .ProfileNav-stat--link",followingStatSelector:".ProfileNav-item--following .ProfileNav-value",followerStatTitleSelector:".ProfileNav-item--followers .ProfileNav-stat--link",followerStatSelector:".ProfileNav-item--followers .ProfileNav-value",favoriteStatTitleSelector:".ProfileNav-item--favorites .ProfileNav-stat--link",favoriteStatSelector:".ProfileNav-item--favorites .ProfileNav-value"}),this.updateProfileStats=function(a,b){b.stats&&b.stats.forEach(function(a){if(this.$node.attr("data-user-id")==a.user_id){var b=this.select(a.stat+"StatSelector"),c=this.select(a.stat+"StatTitleSelector");b.data("is-compact")!=1&&b.html(a.highline_stat_value),c.tooltip("setTitle",a.highline_stat_phrase)}}.bind(this))},this.after("initialize",function(){this.on(document,"dataGotProfileStats",this.updateProfileStats)})}var defineComponent=require("core/component");module.exports=defineComponent(profileStats)
});
define("app/ui/profile/responsive_nav",["module","require","exports","core/component","core/utils"],function(module, require, exports) {
function responsiveNav(){this.defaultAttrs({itemSelector:".ProfileNav-item",moreMenuNavItemSelector:".ProfileNav-item--more",persistentMoreMenuItemSelector:".ProfileNav-dropdownItem.js-persistent",resizeDebounceInterval:10,persistentMoreMenu:!1,moreMenuItemMinimum:2}),this.createNavItems=function(){this.hiddenNavItems=[],this.navItems=[],this.movableItems=[];var a=this.select("persistentMoreMenuItemSelector").length;this.attr.moreMenuItemMinimum-=a,this.attr.moreMenuItemMinimum<0&&(this.attr.moreMenuItemMinimum=0),this.navItems=this.select("itemSelector").get().reverse().map(function(a){var b=$(a),c=new NavItem(b,this);return b.is(this.attr.moreMenuNavItemSelector)&&(this.moreMenuNavItem=c),c.moreItem&&this.movableItems.push(c),c.moreItem&&!c.visible&&this.hiddenNavItems.push(c),c}.bind(this))},this.adaptNav=function(){var a=parseInt(this.$node.css("width"),10),b=this.getWidthOfVisibleNavItems();a<b?this.hideSomeNavItems(a,b):a>b&&this.showSomeNavItems(a,b)},this.getWidthOfVisibleNavItems=function(){return this.navItems.reduce(function(a,b){return b.visible?a+b.width:a},0)},this.hideSomeNavItems=function(a,b){var c=b+(this.moreMenuNavItem.visible?0:this.moreMenuNavItem.width);this.movableItems.forEach(function(b){b.visible&&(this.hiddenNavItems.length<this.attr.moreMenuItemMinimum||c>a)&&(b.hide(),c-=b.width)}.bind(this)),this.moreMenuNavItem.show()},this.showSomeNavItems=function(a,b){var c=b-this.moreMenuNavItem.width,d=[];for(var e=this.hiddenNavItems.length-1;e>=0;e--){var f=this.hiddenNavItems[e];if(!(f.width+c<=a))break;d.push(f),c+=f.width}if(!this.attr.persistentMoreMenu&&this.hiddenNavItems.length==d.length)d.forEach(function(a){a.show()}.bind(this)),this.moreMenuNavItem.hide();else{var g=b;for(var e=0;e<d.length&&this.hiddenNavItems.length>this.attr.moreMenuItemMinimum;e++){var f=d[e];if(!(f.width+g<=a))break;f.show(),g+=f.width}}},this.after("initialize",function(){this.on(window,"resize",utils.debounce(this.adaptNav.bind(this),this.attr.resizeDebounceInterval)),this.createNavItems(),this.adaptNav()})}function NavItem(a,b){this.$item=a,this.nav=b,this.width=a.outerWidth(!0),this.visible=a.is(":visible"),this.moreItem=this.getMoreItem()}var defineComponent=require("core/component"),utils=require("core/utils");module.exports=defineComponent(responsiveNav),NavItem.prototype.show=function(){this.moreItem&&!this.visible&&(this.moreItem.hide(),this.nav.hiddenNavItems.pop()),this.$item.removeClass("is-hidden"),this.visible=!0},NavItem.prototype.hide=function(){this.moreItem&&this.visible&&(this.moreItem.show(),this.nav.hiddenNavItems.push(this)),this.$item.addClass("is-hidden"),this.visible=!1},NavItem.prototype.getMoreItem=function(){if(!this.nav)return;var a=this.nav.$node.find(this.$item.data("more-item"));if(a.length)return new NavItem(a)}
});
define("app/ui/profile/sidebar_arrangement",["module","require","exports","core/component","core/utils"],function(module, require, exports) {
function sidebarArrangement(){this.defaultAttrs({resizeDebounceInterval:10,minimumContentsWidth:1024,leftProfileSidebarSelector:".ProfileSidebar--withLeftAlignment",rightProfileSidebarSelector:".ProfileSidebar--withRightAlignment",wtfAndTrendsSelector:".ProfileWTFAndTrends"}),this.withinMinimumContentWidth=function(a){return a<this.attr.minimumContentsWidth},this.determineSidebarArrangement=function(a){var b=this.select("leftProfileSidebarSelector"),c=this.select("rightProfileSidebarSelector"),d=this.select("wtfAndTrendsSelector");if(c.length){var e=this.withinMinimumContentWidth(a)?b:c;e.append(d)}},this.after("initialize",function(){this.on(document,"uiDetermineSidebarArrangement",function(a,b){this.determineSidebarArrangement(b.windowWidth)}),this.on(window,"resize",utils.debounce(function(){this.trigger("uiDetermineSidebarArrangement",{windowWidth:$(window).width()})}.bind(this),this.attr.resizeDebounceInterval)),this.trigger("uiDetermineSidebarArrangement",{windowWidth:$(window).width()})})}var defineComponent=require("core/component"),utils=require("core/utils");module.exports=defineComponent(sidebarArrangement)
});
define("app/ui/profile/sidebar_tweetbox",["module","require","exports","core/component","core/utils","app/ui/with_tweetbox_initialization"],function(module, require, exports) {
function sidebarTweetbox(){this.defaultAttrs({hasDefaultText:!0,condensedTextAttr:"data-condensed-text",userScreenNameAttr:"data-screen-name",tweetBoxSelector:".tweet-box",tweetButtonSelector:".tweet-action"}),this.getUserScreenName=function(){return this.$node.attr(this.attr.userScreenNameAttr)||""},this.getDefaultText=function(){return this.attr.hasDefaultText?"@"+this.getUserScreenName()+" ":""},this.getCondensedText=function(){return this.$node.attr(this.attr.condensedTextAttr)},this.removeTextUserColor=function(){this.select("tweetBoxSelector").removeClass("u-textUserColor")},this.addTextUserColor=function(){this.select("tweetBoxSelector").addClass("u-textUserColor")},this.disableTweetAction=function(){this.select("tweetButtonSelector").removeClass("u-bgUserColor u-bgUserColorHover u-borderUserColor")},this.enableTweetAction=function(){this.select("tweetButtonSelector").addClass("u-bgUserColor u-bgUserColorHover u-borderUserColor")},this.after("initialize",function(){this.on(this.$node,"uiTweetBoxExpanded",this.removeTextUserColor),this.on(this.$node,"uiTweetBoxCondensed",this.addTextUserColor),this.on(this.$node,"uiDisableTweetAction",this.disableTweetAction),this.on(this.$node,"uiEnableTweetAction",this.enableTweetAction),this.initTweetbox({condensedText:this.getCondensedText(),defaultText:this.getDefaultText()})})}var defineComponent=require("core/component"),utils=require("core/utils"),withTweetboxInitialization=require("app/ui/with_tweetbox_initialization");module.exports=defineComponent(withTweetboxInitialization,sidebarTweetbox)
});
define("bower_components/flight-viewport/lib/viewport",["module","require","exports","../../flight/lib/utils","../../flight/lib/component"],function(module, require, exports) {
function viewport(){var a="min-width",b="max-width",c="viewport-resize";this.defaultAttrs({breakpoints:[],debounceWait:100,debounceImmediate:!1}),this.onResize=function(_,a){var b=this.findBreakpointFor(a);this.hasChanged(b)&&(this.breakpoint=b,this.trigger("viewport-update",b))},this.hasChanged=function(c){return c[a]!==this.breakpoint[a]||c[b]!==this.breakpoint[b]},this.findBreakpointFor=function(c){var d=this.attr.breakpoints.filter(function(d){var e=d[a]?c.width>=d[a]:!0,f=d[b]?c.width<=d[b]:!0;return e&&f});return d[0]},this.viewport=function(){return{width:this.$window.width()}},this.after("initialize",function(){this.breakpoint={},this.$window=$(window),this.on(c,this.onResize),this.on(window,"resize",utils.debounce(function(){this.trigger(c,this.viewport())}.bind(this),this.attr.debounceWait,this.attr.debounceImmediate)),this.trigger(c,this.viewport())})}var utils=require("../../flight/lib/utils"),defineComponent=require("../../flight/lib/component");module.exports=defineComponent(viewport)
});
define("app/utils/multiline_text_range",["module","require","exports"],function(module, require, exports) {
function MultilineTextRange(a){function c(){var b=document.createRange(),c=a.contents(),d=a.contents().last()[0];return c.length>0&&(b.setStart(c[0],0),b.setEnd(d,g(d))),b}function d(a){return a.nodeType==3||a.nodeType==4}function e(){var a=f(),b=null,c=null,d=null,e=null;for(var g=0;g<a.length;g++){var h=a[g];if(c===null||h.bottom>c)c=h.bottom;if(b===null||h.top<b)b=h.top;if(d===null||h.left<d)d=h.left;if(e===null||h.right>e)e=h.right}return{top:b,bottom:c,left:d,right:e,width:Math.abs(e-d),height:Math.abs(c-b)}}function f(){var a=b.getClientRects(),c=[];for(var d=0;d<a.length;d++)c.push(a[d]);return c.filter(function(a){return a.width>0})}function g(a){return d(a)?a.nodeValue.length:a.childNodes.length}function h(){return a.width()-i()}function i(){var a=e(),b=f(),c=b[b.length-1];return b.length==0?0:c.right-a.left}function j(a){var b=a.match(WORD_BREAKS_REGEX);if(b!==null){var c=b[b.length-1],d=a.lastIndexOf(c);return{startIndex:d,endIndex:d+c.length}}return null}function k(a){return!!a.match(WORD_BREAK_REGEX)}function l(a){return(a.match(CHARS_REGEX)||[]).length}var b=c();this.shortenToVisibleContent=function(){var c=a.contents();for(var e=c.length-1;e>=0;e--){var f=c[e];if(d(f))for(var g=f.nodeValue.length;g>=0;g--){b.setEnd(f,g);if(!this.hasOverflow())return}else{b.setEnd(f,f.childNodes.length);if(!this.hasOverflow())return}}},this.shortenToNearestWordBreak=function(a){var c=b.endContainer,e=a.maxCharsToRemove;if(!d(c)||b.endOffset===c.nodeValue.length||k(c.nodeValue[b.endOffset]))return;var f=c.nodeValue.slice(0,b.endOffset),g=j(f);if(g===null)return;if(e!==undefined&&l(f.substring(g.endIndex))>e)return;b.setEnd(c,g.startIndex)},this.ensureLastLineAvailableWidth=function(a){while(h(b)<=a){var c=b.endContainer;if(d(c)&&b.endOffset>1)b.setEnd(c,b.endOffset-1);else{var e=c.previousSibling;if(e===null)break;b.setEnd(e,g(e))}}},this.hasOverflow=function(){var b=e();return b.height>a.height()},this.toDocumentFragment=function(){return b.cloneContents()},this.setEnd=function(a,c){b.setEnd(a,c)}}var CHARS_REGEX=/([\uD800-\uDBFF][\uDC00-\uDFFF]|[\S\s])/g,WORD_BREAK_REGEX=/\s/,WORD_BREAKS_REGEX=/\s+/g;module.exports=MultilineTextRange
});
define("app/ui/multiline_ellipses",["module","require","exports","core/component","app/utils/multiline_text_range"],function(module, require, exports) {
function multilineEllipses(){this.defaultAttrs({unEllipsifiedTextClass:"js-ellipsis",unEllipsifiedTextSelector:".js-ellipsis",maxCharsRemoveEnsureEndOnWordBreak:5}),this.after("initialize",function(){if(typeof document.createRange=="undefined")return;this.on(document,"uiSwiftLoaded uiPageChanged uiHasInjectedNewTimeline uiHasInjectedOldTimelineItems uiHasInjectedRangeTimelineItems",this.addEllipses)}),this.addEllipses=function(){var a=this.select("unEllipsifiedTextSelector");a.removeClass(this.attr.unEllipsifiedTextClass),a.each(this.addEllipsis.bind(this))},this.addEllipsis=function(a,b){var c=$(b),d=this.createRange(c);if(!d.hasOverflow())return;d.shortenToVisibleContent(),d.ensureLastLineAvailableWidth(this.maxEllipsisWidth(c)),d.shortenToNearestWordBreak({maxCharsToRemove:this.attr.maxCharsRemoveEnsureEndOnWordBreak});var e=d.toDocumentFragment();e.appendChild(document.createTextNode("…")),c.html(e)},this.maxEllipsisWidth=function(a){var b=parseInt(a.css("font-size"));return b*2},this.createRange=function(a){return new MultilineTextRange(a)}}var defineComponent=require("core/component"),MultilineTextRange=require("app/utils/multiline_text_range");module.exports=defineComponent(multilineEllipses)
});
define("app/boot/highline_profile",["module","require","exports","app/boot/app","app/boot/highline_inline_edit","app/boot/logged_out","app/boot/trends","app/boot/wtf_module","app/boot/profile_opt_in","app/data/client_event","app/data/profile_info","app/data/profile_edit_btn_scribe","app/data/profile_head_scribe","app/data/suggested_users","app/ui/media/card_thumbnails","app/ui/dropdown_toggle","app/ui/profile/follower_requests_reminder","app/data/media_timeline","app/data/media_thumbnails_scribe","app/ui/navigation_links","app/ui/profile/highline_canopy","app/ui/profile/head","app/ui/profile/social_proof","app/data/profile_social_proof_scribe","app/ui/profile/highline_profile_stats","app/ui/profile/responsive_nav","app/ui/profile/sidebar_arrangement","app/ui/profile/sidebar_tweetbox","app/ui/suggested_users","bower_components/flight-viewport/lib/viewport","app/ui/profile/alcohol_brand_follower_notification","app/ui/multiline_ellipses"],function(module, require, exports) {
var bootApp=require("app/boot/app"),inlineEditBoot=require("app/boot/highline_inline_edit"),loggedOutBoot=require("app/boot/logged_out"),trendsBoot=require("app/boot/trends"),whoToFollowBoot=require("app/boot/wtf_module"),optInBoot=require("app/boot/profile_opt_in"),clientEvent=require("app/data/client_event"),profileInfo=require("app/data/profile_info"),ProfileEditBtnScribe=require("app/data/profile_edit_btn_scribe"),ProfileHeadScribe=require("app/data/profile_head_scribe"),SuggestedUsersData=require("app/data/suggested_users"),CardThumbnails=require("app/ui/media/card_thumbnails"),DropdownToggle=require("app/ui/dropdown_toggle"),FollowerRequestsReminder=require("app/ui/profile/follower_requests_reminder"),MediaTimeline=require("app/data/media_timeline"),MediaThumbnailsScribe=require("app/data/media_thumbnails_scribe"),NavigationLinks=require("app/ui/navigation_links"),ProfileCanopy=require("app/ui/profile/highline_canopy"),ProfileHead=require("app/ui/profile/head"),ProfileSocialProof=require("app/ui/profile/social_proof"),ProfileSocialProofScribe=require("app/data/profile_social_proof_scribe"),ProfileStats=require("app/ui/profile/highline_profile_stats"),ResponsiveNav=require("app/ui/profile/responsive_nav"),SidebarArrangement=require("app/ui/profile/sidebar_arrangement"),SidebarTweetbox=require("app/ui/profile/sidebar_tweetbox"),SuggestedUsers=require("app/ui/suggested_users"),Viewport=require("bower_components/flight-viewport/lib/viewport"),AlcoholBrandFollowerNotification=require("app/ui/profile/alcohol_brand_follower_notification"),MultilineEllipses=require("app/ui/multiline_ellipses");module.exports=function(b){bootApp(b),profileInfo.set(b),loggedOutBoot(b),whoToFollowBoot(".ProfileSidebar .WhoToFollow",b,{wtfOptions:b.wtfOptions,wtfRefreshOnPageNav:b.wtfRefreshOnPageNav,dashboardSelector:".WhoToFollow-users",successClass:"is-visible",disableProfilePopup:!0}),trendsBoot({loggedIn:b.loggedIn,trendsLocationDialogEnabled:b.trendsLocationDialogEnabled,typeaheadData:b.typeaheadData,decider_personalized_trends:b.decider_personalized_trends,trendsCacheKey:b.trendsCacheKey}),optInBoot({fromCache:b.fromCache,showProfileOptInPreview:b.showProfileOptInPreview,triggerProfileOptIn:b.triggerProfileOptIn,userId:b.userId}),SidebarArrangement.attachTo(".ProfilePage"),b.inlineProfileEditing&&inlineEditBoot(b),MultilineEllipses.attachTo(document),clientEvent.scribeData.profile_id=b.profile_id;var c=".ProfileCanopy";Viewport.attachTo(document,{debounceWait:0,breakpoints:[{"max-width":864},{"min-width":865,"max-width":1200},{"min-width":1201,"max-width":1500},{"min-width":1501,"max-width":1730},{"min-width":1731,"max-width":1930},{"min-width":1931}]}),ProfileCanopy.attachTo(c,b),ProfileStats.attachTo(".ProfileNav"),ResponsiveNav.attachTo(".ProfileNav",{persistentMoreMenu:!0,moreMenuItemMinimum:1}),NavigationLinks.attachTo(".ProfileNav",{eventData:{scribeContext:{component:"dashboard_nav"}}}),DropdownToggle.attachTo(".ProfileNav-item--more");var d={scribeContext:{component:"profile_follow_card"}},e=".ProfileCanopy-avatar";ProfileHead.attachTo(e,b,d,{nonEmptyAvatarSelector:".ProfileAvatar-container",emptyAvatarSelector:".ProfileAvatar-placeholder"}),ProfileHeadScribe.attachTo(e);var f=".ProfileNav-item--userActions";ProfileHead.attachTo(f,b,d,{editProfileButtonInlineSelector:b.inlineProfileEditing?".UserActions-editButton":""}),ProfileHeadScribe.attachTo(f);var g=".ProfileHeaderCard";ProfileHead.attachTo(g,b,d,{fullNameSelector:".ProfileHeaderCard-name a",usernameSelector:".ProfileHeaderCard-screenname a",urlSelector:".ProfileHeaderCard-urlText a"}),ProfileHeadScribe.attachTo(g);var h=".ProfileCardMini";ProfileHead.attachTo(h,b,{nonEmptyAvatarSelector:".ProfileCardMini-avatar",fullNameSelector:".ProfileNameTruncated a",usernameSelector:" .ProfileCardMini-screenname a",scribeContext:{component:"profile_follow_card_mini"}}),ProfileHeadScribe.attachTo(h),ProfileEditBtnScribe.attachTo(c,d,{editButtonSelector:".ProfileNav .UserActions-editButton"});var i=".ProfileSocialProof";ProfileSocialProofScribe.attachTo(i),ProfileSocialProof.attachTo(i,{socialProofAvatarSelector:".ProfileSocialProof-facepileItem .Avatar",followersYouFollowSelector:".ProfileSocialProof-followersYouFollowLink",profileHoversEnabled:b.profileHoversEnabled});var j=".ProfilePhotoRail",k={profileUser:b.profile_user,mediaGrid:b.mediaGrid,mediaGridOpen:b.mediaGridOpen,gridPushState:b.mediaGrid,pushStateUrl:"/"+b.profile_user.screen_name+"/media",defaultGalleryTitle:b.profile_user.name,thumbnailContainerSelector:".ProfilePhotoRail-mediaBox",thumbnailPlaceholderSelector:".js-photoRailInsertPoint",thumbnailSize:83,thumbnailsVisible:6,showAllInlineMedia:!0,eventData:{scribeContext:{component:"dashboard_media"}}};MediaTimeline.attachTo(document,{endpoint:"/i/profiles/show/"+b.profile_user.screen_name+"/media_timeline",forceT1Media:!0}),CardThumbnails.attachTo(j,k),MediaThumbnailsScribe.attachTo(document),SidebarTweetbox.attachTo(".js-profileSidebarTweetbox",{draftTweetId:"profile_"+b.profile_id,eventData:{scribeContext:{component:"tweet_box"}}}),SuggestedUsersData.attachTo(document),SuggestedUsers.attachTo(".js-profileClusterFollow",{eventData:{scribeContext:{component:"user_similarities_list"}},targetSelector:".ProfileClusterFollow",userSelector:".ProfileCard"},b),b.followerRequestsReminderMessage&&FollowerRequestsReminder.attachTo(".ProfilePage",{followerRequestsReminderMessage:b.followerRequestsReminderMessage,environment:b.environment}),AlcoholBrandFollowerNotification.attachTo(document,b)}
});
define("app/utils/event_proxy",["module","require","exports","core/component"],function(module, require, exports) {
function eventProxy(){this.defaultAttrs({sourceEvent:"",targetEvent:""}),this.proxy=function(a,b){this.trigger(this.attr.targetEvent,b)},this.after("initialize",function(){this.on(this.attr.sourceEvent,this.proxy)})}var defineComponent=require("core/component");module.exports=defineComponent(eventProxy)
});
define("app/ui/tweet_actions",["module","require","exports","core/component","app/ui/with_tweet_actions","app/data/with_grid_timeline_data"],function(module, require, exports) {
var defineComponent=require("core/component"),withTweetActions=require("app/ui/with_tweet_actions"),withGridTimelineData=require("app/data/with_grid_timeline_data");module.exports=defineComponent(withTweetActions,withGridTimelineData)
});
define("app/ui/profile/highline_tweet_stats",["module","require","exports","core/component"],function(module, require, exports) {
function highlineTweetStats(){this.defaultAttrs({tweetSelector:".ProfileTweet",tweetActionSelector:".ProfileTweet-action",replyCountSelector:".ProfileTweet-action--reply .ProfileTweet-actionCount",favoriteCountSelector:".ProfileTweet-action--favorite .ProfileTweet-actionCount",retweetCountSelector:".ProfileTweet-action--retweet .ProfileTweet-actionCount",actionCountForPresentationSelector:".ProfileTweet-actionCountForPresentation",actionCountForAriaSelector:".ProfileTweet-actionCountForAria",zeroCountClass:"ProfileTweet-actionCount--isZero"}),this.updateTweetStats=function(a,b){b.stats&&b.stats.forEach(function(a){var b=this.findTweetOrRetweet(a.status_id),c=b.find(this.statElementSelectorFor(a.name));this.updateStat(c,a.count,a.commaized_count),this.updateTitle(c,a.title)}.bind(this))},this.updateStat=function(a,b,c){a.data("tweetStatCount",Math.max(b,0)),b<=0?(a.addClass(this.attr.zeroCountClass),a.attr("aria-hidden","true"),a.attr("tabindex","-1"),a.find(this.attr.actionCountForPresentationSelector).html("")):(a.removeClass(this.attr.zeroCountClass),a.removeAttr("aria-hidden"),a.attr("tabindex",0),a.find(this.attr.actionCountForPresentationSelector).html(c))},this.updateTitle=function(a,b){a.tooltip("setTitle",b),a.attr("data-activity-popup-title")&&a.attr("data-activity-popup-title",b),a.find(this.attr.actionCountForAriaSelector).html(b)},this.findTweetOrRetweet=function(a){var b=this.select("tweetSelector").filter("[data-tweet-id="+a+"]");return b.length||(b=this.select("tweetSelector").filter("[data-retweet-id="+a+"]")),b},this.statElementSelectorFor=function(a){switch(a){case"reply":return this.attr.replyCountSelector;case"favorite":return this.attr.favoriteCountSelector;case"retweet":return this.attr.retweetCountSelector}},this.after("initialize",function(){this.on("dataGotTweetStats",this.updateTweetStats)})}var defineComponent=require("core/component");module.exports=defineComponent(highlineTweetStats)
});
define("app/ui/timelines/with_contextual_tweet",["module","require","exports"],function(module, require, exports) {
module.exports=function(){this.getContextualTweetId=function(a){return this.select("itemsSelector").find("[data-tweet-id]:not(.is-pinned):"+a).attr("data-tweet-id")},this.around("getNewItemsData",function(a){var b=a?a():{};return b.contextual_tweet_id=this.getContextualTweetId("first"),b}),this.around("getOldItemsData",function(a){var b=a?a():{};return b.contextual_tweet_id=this.getContextualTweetId("last"),b})}
});
define("app/ui/timelines/with_new_grid_items",["module","require","exports","core/compose","app/ui/timelines/with_new_items"],function(module, require, exports) {
function withNewGridItems(){compose.mixin(this,[withNewItems]),this.defaultAttrs({gridSelector:".Grid",gridCellSelector:".Grid-cell"}),this.removeComposedTweetsFromPayloadAround=function(_,a){var b=$("<div/>").append($(a.items_html)),c=b.find(this.attr.streamItemSelector),d=0;return c.each(function(a,b){var c=$(b),e=c.data("item-id");this.isItemComposedInThisPage(e)&&(c.closest(this.attr.gridCellSelector).remove(),d++,delete this.composedThenInjectedTweetIds[e])}.bind(this)),this.removeEmptyGrids(b.children(this.attr.gridSelector)),a.items_html=b.html(),d},this.removeEmptyGrids=function(a){a.each(function(a,b){var c=$(b),d=$.trim(c.html())=="";d&&c.remove()})},this.around("removeComposedTweetsFromPayload",this.removeComposedTweetsFromPayloadAround)}var compose=require("core/compose"),withNewItems=require("app/ui/timelines/with_new_items");module.exports=withNewGridItems
});
define("app/ui/timelines/with_grid_keyboard_navigation",["module","require","exports"],function(module, require, exports) {
function withGridKeyboardNavigation(){this.defaultAttrs({navigationContainerSelector:".GridTimeline-items > .Grid, .GridTimeline-items > .ScrollBump",navigationContainerCellSelector:".Grid-cell"}),this.around("next",function(a,b){var c=b.closest(this.attr.navigationContainerCellSelector).next().find(this.attr.genericItemSelector).first();return c.length==0&&(c=b.closest(this.attr.navigationContainerSelector).next().find(this.attr.genericItemSelector).first()),c}),this.around("prev",function(a,b){var c=b.closest(this.attr.navigationContainerCellSelector).prev().find(this.attr.genericItemSelector).first();return c.length==0&&(c=b.closest(this.attr.navigationContainerSelector).prev().find(this.attr.genericItemSelector).last()),c})}module.exports=withGridKeyboardNavigation
});
define("app/boot/tweet_grid_timeline",["module","require","exports","app/boot/preexpanded_cards","app/boot/timeline","app/boot/tweets","app/utils/event_proxy","app/ui/tweet_actions","app/ui/profile/highline_tweet_stats","core/component","app/ui/timelines/with_base_timeline","app/ui/timelines/with_contextual_tweet","app/ui/timelines/with_tweet_pagination","app/ui/timelines/with_old_items","app/ui/timelines/with_new_grid_items","app/ui/with_item_actions","app/data/with_grid_timeline_data","app/ui/timelines/with_grid_keyboard_navigation","app/ui/timelines/with_tweets_displayed_reporting","app/ui/gallery/with_gallery","app/ui/with_tweet_activity_actions","app/ui/with_viewer_follow_state","core/utils"],function(module, require, exports) {
var preexpandedCardsBoot=require("app/boot/preexpanded_cards"),timelineBoot=require("app/boot/timeline"),tweetsBoot=require("app/boot/tweets"),EventProxy=require("app/utils/event_proxy"),TweetActions=require("app/ui/tweet_actions"),HighlineTweetStats=require("app/ui/profile/highline_tweet_stats"),defineComponent=require("core/component"),withBaseTimeline=require("app/ui/timelines/with_base_timeline"),withContextualTweet=require("app/ui/timelines/with_contextual_tweet"),withPagination=require("app/ui/timelines/with_tweet_pagination"),withOldItems=require("app/ui/timelines/with_old_items"),withNewGridItems=require("app/ui/timelines/with_new_grid_items"),withItemActions=require("app/ui/with_item_actions"),withGridTimelineData=require("app/data/with_grid_timeline_data"),withGridKeyboardNavigation=require("app/ui/timelines/with_grid_keyboard_navigation"),withTweetsDisplayedReporting=require("app/ui/timelines/with_tweets_displayed_reporting"),withGallery=require("app/ui/gallery/with_gallery"),withTweetActivityActions=require("app/ui/with_tweet_activity_actions"),withViewerFollowState=require("app/ui/with_viewer_follow_state"),Timeline=defineComponent(withBaseTimeline,withPagination,withOldItems,withNewGridItems,withContextualTweet,withGridTimelineData,withGridKeyboardNavigation,withTweetsDisplayedReporting),ItemActions=defineComponent(withItemActions,withGridTimelineData),PhotoModal=defineComponent(withGallery),TweetActivityActions=defineComponent(withTweetActivityActions),ViewerFollowState=defineComponent(withViewerFollowState),utils=require("core/utils");module.exports=function(b){var c={eventData:{scribeContext:{component:"tweet"}}};EventProxy.attachTo(document,{sourceEvent:"uiNewItemsAvailable",targetEvent:"uiNewSpoonbillsArrived"}),EventProxy.attachTo(".TwitterPhoto-viewMoreLink",{sourceEvent:"click",targetEvent:"uiMediaViewMoreClick"},c),preexpandedCardsBoot({containerSelector:".GridTimeline-items",autoLoadPublisherIds:["586671909"]}),timelineBoot({endpoint:b.timeline_url});var d=".GridTimeline";Timeline.attachTo(d,{autoplay:!0,injectComposedTweets:b.injectComposedTweets,containerSelector:".GridTimeline-items",itemsSelector:".GridTimeline-items",timelineEndSelector:".GridTimeline-end",errorMessageSelector:".GridTimeline-failure",tryAgainSelector:".GridTimeline-retry",streamItemsSelector:".GridTimeline-items",genericInteractionItemSelector:".ProfileTweet",selectedClass:"is-selected",selectedSelector:".is-selected",ownTweetSelector:".is-author",replyLinkSelector:".ProfileTweet .js-actionReply",profileCardSelector:".ProfileCard",tweetSelector:".ProfileTweet",ariaTweetSelector:".ProfileTweet",ariaStreamItemHeaderSelector:".ProfileTweet-originalAuthor",ariaTweetTextSelector:".ProfileTweet-text",ariaTweetContextSelector:".ProfileTweet-context",ariaTweetFavoritedClass:"is-favorited",ariaTweetRetweetedClass:"is-retweeted",ariaTweetActionsUnfavoriteSelector:".ProfileTweet-action--favorite .ProfileTweet-actionButtonUndo",ariaTweetActionsUnretweetSelector:".ProfileTweet-action--retweet .ProfileTweet-actionButtonUndo"}),PhotoModal.attachTo(d,{mediaThumbnailSelector:".media-thumbnail:not(.is-preview)",timelineSelector:".GridTimeline-items"},c),ViewerFollowState.attachTo(d),ItemActions.attachTo(d,{disableProfilePopup:!0,genericInteractionItemSelector:".ProfileTweet"}),tweetsBoot(".AppContent-main",utils.merge(b,{preexpandedOpenTweetSelector:".ProfileTweet.opened-tweet",permalinkOverlayEnabled:b.permalinkOverlayEnabled,excludeUserActions:!0})),TweetActions.attachTo(".AppContent-main",b,{genericInteractionItemSelector:".ProfileTweet",slideUpTweetOnRemove:!0,hasTweetCounts:!0,tweetContainerSelector:".js-stream-item",anyLoggedInActionSelector:".ProfileTweet .js-actions a:not(.js-embed-tweet):not(.dropdown-toggle)",togglableTweetActionsSelector:".js-actionButton:visible",pinnedTweetClass:"is-pinned",favoritedTweetClass:"is-favorited",retweetedTweetClass:"is-retweeted"}),HighlineTweetStats.attachTo(document),TweetActivityActions.attachTo(".AppContent-main",b,{requestReplyActivitySelector:".ProfileTweet-action--reply .ProfileTweet-actionCount",requestRetweetedActivitySelector:".ProfileTweet-action--retweet .ProfileTweet-actionCount",requestFavoritedActivitySelector:".ProfileTweet-action--favorite .ProfileTweet-actionCount"})}
});
define("app/ui/profile/empty_timeline_owner",["module","require","exports","core/component","app/utils/animate_window_scrolltop"],function(module, require, exports) {
function emptyTimelineOwner(){this.removeNode=function(){this.$node.remove(),animateWinScrollTop(0)},this.after("initialize",function(){this.on(document,"uiTweetSent",this.removeNode)})}var defineComponent=require("core/component"),animateWinScrollTop=require("app/utils/animate_window_scrolltop");module.exports=defineComponent(emptyTimelineOwner)
});
define("app/ui/profile/empty_timeline_tweetbox",["module","require","exports","core/component","app/ui/with_tweetbox_initialization"],function(module, require, exports) {
function emptyTimelineTweetbox(){this.defaultAttrs({preexpandTweetbox:!0,defaultText:""}),this.after("initialize",function(){this.initTweetbox({defaultText:this.attr.defaultText})})}var defineComponent=require("core/component"),withTweetboxInitialization=require("app/ui/with_tweetbox_initialization");module.exports=defineComponent(withTweetboxInitialization,emptyTimelineTweetbox)
});
define("app/ui/prefilled_tweet",["module","require","exports","core/component"],function(module, require, exports) {
function prefilledTweet(){this.defaultAttrs({tweetButtonSelector:".js-tweet-btn",tweetTextSelector:".js-tweet-text"}),this.sendTweet=function(a,b){this.$node.addClass("is-sending"),this.$tweetButton.addClass("disabled"),this.trigger("uiSendPrefilledTweet"),this.trigger("uiSendTweet",{tweetboxId:this.tweetboxId,tweetData:{status:this.tweetText}})},this.handleTweetResponse=function(a){return function(b,c){c.tweetboxId==this.tweetboxId&&a.call(this,b,c)}.bind(this)},this.tweetSent=function(a,b){this.trigger(b.unusual?"uiShowStickyMessage":"uiShowMessage",{message:b.message}),this.trigger("uiTweetSent",b),this.$node.remove()},this.tweetError=function(a,b){this.trigger("uiShowError",{message:b.error||b.message}),this.$node.removeClass("is-sending"),this.$tweetButton.removeClass("disabled")},this.after("initialize",function(){this.$tweetButton=this.select("tweetButtonSelector"),this.tweetText=this.select("tweetTextSelector").text(),this.tweetboxId="prefilled_tweet_"+this.identity,this.on("click",{tweetButtonSelector:this.sendTweet}),this.on(document,"dataTweetSuccess",this.handleTweetResponse(this.tweetSent)),this.on(document,"dataTweetError",this.handleTweetResponse(this.tweetError))})}var defineComponent=require("core/component");module.exports=defineComponent(prefilledTweet)
});
define("app/data/prefilled_tweet_scribe",["module","require","exports","core/component","app/data/with_scribe"],function(module, require, exports) {
function prefilledTweetScribe(){this.scribeSendPrefilledTweet=function(a,b){this.scribe({element:"prefilled_tweet",action:"send_tweet"},b)},this.after("initialize",function(){this.on("uiSendPrefilledTweet",this.scribeSendPrefilledTweet)})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(withScribe,prefilledTweetScribe)
});
define("app/ui/profile/profile_card",["module","require","exports","core/component","app/ui/with_interaction_data","core/utils"],function(module, require, exports) {
function profileCard(){this.defaultAttrs({profileCardSelector:".ProfileCard",profileCardHeaderSelector:".ProfileCard-bg",profileCardAvatarSelector:".ProfileCard-avatarLink",profileCardNameSelector:".ProfileNameTruncated",profileCardScreenNameSelector:".ProfileCard-screenname",profileCardBioMentionSelector:".ProfileCard-bio .twitter-atreply",profileCardPromotedBadgeSelector:".ProfileCard-promoted",itemType:"user"}),this.getItemPosition=function(a){return this.select("profileCardSelector").index(a.closest(this.attr.profileCardSelector))},this.handleClick=function(a,b,c){var d=utils.merge(this.interactionData(b),{scribeContext:{element:a}});this.trigger(b.target,"uiProfileCardClicked",d),this.trigger(b.target,"uiShowProfileNewWindow",d)},this.after("initialize",function(){this.on("click",{profileCardHeaderSelector:this.handleClick.bind(this,"header_image"),profileCardAvatarSelector:this.handleClick.bind(this,"avatar"),profileCardNameSelector:this.handleClick.bind(this,"name"),profileCardScreenNameSelector:this.handleClick.bind(this,"screen_name"),profileCardBioMentionSelector:this.handleClick.bind(this,"description"),profileCardPromotedBadgeSelector:this.handleClick.bind(this,"promoted_badge")})})}var defineComponent=require("core/component"),withInteractionData=require("app/ui/with_interaction_data"),utils=require("core/utils");module.exports=defineComponent(profileCard,withInteractionData)
});
define("app/data/profile_card_scribe",["module","require","exports","core/component","app/data/with_interaction_data_scribe"],function(module, require, exports) {
function profileCardScribe(){this.getComponentTermFromDOM=function(a){return a.closest("[data-component-term]").data("component-term")||"user"},this.scribeProfileCardInteraction=function(a,b){b.scribeContext.action=b.isMentionClick?"mention_click":"profile_click",b.scribeContext.component=this.getComponentTermFromDOM($(a.target)),this.scribeInteraction(b.scribeContext,b)},this.after("initialize",function(){this.on("uiProfileCardClicked",this.scribeProfileCardInteraction)})}var defineComponent=require("core/component"),withInteractionDataScribe=require("app/data/with_interaction_data_scribe");module.exports=defineComponent(profileCardScribe,withInteractionDataScribe)
});
define("app/ui/profile/scroll_bumps",["module","require","exports","core/component","app/ui/with_user_actions"],function(module, require, exports) {
function scrollBumps(){this.defaultAttrs({moreUsersLinkSelector:".js-more-users-link",itemType:"user"}),this.openScrollBumpDialog=function(a,b){var c=$(b.el);this.trigger("uiOpenScrollBumpDialog",{userIds:c.data("more-user-ids").split(",")}),this.trigger("uiScrollBumpViewMoreLinkClicked"),a.preventDefault()},this.after("initialize",function(){this.on("click",{moreUsersLinkSelector:this.openScrollBumpDialog})})}var defineComponent=require("core/component"),withUserActions=require("app/ui/with_user_actions");module.exports=defineComponent(scrollBumps,withUserActions)
});
define("app/data/profile/scroll_bump_scribe",["module","require","exports","core/component","app/data/with_scribe"],function(module, require, exports) {
function scrollBumpScribe(){this.after("initialize",function(){this.scribeOnEvent("uiScrollBumpViewMoreLinkClicked",{element:"view_more_link",action:"click"})})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(withScribe,scrollBumpScribe)
});
define("app/ui/dialogs/profile_scroll_bump",["module","require","exports","core/component","app/ui/with_dialog","app/ui/with_user_actions","app/ui/with_item_actions"],function(module, require, exports) {
function profileScrollBumpDialog(){this.defaultAttrs({itemType:"user",contentSelector:".js-users-list",slideDuration:300,top:47,closeOnOtherDialogOpened:!0}),this.openDialog=function(a,b){this.setContent(""),this.$body.stop(),this.open(),this.trigger("uiGetUsers",{ids:b.userIds})},this.insertUsers=function(a,b){var c=this.$body[0].scrollHeight;this.setContent(b.html);var d=Math.min(this.$body[0].scrollHeight,this.maxContentHeight());this.$body.height(c),this.slideInContent(d)},this.slideInContent=function(a){this.$body.animate({height:a},{duration:this.attr.slideDuration,complete:function(){this.trigger(this.$dialog,"uiDialogContentChanged")}.bind(this)})},this.setContent=function(a){this.$body.css("height",""),this.$node.toggleClass("has-content",!!a),this.$content.html(a)},this.showError=function(a,b){this.setContent($("<p>").addClass("error").html(b.message))},this.maxContentHeight=function(a,b){return this.$window.height()-2*this.attr.top-this.$header.outerHeight()},this.after("initialize",function(){this.$window=$(window),this.$header=this.select("modalHeaderSelector"),this.$body=this.select("modalBodySelector"),this.$content=this.select("contentSelector"),this.on(document,"uiOpenScrollBumpDialog",this.openDialog),this.on(document,"dataUsersSuccess",this.insertUsers),this.on(document,"dataUsersError",this.showError)})}var defineComponent=require("core/component"),withDialog=require("app/ui/with_dialog"),withUserActions=require("app/ui/with_user_actions"),withItemActions=require("app/ui/with_item_actions");module.exports=defineComponent(profileScrollBumpDialog,withDialog,withUserActions,withItemActions)
});
define("app/pages/profile/highline_landing",["module","require","exports","app/boot/highline_profile","app/boot/tweet_grid_timeline","app/ui/profile/empty_timeline_owner","app/ui/profile/empty_timeline_tweetbox","app/ui/prefilled_tweet","app/data/prefilled_tweet_scribe","app/ui/profile/profile_card","app/data/profile_card_scribe","app/ui/profile/scroll_bumps","app/data/profile/scroll_bump_scribe","app/ui/dialogs/profile_scroll_bump","app/data/users","app/ui/user_actions"],function(module, require, exports) {
var profileBoot=require("app/boot/highline_profile"),tweetGridTimelineBoot=require("app/boot/tweet_grid_timeline"),EmptyTimelineOwner=require("app/ui/profile/empty_timeline_owner"),EmptyTimelineTweetbox=require("app/ui/profile/empty_timeline_tweetbox"),PrefilledTweet=require("app/ui/prefilled_tweet"),PrefilledTweetScribe=require("app/data/prefilled_tweet_scribe"),ProfileCard=require("app/ui/profile/profile_card"),ProfileCardScribe=require("app/data/profile_card_scribe"),ScrollBumps=require("app/ui/profile/scroll_bumps"),ScrollBumpScribe=require("app/data/profile/scroll_bump_scribe"),ScrollBumpDialog=require("app/ui/dialogs/profile_scroll_bump"),UsersData=require("app/data/users"),UserActions=require("app/ui/user_actions");module.exports=function(b){profileBoot(b),tweetGridTimelineBoot(b),b.profile_user&&$(document).trigger("profileVisit",b.profile_user),ProfileCard.attachTo(".GridTimeline"),ProfileCardScribe.attachTo(document),ScrollBumps.attachTo(".GridTimeline",{loggedIn:b.loggedIn,eventData:{scribeContext:{component:"user_scroll_bump"}}}),ScrollBumpScribe.attachTo(document),ScrollBumpDialog.attachTo(".ScrollBumpDialog",b,{itemType:"user",eventData:{scribeContext:{component:"scroll_bump_dialog"}}}),UsersData.attachTo(document),b.isCurrentUser&&EmptyTimelineOwner.attachTo(".js-empty-timeline"),EmptyTimelineTweetbox.attachTo(".js-profileEmptyTimelineTweetbox",{draftTweetId:"empty_profile_"+b.profile_id+"_"+(b.isCurrentUser?"owner":"viewer"),defaultText:b.isCurrentUser?"":"@"+b.profile_user.screen_name+" ",eventData:{scribeContext:{component:"empty_timeline"}}}),UserActions.attachTo(".GridTimeline",b,{genericItemSelector:".ScrollBump--recentlyFollowed .js-stream-item",itemType:"user"}),PrefilledTweet.attachTo(".ProfilePrefilledTweet",{eventData:{scribeContext:{component:"empty_timeline"}}}),PrefilledTweetScribe.attachTo(document)}
});
define("app/pages/profile/highline_tweets",["module","require","exports","app/boot/highline_profile","app/boot/tweet_grid_timeline"],function(module, require, exports) {
var profileBoot=require("app/boot/highline_profile"),tweetGridTimelineBoot=require("app/boot/tweet_grid_timeline");module.exports=function(b){profileBoot(b),tweetGridTimelineBoot(b)}
});
define("app/pages/profile/highline_favorites",["module","require","exports","app/boot/highline_profile","app/boot/tweet_grid_timeline"],function(module, require, exports) {
var profileBoot=require("app/boot/highline_profile"),tweetGridTimelineBoot=require("app/boot/tweet_grid_timeline");module.exports=function(b){profileBoot(b),tweetGridTimelineBoot(b)}
});
define("app/boot/user_grid_timeline",["module","require","exports","core/component","app/boot/timeline","app/data/tweet_actions","app/ui/timelines/with_base_timeline","app/ui/timelines/with_old_items","app/ui/timelines/with_cursor_pagination","app/ui/with_item_actions","app/ui/with_user_actions","app/ui/with_stream_users","app/ui/timelines/with_excluded_ids_pagination","app/ui/timelines/with_grid_keyboard_navigation"],function(module, require, exports) {
function initialize(a){timelineBoot({endpoint:a.timeline_url}),TweetActionsData.attachTo(document,a),UserGridTimeline.attachTo(".GridTimeline",a,{containerSelector:".GridTimeline-items",itemsSelector:".GridTimeline-items",timelineEndSelector:".GridTimeline-end",errorMessageSelector:".GridTimeline-footer .Icon--fail",streamItemsSelector:".GridTimeline-items",streamUserSelector:".GridTimeline-items .js-actionable-user",disableProfilePopup:!0,selectedClass:"is-selected",selectedSelector:".is-selected",firstItemSelector:".js-stream-item:first-child",profileCardSelector:".ProfileCard",itemType:"user",eventData:{scribeContext:{component:"user"}}})}var defineComponent=require("core/component"),timelineBoot=require("app/boot/timeline"),TweetActionsData=require("app/data/tweet_actions"),withBaseTimeline=require("app/ui/timelines/with_base_timeline"),withOldItems=require("app/ui/timelines/with_old_items"),withCursorPagination=require("app/ui/timelines/with_cursor_pagination"),withItemActions=require("app/ui/with_item_actions"),withUserActions=require("app/ui/with_user_actions"),withStreamUsers=require("app/ui/with_stream_users"),withExcludedIdsPagination=require("app/ui/timelines/with_excluded_ids_pagination"),withGridKeyboardNavigation=require("app/ui/timelines/with_grid_keyboard_navigation"),UserGridTimeline=defineComponent(withBaseTimeline,withOldItems,withCursorPagination,withItemActions,withUserActions,withStreamUsers,withExcludedIdsPagination,withGridKeyboardNavigation);module.exports=initialize
});
define("app/pages/profile/highline_follower_requests",["module","require","exports","app/boot/highline_profile","app/boot/user_grid_timeline","app/ui/timelines/follower_request_timeline","app/data/follower_request","app/data/follower_request_scribe","app/ui/profile/profile_card","app/data/profile_card_scribe"],function(module, require, exports) {
var profileBoot=require("app/boot/highline_profile"),userGridTimelineBoot=require("app/boot/user_grid_timeline"),FollowerRequestTimeline=require("app/ui/timelines/follower_request_timeline"),FollowerRequestData=require("app/data/follower_request"),FollowerRequestScribe=require("app/data/follower_request_scribe"),ProfileCard=require("app/ui/profile/profile_card"),ProfileCardScribe=require("app/data/profile_card_scribe");module.exports=function(b){profileBoot(b),userGridTimelineBoot(b),FollowerRequestTimeline.attachTo(".GridTimeline",b,{userItemSelector:"div.js-actionable-user",streamUserItemSelector:".js-stream-item",followerActionsSelector:".js-acceptDeclineActions",profileActionsSelector:".js-userActions",acceptFollowerSelector:".js-actionAccept",declineFollowerSelector:".js-actionDeny"}),FollowerRequestData.attachTo(document,b),FollowerRequestScribe.attachTo(document),ProfileCard.attachTo(".GridTimeline"),ProfileCardScribe.attachTo(document)}
});
define("app/pages/profile/highline_followers",["module","require","exports","app/boot/highline_profile","app/boot/user_grid_timeline","app/ui/profile/profile_card","app/data/profile_card_scribe"],function(module, require, exports) {
var profileBoot=require("app/boot/highline_profile"),userGridTimelineBoot=require("app/boot/user_grid_timeline"),ProfileCard=require("app/ui/profile/profile_card"),ProfileCardScribe=require("app/data/profile_card_scribe");module.exports=function(b){profileBoot(b),userGridTimelineBoot(b),ProfileCard.attachTo(".GridTimeline"),ProfileCardScribe.attachTo(document)}
});
define("app/pages/profile/highline_following",["module","require","exports","app/boot/highline_profile","app/boot/user_grid_timeline","app/ui/profile/profile_card","app/data/profile_card_scribe"],function(module, require, exports) {
var profileBoot=require("app/boot/highline_profile"),userGridTimelineBoot=require("app/boot/user_grid_timeline"),ProfileCard=require("app/ui/profile/profile_card"),ProfileCardScribe=require("app/data/profile_card_scribe");module.exports=function(b){profileBoot(b),userGridTimelineBoot(b),ProfileCard.attachTo(".GridTimeline"),ProfileCardScribe.attachTo(document)}
});
define("app/pages/profile/highline_media",["module","require","exports","app/boot/highline_profile","app/boot/tweet_grid_timeline"],function(module, require, exports) {
var profileBoot=require("app/boot/highline_profile"),tweetGridTimelineBoot=require("app/boot/tweet_grid_timeline");module.exports=function(b){profileBoot(b),tweetGridTimelineBoot(b)}
});
define("app/pages/profile/highline_lists",["module","require","exports","app/boot/highline_profile","app/boot/timeline","app/ui/timelines/list_timeline","app/ui/profile/list_create_button","app/data/tweet_actions","core/utils"],function(module, require, exports) {
var profileBoot=require("app/boot/highline_profile"),timelineBoot=require("app/boot/timeline"),ListTimeline=require("app/ui/timelines/list_timeline"),ListCreateButton=require("app/ui/profile/list_create_button"),TweetActionsData=require("app/data/tweet_actions"),utils=require("core/utils");module.exports=function(b){profileBoot(b),ListCreateButton.attachTo(".StreamToggler");var c=utils.merge(b,{endpoint:b.timeline_url,itemType:"list",eventData:{scribeContext:{component:"stream"}}});timelineBoot(c),ListTimeline.attachTo(".GridTimeline",{containerSelector:".GridTimeline-items",itemsSelector:".GridTimeline-items",timelineEndSelector:".GridTimeline-end",errorMessageSelector:".GridTimeline-footer .Icon--fail",streamItemsSelector:".GridTimeline-items"}),TweetActionsData.attachTo(document,b)}
});
define("app/pages/profile/highline_custom_timelines",["module","require","exports","core/component","app/boot/highline_profile","app/boot/timeline","app/ui/timelines/custom_timelines_timeline","app/ui/with_custom_timeline_create_button","app/data/curation","core/utils"],function(module, require, exports) {
var defineComponent=require("core/component"),profileBoot=require("app/boot/highline_profile"),timelineBoot=require("app/boot/timeline"),CustomTimelinesTimeline=require("app/ui/timelines/custom_timelines_timeline"),withCustomTimelineCreateButton=require("app/ui/with_custom_timeline_create_button"),CurationData=require("app/data/curation"),utils=require("core/utils");module.exports=function(b){profileBoot(b),defineComponent(withCustomTimelineCreateButton).attachTo(".StreamToggler");var c=utils.merge(b,{endpoint:b.timeline_url,itemType:"custom-timeline",eventData:{scribeContext:{component:"stream"}}});timelineBoot(c),CustomTimelinesTimeline.attachTo(".GridTimeline",{containerSelector:".GridTimeline-items",itemsSelector:".GridTimeline-items",timelineEndSelector:".GridTimeline-end",errorMessageSelector:".GridTimeline-footer .Icon--fail",streamItemsSelector:".GridTimeline-items"}),CurationData.attachTo(document,b)}
});
define("app/ui/events/matches",["module","require","exports","core/component"],function(module, require, exports) {
function matchesModule(){this.defaultAttrs({matchItemSelector:".js-matchItem"}),this.announceMatches=function(){var a=this.select("matchItemSelector").map(function(){var a=$(this);return a.data("event-id")}).toArray();this.trigger("uiEventMatchesAdded",{eventIds:a})},this.updateMatches=function(a,b){},this.after("initialize",function(){this.announceMatches(),this.on(document,"dataEventMatchesUpdate",this.updateMatches)})}var defineComponent=require("core/component");module.exports=defineComponent(matchesModule)
});
define("app/data/events/matches",["module","require","exports","core/component","app/utils/setup_polling_with_backoff","app/data/with_data"],function(module, require, exports) {
function matchesModule(){this.defaultAttrs({maxPollingFailures:5,matchPollingEnabled:!1,$backoffNode:$(window),matchesPollingOptions:{focusedInterval:3e5,blurredInterval:12e5,eventData:{source:"clock"}}}),this.updateMatches=function(a,b){b.eventIds.forEach(function(a){this.eventIds[a]=1},this)},this.resetPollingFailures=function(){this.pollingFailures=0},this.pollingFailuresMaxed=function(){return this.pollingFailures>this.attr.maxPollingFailures},this.increasePollFailure=function(){this.pollingFailures++},this.cancelPolling=function(){this.timer.pause()},this.pollMatchesUpdate=function(a,b){if(Object.keys(this.eventIds).length==0)return;var c=function(a){a.keepPolling?this.resetPollingFailures():this.cancelPolling(),this.trigger("dataEventMatchesUpdate",a)},d=function(){this.increasePollFailure(),this.pollingFailuresMaxed()&&this.cancelPolling()};this.get({url:"/i/events/update",data:{eventIds:Object.keys(this.eventIds).join(",")},success:c.bind(this),error:d.bind(this)})},this.after("initialize",function(){this.resetPollingFailures(),this.eventIds={},this.attr.matchPollingEnabled&&(this.timer=setupPollingWithBackoff("dataEventMatchesRefresh",this.attr.$backoffNode,this.attr.matchesPollingOptions)),this.on("uiEventMatchesAdded",this.updateMatches),this.on("dataEventMatchesRefresh",this.pollMatchesUpdate)})}var defineComponent=require("core/component"),setupPollingWithBackoff=require("app/utils/setup_polling_with_backoff"),withData=require("app/data/with_data");module.exports=defineComponent(matchesModule,withData)
});
define("app/pages/events/highline_landing",["module","require","exports","app/boot/app","app/boot/logged_out","app/boot/tweet_grid_timeline","app/ui/navigation_links","app/data/client_event","bower_components/flight-viewport/lib/viewport","app/ui/events/matches","app/data/events/matches"],function(module, require, exports) {
var bootApp=require("app/boot/app"),loggedOutBoot=require("app/boot/logged_out"),tweetGridTimelineBoot=require("app/boot/tweet_grid_timeline"),NavigationLinks=require("app/ui/navigation_links"),clientEvent=require("app/data/client_event"),Viewport=require("bower_components/flight-viewport/lib/viewport");Matches=require("app/ui/events/matches"),MatchesData=require("app/data/events/matches"),module.exports=function(b){bootApp(b),loggedOutBoot(b),tweetGridTimelineBoot(b),clientEvent.scribeData.search_details=b.searchDetails,Viewport.attachTo(document,{debounceWait:0,breakpoints:[{"max-width":864},{"min-width":865,"max-width":1200},{"min-width":1201,"max-width":1500},{"min-width":1501,"max-width":1730},{"min-width":1731,"max-width":1930},{"min-width":1931}]}),MatchesData.attachTo(document,b),Matches.attachTo(".js-matchesModule",b),NavigationLinks.attachTo(".js-rightMatches .js-matchItem",{eventData:{scribeContext:{component:"related_matches"}}})}
});