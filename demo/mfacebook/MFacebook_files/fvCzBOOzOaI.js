/*!CK:735991482!*//*1396964785,178134569*/

if (self.CavalryLogger) { CavalryLogger.start_js(["qXY0w"]); }

__d("MScrollAreaScroller",["MAnimator","MTouchHelper","copyProperties"],function(a,b,c,d,e,f,g,h,i){var j=100,k=.15;function l(m,n){"use strict";this._canAnimate=this._canAnimate.bind(this);var o=n||{};this._pagingPositions=o.pagingPositions;this._usePaging=o.paging;this._canScrollX=(o.direction==='horizontal');this._canScrollY=!this._canScrollX;this.left=o.scrollX||0;this.top=o.scrollY||0;this.noThreshold=o.noThreshold;this._handler=m;this._animator=new g();}l.prototype.dispose=function(){"use strict";if(!this._disposed){this.stop();for(var m in this)delete this[m];this._disposed=true;}};l.prototype.scrollByPages=function(m){"use strict";var n=this.left,o=this.top,p,q;if(this._canScrollX){if(this._pagingPositions){var r=this._getPageIndex()+m;p=this._indexToLeftOffset(r);}else p=Math.floor(n/this.width)*this.width+m*this.width;if(p>this.maxScrollLeft||p<this.minScrollLeft)return;q=o;}else{q=Math.floor(o/this.height)*this.height+m*this.height;if(q>this.maxScrollTop||q<this.minScrollTop)return;p=n;}this.stop();var s=p-n,t=q-o,u=function(w){this.scrolling=w<1;this._scrollTo(n+s*w,o+t*w);}.bind(this),v=function(){this._handler.onScrollEnd(this.left,this.top,false);}.bind(this);this.scrolling=true;this._handler.onScrollStart(this.left,this.top);this._animator.start(u,this._canAnimate,v,500);};l.prototype.setDimensions=function(m,n,o,p,q){"use strict";var r=o<m?m:o,s=p<n?n:p;if(this._usePaging){r=m*Math.ceil(r/m);s=n*Math.ceil(s/n);}if(q&&q!=this._pagingPositions)this._pagingPositions=q;this.scrollWidth=r;this.scrollHeight=s;this.width=m;this.height=n;this.maxScrollTop=s-n;this.maxScrollLeft=r-m;this._syncPaging();};l.prototype.stop=function(){"use strict";this._animator.stop();this.scrolling=false;this._touchMoved=false;delete this._moveCoordStart;};l.prototype.doTouchStart=function(m){"use strict";this.stop();this._moveCoordStart=h.getTouchPageCoord(m);this._startX=this.left;this._startY=this.top;this._startDirection=null;this._touchMoved=false;this._scrolled=false;this._skipTouchMove=h.isMultiTouch(m);this._scrollList=[{time:Date.now(),position:this._moveCoordStart}];};l.prototype.doTouchMove=function(m){"use strict";if(!this._moveCoordStart||this._skipTouchMove)return;var n=h.getTouchPageCoord(m),o=Date.now();this._scrollList.push({time:o,position:n});while(o-this._scrollList[1].time>j)this._scrollList.shift();if(this.scrolling){this._moveTimePrevious=this._moveTimeNow;this._moveTimeNow=o;if(n.y===this._moveCoordNow.y&&n.x===this._moveCoordNow.x)return;}var p=this._moveCoordStart,q=p.x-n.x,r=p.y-n.y;if(!this.scrolling){var s=Math.abs(q),t=Math.abs(r);if(s>this._SCROLL_START_DELTA||t>this._SCROLL_START_DELTA){var u=this.noThreshold||(this._canScrollX&&s>t)||(this._canScrollY&&t>s);if(u){if(this.noThreshold){this._startDirection=this._canScrollX?'x':'y';}else this._startDirection=s>t?'x':'y';this.scrolling=true;this._moveCoordPrevious=this._moveCoordNow;this._moveCoordStart=n;this._moveCoordNow=n;this._moveTimeNow=o;this._touchMoved=true;}else{this._skipTouchMove=true;return;}}}m.prevent();if(this._startDirection==='x'&&!this._canScrollX||this._startDirection==='y'&&!this._canScrollY)return;if(!this._scrolled){this._scrolled=true;this._handler.onScrollStart(this.left,this.top);}this._moveCoordPrevious=this._moveCoordNow;this._moveCoordNow=n;this._touchMoved=true;q=this._canScrollX?q:0;r=this._canScrollY?r:0;var v=this._TENSION_FACTOR,w=this._TENSION_LIMIT,x,y,z=this._startX+q;if(this._canScrollX){if(z<this.minScrollLeft){y=z-this.minScrollLeft;}else if(z>this.maxScrollLeft)y=z-this.maxScrollLeft;if(y){x=Math.min(1,Math.abs(y)/w);x=(1-Math.cos(x*Math.PI/2));z-=y*Math.pow(v,~~(x*10));}y=null;}var aa=this._startY+r;if(this._canScrollY){if(aa<this.minScrollTop){y=aa-this.minScrollTop;}else if(aa>this.maxScrollTop)y=aa-this.maxScrollTop;if(y){x=Math.min(1,Math.abs(y)/w);x=(1-Math.cos(x*Math.PI/2));aa-=y*Math.pow(v,~~(x*10));}}this._scrollTo(z,aa);};l.prototype.doTouchEnd=function(m){"use strict";if(!this._moveCoordStart)return;if(this.scrolling)m.prevent();var n=0,o=0,p=this._moveCoordPrevious,q=this._moveCoordStart,r=this._moveCoordNow||p||q,s=this._canScrollX?this.left:this.top,t,u,v=this._SCROLLING_DURATION,w=Date.now()-this._moveTimePrevious;if(this._usePaging){this._syncPaging();v=this._PAGING_DURATION;var x=this._getRecentTimeAndLocation(),y=this._getIndexDelta(x.position,x.time),z=this.pageIndex+y;z=this._clamp(z,0,this.pagesCount-1);if(this._canScrollX){t=this._clamp(this._indexToLeftOffset(z),this.minScrollLeft,this.maxScrollLeft);}else t=this._clamp(z*this.height,this.minScrollTop,this.maxScrollTop);}else if(this._touchMoved&&w<this._MAX_TOUCH_MOVE_INTERVAL){o=this._canScrollX?p.x-r.x:p.y-r.y;n=o/w;}else{if(this.top<this.minScrollTop){t=this.minScrollTop;}else if(this.top>this.maxScrollTop){t=this.maxScrollTop;}else if(this.left<this.minScrollLeft){t=this.minScrollLeft;}else if(this.left>this.maxScrollLeft)t=this.maxScrollLeft;if(t!==undefined)v=this._PAGING_DURATION;}this._doPostTouchScrolling(s,t,u,n,v);delete this._moveCoordStart;this._scrollList=null;this._touchMoved=false;};l.prototype.isTouchMoving=function(){"use strict";return this._touchMoved;};l.prototype.scrollTo=function(m,n){"use strict";this.stop();this._handler.onScrollStart(this.left,this.top);this._scrollTo(m,n);this._handler.onScrollEnd(this.left,this.top,false);};l.prototype.getPagingPositions=function(){"use strict";return this._pagingPositions;};l.prototype._doPostTouchScrolling=function(m,n,o,p,q){"use strict";p*=this._SPEED_FACTOR;if(n===undefined){n=m+p*q;if(this._canScrollX){o=this._clamp(n,this.minScrollLeft,this.maxScrollLeft);}else o=this._clamp(n,this.minScrollTop,this.maxScrollTop);if(n!==o)n=o+(n-o)*this._BOUNCE_FACTOR/Math.max(1,Math.abs(p));if((n<m&&o<n)||(n>m&&o>n))n=o;}if(o===undefined)o=n;if(n===m&&n===o)return;var r=this._canScrollX?function(t){this._scrollTo(t,this.top);}:function(t){this._scrollTo(this.left,t);},s=this._createStepFunction(m,n,o,function(t,u){this.scrolling=u<1;r.call(this,t);});this.scrolling=true;this._animator.start(s,this._canAnimate,s,q);};l.prototype._createStepFunction=function(m,n,o,p){"use strict";n=n===undefined?m:n;o=o===undefined?n:o;var q=n-m,r=o-n;return function(s,t,u){var v;if(r===0){v=m+q*s;}else if(s<=.5){v=m+q*(s/.5);}else v=n+r*((s-.5)/.5);p.call(this,v,s);if(!t)this._handler.onScrollEnd(this.left,this.top,true);}.bind(this);};l.prototype._scrollTo=function(m,n){"use strict";m=Math.round(m);n=Math.round(n);if(this.left!==m||this.top!==n){this.left=m;this.top=n;this._syncPaging();this._handler.onScroll(m,n);}};l.prototype._syncPaging=function(){"use strict";if(this._usePaging){if(!this.height||!this.width){this.pageIndex=0;this.pagesCount=1;return;}this.pageIndex=this._canScrollX?this._getPageIndex():Math.floor(this.top/this.height);this.pagesCount=this._canScrollX?this._getPagesCount():Math.ceil(this.scrollHeight/this.height);}};l.prototype._indexToLeftOffset=function(m){"use strict";if(this._pagingPositions){m=Math.max(Math.min(m,this._pagingPositions.length-1),0);return this._pagingPositions[m];}return m*this.width;};l.prototype._getPagesCount=function(){"use strict";if(this._pagingPositions)return this._pagingPositions.length;return Math.ceil(this.scrollWidth/this.width);};l.prototype._getPageIndex=function(){"use strict";if(this._pagingPositions)for(var m=this._pagingPositions.length-1;m>=0;--m)if(this._pagingPositions[m]<=this.left)return m;return Math.max(0,Math.floor(this.left/this.width));};l.prototype._getRecentTimeAndLocation=function(){"use strict";for(var m=this._scrollList.length-1;m>-1;m--)if(Date.now()-this._scrollList[m].time>j)return this._scrollList[m];return this._scrollList[0];};l.prototype._getRecentTimeDelta=function(m){"use strict";return Date.now()-m;};l.prototype._getRecentScrollDistance=function(m){"use strict";if(this._canScrollX)return Math.abs(this._moveCoordNow.x-m.x);return Math.abs(this._moveCoordNow.y-m.y);};l.prototype._isBackSwipe=function(){"use strict";if(this._canScrollX)return this._moveCoordNow.x>this._moveCoordStart.x;return this._moveCoordNow.y>this._moveCoordStart.y;};l.prototype._isRecentBackSwipe=function(m){"use strict";if(this._canScrollX){return this._moveCoordNow.x>m.x;}else return this._moveCoordNow.y>m.y;};l.prototype._getDistance=function(){"use strict";if(this._canScrollX)return Math.abs(this._moveCoordNow.x-this._moveCoordStart.x);return Math.abs(this._moveCoordNow.y-this._moveCoordStart.y);};l.prototype._crossesMedian=function(){"use strict";if(this._canScrollX)return this._getDistance()>(this.width/2);return this._getDistance()>(this.height/2);};l.prototype._getVelocity=function(m,n){"use strict";return m/n;};l.prototype._getIndexDelta=function(m,n){"use strict";if(!this._touchMoved)return 0;var o=this._crossesMedian(),p=this._isBackSwipe(),q=this._isRecentBackSwipe(m),r=this._getVelocity(this._getRecentScrollDistance(m),this._getRecentTimeDelta(n));if(r>k)return q?0:1;if(o)return p?0:1;return p?1:0;};l.prototype._canAnimate=function(){"use strict";return this.scrolling;};l.prototype._clamp=function(m,n,o){"use strict";return m<n?n:m>o?o:m;};i(l.prototype,{scrolling:false,width:0,height:0,scrollWidth:0,scrollHeight:0,left:0,top:0,minScrollTop:0,minScrollLeft:0,maxScrollTop:0,maxScrollLeft:0,pagesCount:0,pageIndex:0,noThreshold:false,_SPEED_FACTOR:(/android/gi).test(navigator.appVersion)?1:.2,_MAX_TOUCH_MOVE_INTERVAL:220,_SCROLL_START_DELTA:2,_PAGING_DURATION:400,_SCROLLING_DURATION:450,_TENSION_FACTOR:(/android/gi).test(navigator.appVersion)?.4:.95,_TENSION_LIMIT:30,_BOUNCE_FACTOR:.35});e.exports=l;});
__d("MScrollArea",["CSS","DOM","MScrollAreaScroller","MTouchHelper","Stratcom","StratcomManager","cancelAnimationFrame","copyProperties","getVendorPrefixedName","requestAnimationFrame","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=/Firefox/.test(navigator.userAgent),s=['enableMarauderLogging','infiniteScroller','egoScroller'];function t(u,v){"use strict";var w=v||{};this._enabled=true;this.reflow=this.reflow.bind(this);this._onTouchMove=this._onTouchMove.bind(this);this._onTouchEnd=this._onTouchEnd.bind(this);this._renderScroll=this._renderScroll.bind(this);this._element=u;this._content=u.children[0];this._listeners=[];this._isHorizontal=(w.direction==='horizontal');this._automaticPaging=w.pagingPositions==='auto'&&this._isHorizontal;if(this._automaticPaging){w.pagingPositions=this.calculatePagingPositions();w.betweenSpacing=0;}this._scroller=new i(this,w);this._isContainerDraggable=w.containerDraggable;this._betweenSpacing=w.betweenSpacing||0;this._scrollBounds=w.scrollBounds;this._eventData={scrollarea:this,element:u,contentElement:this._content,scrolledByUser:false,container:this._content,scrollEndCount:0,logName:w.logName,logData:w.logData};if(w.showpaginator&&this._isHorizontal)this._paginatorEl=this._element.lastChild;this.reflow();this._renderScroll();this._scrollStart=false;if(w.pageIndex)if(this._isHorizontal){this.scrollTo(this.getScrollWidth()*w.pageIndex,0);}else this.scrollTo(0,this.getScrollWidth()*w.pageIndex);var x=function(){if(!this._disposed)k.invoke('MScrollArea:create',null,this._eventData);}.bind(this);q(x,1000);}t.prototype.calculatePagingPositions=function(){"use strict";var u=this._content.offsetWidth,v=this._content.children,w=[0],x=[v[0].offsetWidth];for(var y=1,z=v.length;y<z;y++){var aa=v[y].offsetLeft,ba=v[y].offsetWidth,ca=aa+ba,da=w[w.length-1];if(ca>da+u){w.push(aa);x.push(ba);}else x[x.length-1]=ca-da;}for(y=1,z=w.length-1;y<z;y++)w[y]-=(u-x[y])/2;w[w.length-1]-=u-x[x.length-1];return w;};t.prototype.dispose=function(){"use strict";if(!this._disposed){m(this._renderID);if(this._paginatorEl)h.setContent(this._paginatorEl,'');this._clearListeners();this._scroller.dispose();for(var u in this)delete this[u];this._disposed=true;}};t.prototype.isTouchMoving=function(){"use strict";return this._scroller.isTouchMoving();};t.prototype.reset=function(){"use strict";if(this._disposed)return;this.scrollTo(0,0);this._updateElementPosition(this._content,0,0);this._updateElementPosition(this._element,0,0);};t.prototype.scrollByPages=function(u){"use strict";if(!this._disposed)this._scroller.scrollByPages(u);};t.prototype.scrollTo=function(u,v){"use strict";if(this._disposed)return;this._scroller.scrollTo(u,v);this._renderScroll();};t.prototype.scrollToIndex=function(u){"use strict";this.reflow();this.scrollTo(this.getScrollWidth()*u,0);};t.prototype.isScrolling=function(){"use strict";return this._scrollStart;};t.prototype.getScrollLeft=function(){"use strict";return this._scroller.left;};t.prototype.getScrollTop=function(){"use strict";return this._scroller.top;};t.prototype.getMaxScrollTop=function(){"use strict";return this._scroller.maxScrollTop;};t.prototype.getMaxScrollLeft=function(){"use strict";return this._scroller.maxScrollLeft;};t.prototype.getScrollWidth=function(){"use strict";return this._scroller.width;};t.prototype.getScrollHeight=function(){"use strict";return this._scroller.height;};t.prototype.getScrollPageCount=function(){"use strict";return this._scroller.pagesCount;};t.prototype.getScrollPageIndex=function(){"use strict";return this._scroller.pageIndex;};t.prototype.isFirstPage=function(){"use strict";return this._scroller.pageIndex===0;};t.prototype.isLastPage=function(){"use strict";return this._scroller.pageIndex+1===this._scroller.pagesCount;};t.prototype.appendChild=function(u){"use strict";this._content.appendChild(u);};t.prototype.prependChild=function(u){"use strict";h.prependContent(this._content,u);};t.prototype.getNumChildren=function(){"use strict";return this._content.children.length;};t.prototype.getChildAtPageIndex=function(u){"use strict";return this._content.children[u];};t.prototype.emptyChildren=function(){"use strict";h.setContent(this._content,null);};t.prototype.getAutomaticPaging=function(){"use strict";return this._automaticPaging;};t.prototype.reflow=function(u){"use strict";if(this._disposed)return;var v=(r&&this._content)?this._content.style:null,w;if(v){w=v.overflow;v.overflow='hidden';}if(u==='auto'&&this._isHorizontal)u=this.calculatePagingPositions();this._scroller.setDimensions(this._element.offsetWidth+(this._isHorizontal?this._betweenSpacing:0),this._element.offsetHeight+(!this._isHorizontal?this._betweenSpacing:0),this._content.scrollWidth,this._content.scrollHeight,u);var x=Math.min(this._scroller.top,this._scroller.maxScrollTop),y=Math.min(this._scroller.left,this._scroller.maxScrollLeft);if(x!==this._scroller.top||y!==this._scroller.left)this.scrollTo(y,x);if(v)v.overflow=w;this._syncPaginator();};t.prototype.onTouchStart=function(u){"use strict";this.reflow();this._scroller.doTouchStart(u);this._clearListeners();if(this._enabled)this._bindListeners();};t.prototype.onClick=function(u){"use strict";if(this._scroller.scrolling)u.kill();};t.prototype.onScrollStart=function(u,v){"use strict";this._scrollStart=true;this._eventData.scrolledByUser=false;k.invoke('MScrollArea:scrollstart',null,this._eventData);if(this._renderSlowly){m(this._renderID);this._renderID=p(this._renderScroll);}};t.prototype.onScroll=function(u,v){"use strict";k.invoke('MScrollArea:scroll',null,this._eventData);if(!this._renderSlowly)this._renderScroll();};t.prototype.onScrollEnd=function(u,v,w){"use strict";this._scrollStart=false;this._syncPaginator();this._eventData.scrollEndCount++;this._eventData.scrolledByUser=w;var x=null;for(var y=0;y<s.length;y++)if(k.hasSigil(this._element,s[y])){x=s[y];break;}k.invoke('MScrollArea:scrollend',x,this._eventData);if(this._renderSlowly){m(this._renderID);delete this._renderID;this._renderScroll();}};t.prototype.setEnabled=function(u){"use strict";this._enabled=u;if(!u)this._clearListeners();};t.prototype._bindListeners=function(){"use strict";var u=this._element;this._listeners.push(h.listen(u,j.EVT_TOUCHMOVE,null,this._onTouchMove),h.listen(u,j.EVT_TOUCHEND,null,this._onTouchEnd),h.listen(u,j.EVT_TOUCHCANCEL,null,this._onTouchEnd));};t.prototype._clearListeners=function(){"use strict";for(var u=0,v;v=this._listeners[u];u++)v.remove();this._listeners.length=0;};t.prototype._onTouchMove=function(u){"use strict";k.pass();if(u.getStopped()){this._onTouchEnd();return;}else this._scroller.doTouchMove(u);};t.prototype._onTouchEnd=function(u){"use strict";this._scroller.doTouchEnd(u);this._clearListeners();};t.prototype._renderScroll=function(){"use strict";if(this._disposed)return;if(this._scrollBounds){var u,v;if(this._isHorizontal){u=this._scroller.left;v=this._scroller.minScrollLeft;}else{u=this._scroller.top;v=this._scroller.minScrollTop;}var w,x=this._scroller.getPagingPositions();if(x)w=x[x.length-1];if(u<v||(w&&u>w))return;}delete this._renderID;var y=-this._scroller.left,z=-this._scroller.top;if(this.renderedLeft!==y||this.renderedTop!==z){this.renderedLeft=y;this.renderedTop=z;var aa=this._content,ba=this._isHorizontal?y:z,ca=this._isHorizontal?this.getScrollWidth():this.getScrollHeight();if(ba>0&&ba>ca/4)k.invoke('MScrollArea:limit',null,this._eventData);if(this._isContainerDraggable)if(ba<0){this._updateElementPosition(this._element,0,0);}else{aa=this._element;this._updateElementPosition(this._content,0,0);}this._updateElementPosition(aa,z,y);}if(this._renderSlowly&&this._scroller.scrolling)this._renderID=p(this._renderScroll);};t.prototype._updateElementPosition=function(u,v,w){"use strict";var x=o('transform'),y=u&&u.style;if(y)if(x){y[o('backface-visibility')]='hidden';y[x]='translate('+w+'px,'+v+'px)';}else{y.left=w+'px';y.top=v+'px';}};t.prototype._syncPaginator=function(){"use strict";if(this._paginatorEl){var u=h.create('i',{className:'scrollAreaPaginatorBubble'}),v=document.createDocumentFragment(),w=this._scroller.pageIndex;for(var x=0;x<this._scroller.pagesCount;x++){var y=u.cloneNode(false);if(x===w)g.conditionClass(y,'scrollAreaPaginatorBubbleActive',true);v.appendChild(y);}h.setContent(this._paginatorEl,v);}};n(t.prototype,{_renderSlowly:(/android/gi).test(navigator.appVersion)});(function(){l.enableDispatch(window,'orientationchange');})();e.exports=t;});
__d("InitMScrollArea",["DataStore","MScrollArea","MTouchHelper","Stratcom","ge"],function(a,b,c,d,e,f,g,h,i,j,k){var l='scroll-area',m=[],n=false;function o(){function q(){var u=document.documentElement;for(var v=0,w;w=m[v];v++)if(!u.contains(w.element)){w.scrollArea.dispose();var x=g.get(w.element);delete x.scrollArea;m.splice(v,1);v--;}}j.listen('m:page:unload',null,q);function r(u){var v=g.get(u.getNode(l));v&&v.scrollArea&&v.scrollArea.onTouchStart&&v.scrollArea.onTouchStart(u);}j.listen(i.EVT_TOUCHSTART,l,r);function s(u){for(var v=0,w;w=m[v];v++){var x=w.scrollArea,y=x.getAutomaticPaging(),z=u.getType()==='m:orientation-resize:complete';if(y){var aa=x.getScrollWidth();if(z&&aa===w.width)continue;w.width=aa;}else if(z)continue;x.reflow(y?'auto':null);}}j.listen('m:viewport:orientation-change',null,s);j.listen('m:orientation-resize:complete',null,s);function t(u){var v=g.get(u.getNode(l));v.scrollArea&&v.scrollArea.onClick(u);}j.listenCapture('click',l,t);}function p(q){if(!n){o();n=true;}var r=k(q.id);if(!r)return;var s=g.get(r);if(!s.scrollArea){s.marauderEventName=q.marauderEventName;s.scrollArea=new h(r,s);m.push({scrollArea:s.scrollArea,element:r});}return s.scrollArea;}f.main=p;});