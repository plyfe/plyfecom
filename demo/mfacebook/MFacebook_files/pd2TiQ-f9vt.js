/*!CK:3481462600!*//*1397504019,178179377*/

if (self.CavalryLogger) { CavalryLogger.start_js(["wn5OL"]); }

__d("MProgressBar.react",["MAnimator","React","cx"],function(a,b,c,d,e,f,g,h,i){var j=h.createClass({displayName:'MProgressBar',propTypes:{initialValue:h.PropTypes.number.isRequired,min:h.PropTypes.number,max:h.PropTypes.number},getDefaultProps:function(){return {min:0,max:100};},getInitialState:function(){return {value:this.props.initialValue};},_calculatePercentage:function(k){var l=this.props,m=Math.min(Math.max((k-l.min)/(l.max-l.min)*100,0),100);return m;},_getFillArea:function(){var k=this._calculatePercentage(this.state.value),l=Math.round(k),m=(("_lbr")+(l===0?' '+"_lbs":'')+(l===100?' '+"_lbt":''));return (h.DOM.div({className:m,style:{width:k+'%'}}));},animate:function(k,l){var m=this._calculatePercentage(this.state.value),n=this._calculatePercentage(k);g.play(m,n,l,this.setValue);},setValue:function(k){if(this.isMounted())this.setState({value:k});},render:function(){return (h.DOM.div({className:"_lbu"},this._getFillArea()));}});e.exports=j;});
__d("MXUIBase",["cx","React"],function(a,b,c,d,e,f,g,h){var i={propTypes:{fontsize:h.PropTypes.oneOf(['smallcaps','small','medium','large','xlarge','inherit']),fontshade:h.PropTypes.oneOf(['light','medium','dark','inherit']),fontweight:h.PropTypes.oneOf(['normal','bold','inherit']),textalign:h.PropTypes.oneOf(['left','center','right','inherit'])},getDefaultProps:function(){return {fontsize:'inherit',fontshade:'inherit',fontweight:'inherit',textalign:'inherit'};},getClassName:function(j){return ((j.fontsize==='smallcaps'?"_56bq":'')+(j.fontsize==='small'?' '+"_52jc":'')+(j.fontsize==='medium'?' '+"_52jd":'')+(j.fontsize==='large'?' '+"_52je":'')+(j.fontsize==='xlarge'?' '+"_52jf":'')+(j.fontshade==='light'?' '+"_52j9":'')+(j.fontshade==='medium'?' '+"_52ja":'')+(j.fontshade==='dark'?' '+"_52jb":'')+(j.fontweight==='normal'?' '+"_52jg":'')+(j.fontweight==='bold'?' '+"_52jh":'')+(j.textalign==='left'?' '+"_52ji":'')+(j.textalign==='center'?' '+"_52jj":'')+(j.textalign==='right'?' '+"_52jk":''));}};e.exports=i;});
__d("MXUIBlock",["cx","React"],function(a,b,c,d,e,f,g,h){var i={propTypes:{background:h.PropTypes.oneOf(['base-wash','light-wash','white','highlight','transparent']),padding:h.PropTypes.oneOf(['none','small','medium','large','xlarge'])},getDefaultProps:function(){return {background:'transparent'};},getClassName:function(j){return ((j.background==='base-wash'?"_55wm":'')+(j.background==='light-wash'?' '+"_59e9":'')+(j.background==='white'?' '+"_55wo":'')+(j.background==='highlight'?' '+"_55wn":'')+(j.padding==='none'?' '+"_55wp":'')+(j.padding==='small'?' '+"_55wq":'')+(j.padding==='medium'?' '+"_55wr":'')+(j.padding==='large'?' '+"_55ws":'')+(j.padding==='xlarge'?' '+"_56hq":''));}};e.exports=i;});
__d("MXUIDiv.react",["MXUIBase","MXUIBlock","React","joinClasses","merge"],function(a,b,c,d,e,f,g,h,i,j,k){var l=i.createClass({displayName:'MXUIDiv',propTypes:k(g.propTypes,h.propTypes),getDefaultProps:function(){return k(g.getDefaultProps(),h.getDefaultProps());},render:function(){var m=j(g.getClassName(this.props),h.getClassName(this.props));return this.transferPropsTo(i.DOM.div({className:m},this.props.children));}});e.exports=l;});
__d("MXUILayout.react",["MXUIDiv.react","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){var k=function(m){return ((m.align==='start'?"_52wc":'')+(m.align==='end'?' '+"_52wd":'')+(m.align==='center'?' '+"_52we":'')+(m.align==='stretch'?' '+"_52wf":''));},l=h.createClass({displayName:'MXUILayout',getDefaultProps:function(){return {align:'stretch'};},propTypes:{align:h.PropTypes.oneOf(['start','end','center','stretch'])},hasAlignSelfChildren:function(){var m=this.props.children;for(var n=0;n<m.length;n++){var o=m[n];if(o.props.hasOwnProperty('alignself'))return true;}return false;},render:function(){var m;if(this.hasAlignSelfChildren()){m="_4g33";var n=this.props.align;this.props.children.forEach(function(o){if(o.props.hasOwnProperty('alignself'))return;o.props.alignself=n;});}else m=j(k(this.props),"_4g33");return this.transferPropsTo(g({className:m},this.props.children));}});e.exports=l;});
__d("MXUILayoutColumn.react",["MXUIDiv.react","React","MJSEnvironment","joinClasses","cx"],function(a,b,c,d,e,f,g,h,i,j,k){var l=function(n){return ((n.alignself==='start'?"_52wc":'')+(n.alignself==='end'?' '+"_52wd":'')+(n.alignself==='center'?' '+"_52we":'')+(n.alignself==='stretch'?' '+"_52wf":''));},m=h.createClass({displayName:'MXUILayoutColumn',propTypes:{alignself:h.PropTypes.oneOf(['start','end','center','stretch'])},render:function(){var n;if(this.props.hasOwnProperty('alignself')){n=j("_5i2i",l(this.props));if(i.IS_FIREFOX)return this.transferPropsTo(g({className:n},g({className:"_5xu4"},this.props.children)));}return this.transferPropsTo(g({className:n},this.props.children));}});e.exports=m;});
__d("memoize",["invariant"],function(a,b,c,d,e,f,g){function h(i){var j;return function(){var k=Array.prototype.slice.call(arguments,0);g(!k.length);if(i){j=i();i=null;}return j;};}e.exports=h;});
__d("DataViewPolyfill",["copyProperties"],function(a,b,c,d,e,f,g){"use strict";function h(i,j,k){if(j===undefined){this._ba=new Uint8Array(i);}else if(k===undefined){this._ba=new Uint8Array(i,j);}else this._ba=new Uint8Array(i,j,k);this.byteLength=this._ba.byteLength;}g(h,{isSupported:function(){return !!a.Uint8Array;}});g(h.prototype,{getUint8:function(i){if(i>=this._ba.length)throw new Error('Trying to read beyond bounds of DataViewPolyfill');return this._ba[i];},getUint16:function(i,j){var k=this.getUint8(i),l=this.getUint8(i+1);return j?(l*256)+k:(k*256)+l;},getUint32:function(i,j){var k=this.getUint8(i),l=this.getUint8(i+1),m=this.getUint8(i+2),n=this.getUint8(i+3);return j?(((n*256+m)*256+l)*256)+k:(((k*256+l)*256+m)*256)+n;}});e.exports=h;});
__d("base64toUint8Array",[],function(a,b,c,d,e,f){function g(h){var i=atob(h),j=i.length,k=new Uint8Array(j);for(var l=0;l<j;l++)k[l]=i.charCodeAt(l);return k;}e.exports=g;});
__d("getExifOrientation",["DataViewPolyfill"],function(a,b,c,d,e,f,g){var h=a.DataView||g;function i(j,k){var l=new FileReader();l.onload=function(m){var n="Exif\0\0",o=0,p,q=new h(m.target.result);for(var r=0;r<250;r++)if(q.getUint8(r)===n.charCodeAt(o)){o+=1;p=r+1;if(o===n.length)break;}else o=0;if(!o){k(null);return;}var s;if(q.getUint8(p)==77&&q.getUint8(p+1)==77){s=false;}else if(q.getUint8(p)==73&&q.getUint8(p+1)==73){s=true;}else{k(null);return;}p+=2;p+=2;var t,u,v,w;t=q.getUint32(p,s);p+=(t-8)+4;u=q.getUint16(p,s);p+=2;for(var x=0;x<Math.min(25,u);x++){v=q.getUint16(p,s);p+=8;if(v==274){w=q.getUint16(p,s);k(w);return;}p+=4;}k(null);};l.readAsArrayBuffer(j);}e.exports=i;});
/**
 * Mega pixel image rendering library for iOS6 Safari
 *
 * @providesModule MegaPixImage
 * @preserve-header
 *
 * Fixes iOS6 Safari's image file rendering issue for large size image (over mega-pixel),
 * which causes unexpected subsampling when drawing it in canvas.
 * By using this library, you can safely render the image with proper stretching.
 *
 * Copyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>
 * Released under the MIT license
 */__d("MegaPixImage",[],function(a,b,c,d,e,f){function g(n){var o=n.naturalWidth,p=n.naturalHeight;if(o*p>1024*1024){var q=document.createElement('canvas');q.width=q.height=1;var r=q.getContext('2d');r.drawImage(n,-o+1,0);return r.getImageData(0,0,1,1).data[3]===0;}else return false;}function h(n,o,p){var q=document.createElement('canvas');q.width=1;q.height=p;var r=q.getContext('2d');r.drawImage(n,0,0);var s=r.getImageData(0,0,1,p).data,t=0,u=p,v=p;while(v>t){var w=s[(v-1)*4+3];if(w===0){u=v;}else t=v;v=(u+t)>>1;}var x=(v/p);return (x===0)?1:x;}function i(n,o,p){var q=document.createElement('canvas');j(n,q,o,p);return q.toDataURL("image/jpeg",o.quality||.8);}function j(n,o,p,q){var r=n.naturalWidth,s=n.naturalHeight,t=p.width,u=p.height,v=o.getContext('2d');v.save();k(o,t,u,p.orientation);var w=g(n);if(w){r/=2;s/=2;}var x=1024,y=document.createElement('canvas');y.width=y.height=x;var z=y.getContext('2d'),aa=q?h(n,r,s):1,ba=Math.ceil(x*t/r),ca=Math.ceil(x*u/s/aa),da=0,ea=0;while(da<s){var fa=0,ga=0;while(fa<r){z.clearRect(0,0,x,x);z.drawImage(n,-fa,-da);v.drawImage(y,0,0,x,x,ga,ea,ba,ca);fa+=x;ga+=ba;}da+=x;ea+=ca;}v.restore();y=z=null;}function k(n,o,p,q){switch(q){case 5:case 6:case 7:case 8:n.width=p;n.height=o;break;default:n.width=o;n.height=p;}var r=n.getContext('2d');switch(q){case 2:r.translate(o,0);r.scale(-1,1);break;case 3:r.translate(o,p);r.rotate(Math.PI);break;case 4:r.translate(0,p);r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI);r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI);r.translate(0,-p);break;case 7:r.rotate(.5*Math.PI);r.translate(o,-p);r.scale(-1,1);break;case 8:r.rotate(-.5*Math.PI);r.translate(-o,0);break;default:break;}}var l=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;function m(n){if(n instanceof Blob){var o=new Image();if(!l)throw Error("No createObjectURL function found to create blob url");o.src=l.createObjectURL(n);this.blob=n;n=o;}if(!n.naturalWidth&&!n.naturalHeight){var p=this;n.onload=function(){var q=p.imageLoadListeners;if(q){p.imageLoadListeners=null;for(var r=0,s=q.length;r<s;r++)q[r]();}};this.imageLoadListeners=[];}this.srcImage=n;}m.isSupported=!!l;m.prototype.render=function(n,o){if(this.imageLoadListeners){var p=this;this.imageLoadListeners.push(function(){p.render(n,o);});return;}o=o||{};var q=this.srcImage.naturalWidth,r=this.srcImage.naturalHeight,s=o.width,t=o.height,u=o.maxWidth,v=o.maxHeight,w=!this.blob||this.blob.type==='image/jpeg';if(s&&!t){t=(r*s/q)<<0;}else if(t&&!s){s=(q*t/r)<<0;}else{s=q;t=r;}if(u&&s>u){s=u;t=(r*s/q)<<0;}if(v&&t>v){t=v;s=(q*t/r)<<0;}var x={width:s,height:t};for(var y in o)x[y]=o[y];var z=n.tagName.toLowerCase();if(z==='img'){n.src=i(this.srcImage,x,w);}else if(z==='canvas')j(this.srcImage,n,x,w);if(typeof this.onrender==='function')this.onrender(n);};e.exports=m;});
__d("MPhotoResizer",["base64toUint8Array","getExifOrientation","invariant","mixin","performanceNow","requestAnimationFrame","PhotosUploadWaterfallXMixin","PUWSteps","MegaPixImage","Vector"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q='data:image/jpeg;base64,',r=j(m);for(var s in r)if(r.hasOwnProperty(s))u[s]=r[s];var t=r===null?null:r.prototype;u.prototype=Object.create(t);u.prototype.constructor=u;u.__superConstructor__=r;function u(){"use strict";this.$MPhotoResizer0=new p(960,960);this.$MPhotoResizer1=.85;}u.prototype.setFile=function(v){"use strict";this.$MPhotoResizer2=v;return this;};u.prototype.setDimensions=function(v){"use strict";this.$MPhotoResizer0=v;return this;};u.prototype.setQuality=function(v){"use strict";this.$MPhotoResizer1=v;return this;};u.prototype.setHandler=function(v){"use strict";this.$MPhotoResizer3=v;return this;};u.prototype.setWaterfall=function(v,w,x){"use strict";this.$MPhotoResizer4=v;this.$MPhotoResizer5=w;this.$MPhotoResizer6=x;return this;};u.prototype.resize=function(){"use strict";i(this.$MPhotoResizer2);i(this.$MPhotoResizer0);i(this.$MPhotoResizer1);i(this.$MPhotoResizer3);i(this.$MPhotoResizer4);i(this.$MPhotoResizer5);if(!o.isSupported){this.logStep(n.CLIENT_PROCESS_UNAVAILABLE,{error:'canvas_not_supported'});this.$MPhotoResizer3(this.$MPhotoResizer2);return;}if(!this.$MPhotoResizer7()){this.logStep(n.CLIENT_PROCESS_UNAVAILABLE,{error:'no_jpeg_output'});this.$MPhotoResizer3(this.$MPhotoResizer2);return;}this.logStep(n.CLIENT_PROCESS_BEGIN);var v=k();h(this.$MPhotoResizer2,function(w){l(function(){var x=document.createElement('canvas'),y=new o(this.$MPhotoResizer2);y.onrender=function(){l(function(){var z=x.toDataURL('image/jpeg',this.$MPhotoResizer1);x=null;z=z.substr(q.length);l(function(){var aa=g(z);z=null;var ba=new Blob([aa.buffer],{type:'image/jpeg'});this.logStep(n.CLIENT_PROCESS_SUCCESS,{dt:k()-v});this.$MPhotoResizer3(ba);}.bind(this));}.bind(this));}.bind(this);y.render(x,{maxWidth:this.$MPhotoResizer0.x,maxHeight:this.$MPhotoResizer0.y,orientation:w});}.bind(this));}.bind(this));};u.prototype.$MPhotoResizer7=function(){"use strict";var v=document.createElement('canvas');v.width=1;v.height=1;var w=v.toDataURL('image/jpeg');return w.substr(0,q.length)===q;};u.prototype.getWaterfallID=function(){"use strict";return this.$MPhotoResizer4;};u.prototype.getWaterfallAppName=function(){"use strict";return this.$MPhotoResizer5;};u.prototype.getWaterfallSource=function(){"use strict";return this.$MPhotoResizer6;};e.exports=u;});
__d("XPhotosSaveUnpublishedControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/_mupload_\/photo\/x\/saveunpublished\/",{thumbnail_width:{type:"Int"},thumbnail_height:{type:"Int"},waterfall_app_name:{type:"String"},waterfall_id:{type:"String"},waterfall_source:{type:"String"},upload_id:{type:"String"},target_id:{type:"Int"}});});
__d("supportsXHR2",["memoize"],function(a,b,c,d,e,f,g){function h(){if(!window.FormData||!window.XMLHttpRequest)return false;var i=new XMLHttpRequest();return ('upload' in i&&'withCredentials' in i);}e.exports=g(h);});
__d("MPhotoUploadRequest",["ActorURI","CurrentUser","DOM","MPhotoResizer","MRequest","PhotosUploadWaterfallXMixin","PUWSteps","XPhotosSaveUnpublishedControllerURIBuilder","copyProperties","invariant","mixin","performanceNow","supportsXHR2"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=q(l);for(var u in t)if(t.hasOwnProperty(u))w[u]=t[u];var v=t===null?null:t.prototype;w.prototype=Object.create(v);w.prototype.constructor=w;w.__superConstructor__=t;function w(){"use strict";this.$MPhotoUploadRequest0=0;}w.prototype.setClonedFileInput=function(z){"use strict";this.$MPhotoUploadRequest1=z;return this;};w.prototype.setAttachedFile=function(z){"use strict";this.$MPhotoUploadRequest2=z;return this;};w.prototype.setDTSG=function(z){"use strict";this.$MPhotoUploadRequest3=z;return this;};w.prototype.setUploadDomain=function(z){"use strict";this.$MPhotoUploadRequest4=z;return this;};w.prototype.setWaterfall=function(z,aa,ba){"use strict";this.$MPhotoUploadRequest5=z;this.$MPhotoUploadRequest6=aa;this.$MPhotoUploadRequest7=ba;return this;};w.prototype.setHandler=function(z){"use strict";this.$MPhotoUploadRequest8=z;return this;};w.prototype.setProgressHandler=function(z){"use strict";this.$MPhotoUploadRequest9=z;return this;};w.prototype.setErrorHandler=function(z){"use strict";this.$MPhotoUploadRequesta=z;return this;};w.prototype.setThumbnailDimensions=function(z){"use strict";this.$MPhotoUploadRequestb=z;return this;};w.prototype.setShouldResize=function(z){"use strict";this.$MPhotoUploadRequestc=z;return this;};w.prototype.setTargetID=function(z){"use strict";this.$MPhotoUploadRequestd=z;return this;};w.prototype.setActorID=function(z){"use strict";this.$MPhotoUploadRequeste=z;return this;};w.prototype.send=function(){"use strict";p(this.$MPhotoUploadRequest1);p(this.$MPhotoUploadRequest4);p(this.$MPhotoUploadRequest3);p(this.$MPhotoUploadRequest5);p(this.$MPhotoUploadRequest6);p(this.$MPhotoUploadRequest7);p(this.$MPhotoUploadRequest8);p(this.$MPhotoUploadRequestb);p(!this.$MPhotoUploadRequestf&&!this.$MPhotoUploadRequestg);if(!s()){this.$MPhotoUploadRequesth();}else this.$MPhotoUploadRequesti();return this;};w.prototype.$MPhotoUploadRequestj=function(z,aa){"use strict";this.logStep(z,o({retriesNeeded:this.$MPhotoUploadRequest0},aa||{}));};w.prototype.abort=function(z){"use strict";if(!this.$MPhotoUploadRequest1)return;this.$MPhotoUploadRequestj(m.CLIENT_TRANSFER_CANCEL,{elapsed_time:r()-this.transferStartTime,bytes:this.fileSize,progress:z});if(s()){this.$MPhotoUploadRequestk();}else this.$MPhotoUploadRequestl();};w.prototype.retry=function(){"use strict";this.$MPhotoUploadRequest0++;this.abort();this.send();};w.prototype.$MPhotoUploadRequestm=function(){"use strict";var z=this.$MPhotoUploadRequest1.files;return (z&&z.item&&z.item(0)&&z.item(0).size);};w.prototype.$MPhotoUploadRequestn=function(){"use strict";var z=new n().setInt('thumbnail_width',this.$MPhotoUploadRequestb.x).setInt('thumbnail_height',this.$MPhotoUploadRequestb.y).setString('waterfall_id',this.$MPhotoUploadRequest5).setString('waterfall_app_name',this.$MPhotoUploadRequest6).setString('waterfall_source',this.$MPhotoUploadRequest7).setInt('target_id',this.$MPhotoUploadRequestd).getURI().setProtocol(this.$MPhotoUploadRequest4.getProtocol()).setDomain(this.$MPhotoUploadRequest4.getDomain());return g.create(z,this.$MPhotoUploadRequeste);};w.prototype.$MPhotoUploadRequesti=function(){"use strict";var z=this.$MPhotoUploadRequest2;if(!this.$MPhotoUploadRequestc){this.$MPhotoUploadRequesto(z);return;}new j().setFile(z).setWaterfall(this.$MPhotoUploadRequest5,this.$MPhotoUploadRequest6,this.$MPhotoUploadRequest7).setHandler(function(aa){this.$MPhotoUploadRequesto(aa);}.bind(this)).resize();};w.prototype.$MPhotoUploadRequesto=function(z){"use strict";var aa=new FormData();aa.append(this.$MPhotoUploadRequest1.name,z);this.fileSize=z.size;this.transferStartTime=r();this.$MPhotoUploadRequestj(m.CLIENT_TRANSFER_BEGIN,{bytes:this.fileSize});var ba=this.$MPhotoUploadRequestf=new k(this.$MPhotoUploadRequestn()).setCORS(true).setData({fb_dtsg:this.$MPhotoUploadRequest3}).setRawData(aa);ba.listen('open',function(ca){var da=ca.getTransport();da.withCredentials=true;});ba.listen('done',function(ca){this.$MPhotoUploadRequestj(m.CLIENT_TRANSFER_SUCCESS,{elapsed_time:r()-this.transferStartTime,bytes:this.fileSize,fbid:ca.fbid});this.$MPhotoUploadRequest8(ca);}.bind(this));ba.listen('error',function(ca){this.$MPhotoUploadRequestj(m.CLIENT_TRANSFER_FAIL,{error_type:'mrequest_fail',elapsed_time:r()-this.transferStartTime,bytes:this.fileSize});this.$MPhotoUploadRequesta&&this.$MPhotoUploadRequesta(ca);}.bind(this));ba.listen('uploadprogress',function(ca){this.$MPhotoUploadRequest9&&this.$MPhotoUploadRequest9(ca);}.bind(this));ba.send();};w.prototype.$MPhotoUploadRequestk=function(){"use strict";this.$MPhotoUploadRequestf&&this.$MPhotoUploadRequestf.abort();this.$MPhotoUploadRequestf=null;};w.prototype.$MPhotoUploadRequestp=function(z,aa){"use strict";return i.create('input',{type:'hidden',name:z,value:aa});};w.prototype.$MPhotoUploadRequesth=function(){"use strict";var z='MPhotoUpload'+(x++),aa=this.$MPhotoUploadRequestg=i.create('iframe',{name:z,id:z});aa.style.display='none';var ba=this.$MPhotoUploadRequestq=i.create('form',{target:z,action:this.$MPhotoUploadRequestn().toString(),method:'POST',enctype:'multipart/form-data'});ba.style.display='none';var ca={fb_dtsg:this.$MPhotoUploadRequest3,__a:1,__user:h.getID(),upload_id:z};for(var da in ca)i.appendContent(ba,this.$MPhotoUploadRequestp(da,ca[da]));i.appendContent(document.body,aa);i.appendContent(document.body,ba);i.appendContent(ba,this.$MPhotoUploadRequest1);this.fileSize=this.$MPhotoUploadRequestm();y[z]=function(ea){if(!ea){this.$MPhotoUploadRequestr('no_payload');return;}delete y[z];this.$MPhotoUploadRequestl();this.$MPhotoUploadRequestj(m.CLIENT_TRANSFER_SUCCESS,{elapsed_time:r()-this.transferStartTime,bytes:this.fileSize,fbid:ea.fbid});this.$MPhotoUploadRequest8(ea);}.bind(this);aa.onerror=this.$MPhotoUploadRequestr.bind('iframe_onerror');this.transferStartTime=r();this.$MPhotoUploadRequestj(m.CLIENT_TRANSFER_BEGIN,{bytes:this.fileSize});document.domain='facebook.com';ba.submit();};w.prototype.$MPhotoUploadRequestr=function(z){"use strict";this.$MPhotoUploadRequestj(m.CLIENT_TRANSFER_FAIL,{error_type:z,elapsed_time:r()-this.transferStartTime,bytes:this.fileSize});this.$MPhotoUploadRequesta&&this.$MPhotoUploadRequesta();this.$MPhotoUploadRequestl();};w.prototype.$MPhotoUploadRequestl=function(){"use strict";this.$MPhotoUploadRequestg&&i.remove(this.$MPhotoUploadRequestg);this.$MPhotoUploadRequestg=null;this.$MPhotoUploadRequestq&&i.remove(this.$MPhotoUploadRequestq);this.$MPhotoUploadRequestq=null;};w.prototype.getWaterfallID=function(){"use strict";return this.$MPhotoUploadRequest5;};w.prototype.getWaterfallAppName=function(){"use strict";return this.$MPhotoUploadRequest6;};w.prototype.getWaterfallSource=function(){"use strict";return this.$MPhotoUploadRequest7;};w.handleResponse=function(z,aa){"use strict";y[z](aa);};var x=0,y={};e.exports=w;});
__d("AnimatableContainer",["React","StaticContainer.react","getVendorPrefixedName"],function(a,b,c,d,e,f,g,h,i){var j=i('transform'),k=.5,l=g.createClass({displayName:'AnimatableContainer',getDefaultProps:function(){return {blockUpdates:true,component:g.DOM.div,contentComponent:g.DOM.span,opacity:1,rotate:null,timeout:200,translate:null};},componentWillMount:function(){this.wasEverOnGPU=false;this.isAnimating=false;this.lastAnimationTime=0;this.animationInterval=null;},componentWillUnmount:function(){if(this.animationInterval)window.clearInterval(this.animationInterval);},componentWillReceiveProps:function(m){var n=this.getStyle(this.props),o=this.getStyle(m);this.isAnimating=(o.opacity!==n.opacity||o[j]!==n[j]);if(this.isAnimating){this.lastAnimationTime=Date.now();if(this.props.timeout&&!this.animationInterval)this.animationInterval=window.setInterval(this.checkAnimationEnd,this.props.timeout*k);}},checkAnimationEnd:function(){if(Date.now()-this.lastAnimationTime>this.props.timeout){window.clearInterval(this.animationInterval);this.animationInterval=null;this.isAnimating=false;this.forceUpdate();}},getStyle:function(m){var n={};if(this.props.style)for(var o in this.props.style)n[o]=this.props.style[o];var p='';if(m.opacity!==1)n.opacity=m.opacity;if(m.translate)p+=('translate3d('+(m.translate.x||0)+'px, '+(m.translate.y||0)+'px, '+(m.translate.z||0)+'px) ');if(m.rotate)p+=('rotate3d('+(m.rotate.x||0)+', '+(m.rotate.y||0)+', '+(m.rotate.z||0)+', '+m.rotate.deg+'deg)');if(p.length>0){n[j]=p;this.wasEverOnGPU=true;}else if(this.wasEverOnGPU)n[j]='translate3d(0, 0, 0)';return n;},render:function(){var m=this.props.component,n=this.props.contentComponent;return (m({className:this.props.className,style:this.getStyle(this.props)},h({shouldUpdate:!this.props.blockUpdates||!this.isAnimating},n(null,this.props.children))));}});e.exports=l;});
__d("TouchableArea",["React"],function(a,b,c,d,e,f,g){var h=g.createClass({displayName:'TouchableArea',getDefaultProps:function(){return {component:g.DOM.div,touchable:true};},handleTouchStart:function(i){if(!this.props.scroller||!this.props.touchable)return;this.props.scroller.doTouchStart(i.touches,i.timeStamp);i.preventDefault();},handleTouchMove:function(i){if(!this.props.scroller||!this.props.touchable)return;this.props.scroller.doTouchMove(i.touches,i.timeStamp,i.scale);i.preventDefault();},handleTouchEnd:function(i){if(!this.props.scroller||!this.props.touchable)return;this.props.scroller.doTouchEnd(i.timeStamp);i.preventDefault();},render:function(){var i=this.props.component;return this.transferPropsTo(i({onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,onTouchCancel:this.handleTouchEnd},this.props.children));}});e.exports=h;});
__d("ZyngaScrollerAnimate",["requestAnimationFrame"],function(a,b,c,d,e,f,g){var h=Date.now||function(){return +new Date();},i=60,j=1000,k={},l=1,m={stop:function(n){var o=k[n]!=null;if(o)k[n]=null;return o;},isRunning:function(n){return k[n]!=null;},start:function(n,o,p,q,r,s){var t=h(),u=t,v=0,w=0,x=l++;if(!s)s=document.body;if(x%20===0){var y={};for(var z in k)y[z]=true;k=y;}var aa=function(ba){var ca=ba!==true,da=h();if(!k[x]||(o&&!o(x))){k[x]=null;p&&p(i-(w/((da-t)/j)),x,false);return;}if(ca){var ea=Math.round((da-u)/(j/i))-1;for(var fa=0;fa<Math.min(ea,4);fa++){aa(true);w++;}}if(q){v=(da-t)/q;if(v>1)v=1;}var ga=r?r(v):v;if((n(ga,da,ca)===false||v===1)&&ca){k[x]=null;p&&p(i-(w/((da-t)/j)),x,v===1||q==null);}else if(ca){u=da;g(aa,s);}};k[x]=true;g(aa,s);return x;}};e.exports=m;});
__d("ZyngaScroller",["ZyngaScrollerAnimate"],function(a,b,c,d,e,f,g){var h;(function(){var i=function(){};h=function(n,o){this.__callback=n;this.options={scrollingX:true,scrollingY:true,animating:true,animationDuration:250,bouncing:true,locking:true,paging:false,snapping:false,zooming:false,minZoom:.5,maxZoom:3,speedMultiplier:1,scrollingComplete:i,penetrationDeceleration:.03,penetrationAcceleration:.08};for(var p in o)this.options[p]=o[p];};var j=function(n){return (Math.pow((n-1),3)+1);},k=function(n){if((n/=.5)<1)return .5*Math.pow(n,3);return .5*(Math.pow((n-2),3)+2);},l={__isSingleTouch:false,__isTracking:false,__didDecelerationComplete:false,__isGesturing:false,__isDragging:false,__isDecelerating:false,__isAnimating:false,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__refreshHeight:null,__refreshActive:false,__refreshActivate:null,__refreshDeactivate:null,__refreshStart:null,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,setDimensions:function(n,o,p,q){var r=this;if(n===+n)r.__clientWidth=n;if(o===+o)r.__clientHeight=o;if(p===+p)r.__contentWidth=p;if(q===+q)r.__contentHeight=q;r.__computeScrollMax();r.scrollTo(r.__scrollLeft,r.__scrollTop,true);},setPosition:function(n,o){var p=this;p.__clientLeft=n||0;p.__clientTop=o||0;},setSnapSize:function(n,o){var p=this;p.__snapWidth=n;p.__snapHeight=o;},activatePullToRefresh:function(n,o,p,q){var r=this;r.__refreshHeight=n;r.__refreshActivate=o;r.__refreshDeactivate=p;r.__refreshStart=q;},triggerPullToRefresh:function(){this.__publish(this.__scrollLeft,-this.__refreshHeight,this.__zoomLevel,true);if(this.__refreshStart)this.__refreshStart();},finishPullToRefresh:function(){var n=this;n.__refreshActive=false;if(n.__refreshDeactivate)n.__refreshDeactivate();n.scrollTo(n.__scrollLeft,n.__scrollTop,true);},getValues:function(){var n=this;return {left:n.__scrollLeft,top:n.__scrollTop,zoom:n.__zoomLevel};},getScrollMax:function(){var n=this;return {left:n.__maxScrollLeft,top:n.__maxScrollTop};},zoomTo:function(n,o,p,q,r){var s=this;if(!s.options.zooming)throw new Error("Zooming is not enabled!");if(r)s.__zoomComplete=r;if(s.__isDecelerating){g.stop(s.__isDecelerating);s.__isDecelerating=false;}var t=s.__zoomLevel;if(p==null)p=s.__clientWidth/2;if(q==null)q=s.__clientHeight/2;n=Math.max(Math.min(n,s.options.maxZoom),s.options.minZoom);s.__computeScrollMax(n);var u=((p+s.__scrollLeft)*n/t)-p,v=((q+s.__scrollTop)*n/t)-q;if(u>s.__maxScrollLeft){u=s.__maxScrollLeft;}else if(u<0)u=0;if(v>s.__maxScrollTop){v=s.__maxScrollTop;}else if(v<0)v=0;s.__publish(u,v,n,o);},zoomBy:function(n,o,p,q,r){var s=this;s.zoomTo(s.__zoomLevel*n,o,p,q,r);},scrollTo:function(n,o,p,q){var r=this;if(r.__isDecelerating){g.stop(r.__isDecelerating);r.__isDecelerating=false;}if(q!=null&&q!==r.__zoomLevel){if(!r.options.zooming)throw new Error("Zooming is not enabled!");n*=q;o*=q;r.__computeScrollMax(q);}else q=r.__zoomLevel;if(!r.options.scrollingX){n=r.__scrollLeft;}else if(r.options.paging){n=Math.round(n/r.__clientWidth)*r.__clientWidth;}else if(r.options.snapping)n=Math.round(n/r.__snapWidth)*r.__snapWidth;if(!r.options.scrollingY){o=r.__scrollTop;}else if(r.options.paging){o=Math.round(o/r.__clientHeight)*r.__clientHeight;}else if(r.options.snapping)o=Math.round(o/r.__snapHeight)*r.__snapHeight;n=Math.max(Math.min(r.__maxScrollLeft,n),0);o=Math.max(Math.min(r.__maxScrollTop,o),0);if(n===r.__scrollLeft&&o===r.__scrollTop)p=false;r.__publish(n,o,q,p);},scrollBy:function(n,o,p){var q=this,r=q.__isAnimating?q.__scheduledLeft:q.__scrollLeft,s=q.__isAnimating?q.__scheduledTop:q.__scrollTop;q.scrollTo(r+(n||0),s+(o||0),p);},doMouseZoom:function(n,o,p,q){var r=this,s=n>0?.97:1.03;return r.zoomTo(r.__zoomLevel*s,false,p-r.__clientLeft,q-r.__clientTop);},doTouchStart:function(n,o){if(n.length==null)throw new Error("Invalid touch list: "+n);if(o instanceof Date)o=o.valueOf();if(typeof o!=="number")throw new Error("Invalid timestamp value: "+o);var p=this;p.__interruptedAnimation=true;if(p.__isDecelerating){g.stop(p.__isDecelerating);p.__isDecelerating=false;p.__interruptedAnimation=true;}if(p.__isAnimating){g.stop(p.__isAnimating);p.__isAnimating=false;p.__interruptedAnimation=true;}var q,r,s=n.length===1;if(s){q=n[0].pageX;r=n[0].pageY;}else{q=Math.abs(n[0].pageX+n[1].pageX)/2;r=Math.abs(n[0].pageY+n[1].pageY)/2;}p.__initialTouchLeft=q;p.__initialTouchTop=r;p.__zoomLevelStart=p.__zoomLevel;p.__lastTouchLeft=q;p.__lastTouchTop=r;p.__lastTouchMove=o;p.__lastScale=1;p.__enableScrollX=!s&&p.options.scrollingX;p.__enableScrollY=!s&&p.options.scrollingY;p.__isTracking=true;p.__didDecelerationComplete=false;p.__isDragging=!s;p.__isSingleTouch=s;p.__positions=[];},doTouchMove:function(n,o,p){if(n.length==null)throw new Error("Invalid touch list: "+n);if(o instanceof Date)o=o.valueOf();if(typeof o!=="number")throw new Error("Invalid timestamp value: "+o);var q=this;if(!q.__isTracking)return;var r,s;if(n.length===2){r=Math.abs(n[0].pageX+n[1].pageX)/2;s=Math.abs(n[0].pageY+n[1].pageY)/2;}else{r=n[0].pageX;s=n[0].pageY;}var t=q.__positions;if(q.__isDragging){var u=r-q.__lastTouchLeft,v=s-q.__lastTouchTop,w=q.__scrollLeft,x=q.__scrollTop,y=q.__zoomLevel;if(p!=null&&q.options.zooming){var z=y;y=y/q.__lastScale*p;y=Math.max(Math.min(y,q.options.maxZoom),q.options.minZoom);if(z!==y){var aa=r-q.__clientLeft,ba=s-q.__clientTop;w=((aa+w)*y/z)-aa;x=((ba+x)*y/z)-ba;q.__computeScrollMax(y);}}if(q.__enableScrollX){w-=u*this.options.speedMultiplier;var ca=q.__maxScrollLeft;if(w>ca||w<0)if(q.options.bouncing){w+=(u/2*this.options.speedMultiplier);}else if(w>ca){w=ca;}else w=0;}if(q.__enableScrollY){x-=v*this.options.speedMultiplier;var da=q.__maxScrollTop;if(x>da||x<0)if(q.options.bouncing){x+=(v/2*this.options.speedMultiplier);if(!q.__enableScrollX&&q.__refreshHeight!=null)if(!q.__refreshActive&&x<=-q.__refreshHeight){q.__refreshActive=true;if(q.__refreshActivate)q.__refreshActivate();}else if(q.__refreshActive&&x>-q.__refreshHeight){q.__refreshActive=false;if(q.__refreshDeactivate)q.__refreshDeactivate();}}else if(x>da){x=da;}else x=0;}if(t.length>60)t.splice(0,30);t.push(w,x,o);q.__publish(w,x,y);}else{var ea=q.options.locking?3:0,fa=5,ga=Math.abs(r-q.__initialTouchLeft),ha=Math.abs(s-q.__initialTouchTop);q.__enableScrollX=q.options.scrollingX&&ga>=ea;q.__enableScrollY=q.options.scrollingY&&ha>=ea;t.push(q.__scrollLeft,q.__scrollTop,o);q.__isDragging=(q.__enableScrollX||q.__enableScrollY)&&(ga>=fa||ha>=fa);if(q.__isDragging)q.__interruptedAnimation=false;}q.__lastTouchLeft=r;q.__lastTouchTop=s;q.__lastTouchMove=o;q.__lastScale=p;},doTouchEnd:function(n){if(n instanceof Date)n=n.valueOf();if(typeof n!=="number")throw new Error("Invalid timestamp value: "+n);var o=this;if(!o.__isTracking)return;o.__isTracking=false;if(o.__isDragging){o.__isDragging=false;if(o.__isSingleTouch&&o.options.animating&&(n-o.__lastTouchMove)<=100){var p=o.__positions,q=p.length-1,r=q;for(var s=q;s>0&&p[s]>(o.__lastTouchMove-100);s-=3)r=s;if(r!==q){var t=p[q]-p[r],u=o.__scrollLeft-p[r-2],v=o.__scrollTop-p[r-1];o.__decelerationVelocityX=u/t*(1000/60);o.__decelerationVelocityY=v/t*(1000/60);var w=o.options.paging||o.options.snapping?4:1;if(Math.abs(o.__decelerationVelocityX)>w||Math.abs(o.__decelerationVelocityY)>w)if(!o.__refreshActive)o.__startDeceleration(n);}else o.options.scrollingComplete();}else if((n-o.__lastTouchMove)>100)o.options.scrollingComplete();}if(!o.__isDecelerating)if(o.__refreshActive&&o.__refreshStart){o.__publish(o.__scrollLeft,-o.__refreshHeight,o.__zoomLevel,true);if(o.__refreshStart)o.__refreshStart();}else{if(o.__interruptedAnimation||o.__isDragging)o.options.scrollingComplete();o.scrollTo(o.__scrollLeft,o.__scrollTop,true,o.__zoomLevel);if(o.__refreshActive){o.__refreshActive=false;if(o.__refreshDeactivate)o.__refreshDeactivate();}}o.__positions.length=0;},__publish:function(n,o,p,q){var r=this,s=r.__isAnimating;if(s){g.stop(s);r.__isAnimating=false;}if(q&&r.options.animating){r.__scheduledLeft=n;r.__scheduledTop=o;r.__scheduledZoom=p;var t=r.__scrollLeft,u=r.__scrollTop,v=r.__zoomLevel,w=n-t,x=o-u,y=p-v,z=function(ca,da,ea){if(ea){r.__scrollLeft=t+(w*ca);r.__scrollTop=u+(x*ca);r.__zoomLevel=v+(y*ca);if(r.__callback)r.__callback(r.__scrollLeft,r.__scrollTop,r.__zoomLevel);}},aa=function(ca){return r.__isAnimating===ca;},ba=function(ca,da,ea){if(da===r.__isAnimating)r.__isAnimating=false;if(r.__didDecelerationComplete||ea)r.options.scrollingComplete();if(r.options.zooming){r.__computeScrollMax();if(r.__zoomComplete){r.__zoomComplete();r.__zoomComplete=null;}}};r.__isAnimating=g.start(z,aa,ba,r.options.animationDuration,s?j:k);}else{r.__scheduledLeft=r.__scrollLeft=n;r.__scheduledTop=r.__scrollTop=o;r.__scheduledZoom=r.__zoomLevel=p;if(r.__callback)r.__callback(n,o,p);if(r.options.zooming){r.__computeScrollMax();if(r.__zoomComplete){r.__zoomComplete();r.__zoomComplete=null;}}}},__computeScrollMax:function(n){var o=this;if(n==null)n=o.__zoomLevel;o.__maxScrollLeft=Math.max((o.__contentWidth*n)-o.__clientWidth,0);o.__maxScrollTop=Math.max((o.__contentHeight*n)-o.__clientHeight,0);},__startDeceleration:function(n){var o=this;if(o.options.paging){var p=Math.max(Math.min(o.__scrollLeft,o.__maxScrollLeft),0),q=Math.max(Math.min(o.__scrollTop,o.__maxScrollTop),0),r=o.__clientWidth,s=o.__clientHeight;o.__minDecelerationScrollLeft=Math.floor(p/r)*r;o.__minDecelerationScrollTop=Math.floor(q/s)*s;o.__maxDecelerationScrollLeft=Math.ceil(p/r)*r;o.__maxDecelerationScrollTop=Math.ceil(q/s)*s;}else{o.__minDecelerationScrollLeft=0;o.__minDecelerationScrollTop=0;o.__maxDecelerationScrollLeft=o.__maxScrollLeft;o.__maxDecelerationScrollTop=o.__maxScrollTop;}var t=function(x,y,z){o.__stepThroughDeceleration(z);},u=o.options.snapping?4:.1,v=function(){var x=Math.abs(o.__decelerationVelocityX)>=u||Math.abs(o.__decelerationVelocityY)>=u;if(!x)o.__didDecelerationComplete=true;return x;},w=function(x,y,z){o.__isDecelerating=false;if(o.__didDecelerationComplete)o.options.scrollingComplete();o.scrollTo(o.__scrollLeft,o.__scrollTop,o.options.snapping);};o.__isDecelerating=g.start(t,v,w);},__stepThroughDeceleration:function(n){var o=this,p=o.__scrollLeft+o.__decelerationVelocityX,q=o.__scrollTop+o.__decelerationVelocityY;if(!o.options.bouncing){var r=Math.max(Math.min(o.__maxDecelerationScrollLeft,p),o.__minDecelerationScrollLeft);if(r!==p){p=r;o.__decelerationVelocityX=0;}var s=Math.max(Math.min(o.__maxDecelerationScrollTop,q),o.__minDecelerationScrollTop);if(s!==q){q=s;o.__decelerationVelocityY=0;}}if(n){o.__publish(p,q,o.__zoomLevel);}else{o.__scrollLeft=p;o.__scrollTop=q;}if(!o.options.paging){var t=.95;o.__decelerationVelocityX*=t;o.__decelerationVelocityY*=t;}if(o.options.bouncing){var u=0,v=0,w=o.options.penetrationDeceleration,x=o.options.penetrationAcceleration;if(p<o.__minDecelerationScrollLeft){u=o.__minDecelerationScrollLeft-p;}else if(p>o.__maxDecelerationScrollLeft)u=o.__maxDecelerationScrollLeft-p;if(q<o.__minDecelerationScrollTop){v=o.__minDecelerationScrollTop-q;}else if(q>o.__maxDecelerationScrollTop)v=o.__maxDecelerationScrollTop-q;if(u!==0)if(u*o.__decelerationVelocityX<=0){o.__decelerationVelocityX+=u*w;}else o.__decelerationVelocityX=u*x;if(v!==0)if(v*o.__decelerationVelocityY<=0){o.__decelerationVelocityY+=v*w;}else o.__decelerationVelocityY=v*x;}}};for(var m in l)h.prototype[m]=l[m];})();e.exports=h;});
__d("MMultiPhotoUploaderSimpleScroller",["React","cx","AnimatableContainer","TouchableArea","ZyngaScroller"],function(a,b,c,d,e,f,g,h,i,j,k){var l={bottom:0,left:0,position:'absolute',right:0,top:0},m=g.createClass({displayName:'MMultiPhotoUploaderSimpleScroller',getInitialState:function(){return {left:0,top:0};},componentWillMount:function(){this.scroller=new k(this.handleScroll,this.props.options);this.configured=false;this.shouldScrollToEnd=false;},componentDidMount:function(){this.configure();},componentDidUpdate:function(){this.configure();},configure:function(){if(this.configured)return;this.configured=true;this.resizeScroller();},resizeScroller:function(){var n=this.refs.content.getDOMNode();this.scroller.setDimensions(this.getDOMNode().clientWidth,this.getDOMNode().clientHeight,n.clientWidth,n.clientHeight);},checkShouldScrollToEnd:function(){var n=this.scroller.getValues().left,o=this.getDOMNode().clientWidth,p=this.refs.content.getDOMNode().clientWidth;this.shouldScrollToEnd=n+o>=p-this.props.thumbnailSize;},scrollHorizontallyToEnd:function(){var n=this.refs.content.getDOMNode().clientWidth,o=this.getDOMNode().clientWidth;if(this.shouldScrollToEnd&&n>o){this.shouldScrollToEnd=false;var p=n-o;this.scroller.scrollTo(p,0,false);}},handleScroll:function(n,o){this.setState({left:n,top:o});},render:function(){return this.transferPropsTo(j({scroller:this.scroller,style:{overflow:'hidden'}},i({translate:{x:-1*this.state.left,y:-1*this.state.top},style:l},g.DOM.div({ref:"content",className:"_4yl8"},this.props.children))));}});e.exports=m;});
__d("MMultiPhotoUploaderAttachment.react",["MMultiPhotoUploaderAttachmentState","MProgressBar.react","React","cx"],function(a,b,c,d,e,f,g,h,i,j){var k=2,l=.7,m=500,n=i.createClass({displayName:'Attachment',getInitialState:function(){return {previewLoaded:false};},componentDidMount:function(){if(this.props.state===g.UPLOADED&&!this.state.previewLoaded)this.loadPreview();},componentDidUpdate:function(o,p){if(this.props.useProgressBar&&this.refs.progressBar)if(this.props.state===g.SENDING&&this.props.loaded&&this.props.totalSize)if(this.props.loaded===this.props.totalSize){this.refs.progressBar.animate(100,this.props.progressBarLongAnimationDelay);}else{var q=100*l*this.props.loaded/this.props.totalSize;this.refs.progressBar.animate(q,m);}if(o.state!==g.UPLOADED&&this.props.state===g.UPLOADED)this.loadPreview();if(!p.previewLoaded&&this.state.previewLoaded&&this.props.onPreviewLoaded)this.props.onPreviewLoaded();},getLoadingIndicator:function(){if(this.props.useProgressBar&&this.props.loaded>0){if(!this.state.previewLoaded){return this.getProgressBar();}else return this.getSpinner();}else return this.getSpinner();},getProgressBar:function(){if(this.props.state!==g.SENDING&&this.props.state!==g.UPLOADED)return null;if(this.state.previewLoaded)return null;return (i.DOM.div({className:"_r6h"},h({initialValue:0,ref:"progressBar"})));},getSpinner:function(){if(this.props.state!==g.SENDING&&!this.props.isPollingTagSuggestions)return null;return (i.DOM.div({className:((this.props.isPollingTagSuggestions?"_2d1s":''))},i.DOM.div({className:"_5r-2 _2so _50cg _2sq _2ss _55on"})));},loadPreview:function(){if(this.props.useProgressBar&&this.refs.progressBar)this.refs.progressBar.animate(100,this.props.progressBarLongAnimationDelay);var o=new Image();o.onload=function(){if(this.props.useProgressBar&&this.refs.progressBar){this.refs.progressBar.animate(100,this.props.progressBarShortAnimationDelay);setTimeout(function(){this.setState({previewLoaded:true});}.bind(this),this.props.progressBarShortAnimationDelay);}else this.setState({previewLoaded:true});}.bind(this);o.src=this.props.imageURI;},getPreview:function(o,p){if(this.props.state!==g.UPLOADED)return null;if(!this.state.previewLoaded)return null;return (i.DOM.img({className:"_5r-3",src:this.props.imageURI,width:o,height:p}));},getError:function(){if(this.props.state!==g.ERROR)return null;return i.DOM.div({className:"_5r-4"});},getAbortButton:function(){var o=this.props.shouldShowWhiteDesign?"_3lx9":"_5r-6",p=this.props.shouldShowWhiteDesign?"_3lxa":"_5r-5";return (i.DOM.div({className:p,'data-sigil':"touchable",onClick:this.props.onRemoveClick},i.DOM.div({className:o})));},getTagCountIndicator:function(){if(this.props.state!==g.UPLOADED)return null;if(!this.state.previewLoaded)return null;var o=this.props.tagCount;if(!o)return null;var p=(("_5pt")+(o===1?' '+"_5pu":'')+(o===2?' '+"_5pv":'')+(o>2?' '+"_5pw":''));return (i.DOM.div({className:p}));},getPhotoBorder:function(){var o=null;if(this.props.shouldShowWhiteDesign)o=i.DOM.div({className:"_23rn"});return o;},render:function(){var o;if(this.props.shouldShowWhiteDesign){o="_s50";}else if(this.props.shouldShowLargeThumbnails){o="_3vnj";}else o="_51s2";var p=this.props.previewSize-k,q=p;if(this.props.state===g.UPLOADED&&this.state.previewLoaded&&this.props.shouldShowLargeThumbnails)q=Math.floor(this.props.thumbnail_width*p/this.props.thumbnail_height);var r={width:q};return (i.DOM.div({className:o,style:r},i.DOM.div({onClick:this.props.onThumbnailClicked,'data-sigil':"touchable"},this.getLoadingIndicator(),this.getPreview(q,p),this.getError(),this.getTagCountIndicator(),this.getPhotoBorder()),this.getAbortButton()));}});e.exports=n;});
__d("MMultiPhotoUploaderPlusAttachment.react",["cx","React","fbt","MXUILayout.react","MXUILayoutFillColumn.react"],function(a,b,c,d,e,f,g,h,i,j,k){var l=h.createClass({displayName:'PlusAttachment',getAttachmentChildContainer:function(){if(!this.props.shouldShowWhiteDesign)return null;var m=this.props.shouldShowAddPhotoLabel?(h.DOM.div({className:"_vbw"},"photo")):null;return (j(null,k({alignself:"center",className:"_2-24"},h.DOM.div({className:"_vbx"},h.DOM.div({className:"_vby"}),m))));},getAttachmentClass:function(){var m,n=this.props.largeThumbnails;if(this.props.shouldShowWhiteDesign){m="_vbz";}else m=((n?"_3vnj":'')+(!n?' '+"_51s2":'')+(n?' '+"_14y0":'')+(!n?' '+"_5e0r":''));return m;},render:function(){var m=this.getAttachmentClass(),n=this.getAttachmentChildContainer();return (h.DOM.div({'data-sigil':"touchable",className:m,onClick:this.props.onClick},n));}});e.exports=l;});
__d("MMultiPhotoUploaderHiddenInputs.react",["React"],function(a,b,c,d,e,f,g){var h=g.createClass({displayName:'HiddenInputs',render:function(){return (g.DOM.div(null,this.props.fbids.map(function(i){return (g.DOM.input({key:i,type:"hidden",name:'photo_ids['+i+']',value:i}));})));}});e.exports=h;});
__d("MMultiPhotoUploader.react",["copyProperties","cx","fbt","MPhotoUploadRequest","PhotosUploadWaterfallXMixin","PUWSteps","React","Stratcom","Vector","MMultiPhotoUploaderSimpleScroller","MMultiPhotoUploaderAttachment.react","MMultiPhotoUploaderAttachmentState","MMultiPhotoUploaderPlusAttachment.react","MMultiPhotoUploaderHiddenInputs.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=m.PropTypes,v=0,w=80,x=56,y=m.createClass({displayName:'MMultiPhotoUploader',propTypes:{fileInput:u.object,formHiddenInputs:u.object,uploadDomain:u.object,dtsg:u.string,shouldResize:u.bool,singlePhoto:u.bool,maxPhotosAllowed:u.number,waterfallID:u.string,waterfallAppName:u.string,waterfallSource:u.string,initCollapsed:u.bool,logFlowBeginOnClick:u.bool,targetID:u.number,actorID:u.number,shouldScroll:u.bool,shouldShowLargeThumbnails:u.bool,shouldShowWhiteDesign:u.bool,shouldShowAddPhotoLabel:u.bool,onUploadSuccess:u.func,onRemove:u.func,showDropShadow:u.bool,onThumbnailClicked:u.func},mixins:[k],setCollapsed:function(z){this.setState({collapsed:z});},isCollapsed:function(){return this.state.collapsed;},getAttachmentCount:function(){return this.attachments.length;},hasAttachments:function(){return this.attachments.length>0;},clearAttachments:function(){this.setAttachments(this.attachments.filter(function(z){if(z.state===r.SENDING)z.request.abort();return false;}));},getInitialState:function(){this.attachments=[];return {attachments:this.attachments,collapsed:this.props.initCollapsed};},numAttachmentsWithState:function(z){return this.attachments.filter(function(aa){return aa.state===z;}).length;},_numPollingAttachments:function(){return this.attachments.filter(function(z){return z.isPollingTagSuggestions;}).length;},isMaxAttachmentReached:function(){return this.attachments.length>=this.props.maxPhotosAllowed;},setAttachments:function(z){this.attachments=z;this.setState({attachments:z});var aa=this.props.fileInput.getDOMNode();aa.disabled=this.isMaxAttachmentReached();n.invoke('multi-photos-change',null,{input_id:aa.id});var ba={input_id:aa.id};for(var ca in r){if(!r.hasOwnProperty(ca)||typeof r[ca]!=='string')continue;var da=r[ca];ba[da]=this.numAttachmentsWithState(da);}ba.polling=this._numPollingAttachments();n.invoke('MMultiPhotoUploader:attachments:change',null,ba);},addAttachment:function(z){this.setAttachments(this.attachments.concat([z]));},removeAttachment:function(z){this.setAttachments(this.attachments.filter(function(aa){if(aa.id===z){if(aa.state===r.SENDING){var ba=0;if(aa.totalSize)ba=Math.floor(100*(aa.loaded/aa.totalSize));aa.request.abort(ba);}else this.logStep(l.CLIENT_UPLOAD_REMOVE,{fbid:aa.fbid});if(aa.fbid)this.props.onRemove&&this.props.onRemove(aa.fbid);return false;}return true;}.bind(this)));},updateAttachment:function(z){this.setAttachments(this.attachments.map(function(aa){if(aa.id===z.id)return z;return aa;}));},getAttachment:function(z){return this.attachments.filter(function(aa){return aa.id===z;})[0];},setAttachmentProps:function(z,aa){var ba=this.getAttachment(z),ca={};for(var da in ba)ca[da]=ba[da];for(da in aa)ca[da]=aa[da];this.updateAttachment(ca);},retryAttachment:function(z){var aa=this.getAttachment(z);this.logStep(l.CLIENT_ATTEMPT_RETRY,{fbid:aa.fbid});aa.request.retry();this.updateAttachment({id:z,state:'sending',request:aa.request});},setAttachmentTagCounts:function(z){this.setAttachments(this.attachments.map(function(aa){aa.tagCount=z[aa.id];return aa;}));},componentDidMount:function(){this.props.fileInput.setChangeHandler(this.onFileInputChange);this.props.fileInput.setClickHandler(this.onFileInputClick);if(!this.hasAttachments()&&!this.props.logFlowBeginOnClick)this.logStep(l.CLIENT_FLOW_BEGIN);},onFileInputClick:function(event){if(!this.hasAttachments()&&this.props.logFlowBeginOnClick)this.logStep(l.CLIENT_FLOW_BEGIN);this.logStep(l.CLIENT_SELECT_BEGIN);},onFileInputChange:function(event){var z=this.props.fileInput,aa=z.getDOMNode().files;if(aa.length===0){this.logStep(l.CLIENT_SELECT_FAIL);return;}var ba=z.cloneDOMNode();for(var ca=0;ca<aa.length;ca++){var da=aa[ca];if(da.name===''&&da.fileName===''&&da.size===0&&da.fileSize===0){this.logStep(l.CLIENT_SELECT_FAIL);continue;}this.logStep(l.CLIENT_SELECT_SUCCESS);var ea=v++,fa=this.props.shouldShowLargeThumbnails?w:x,ga=new j().setClonedFileInput(ba).setAttachedFile(da).setUploadDomain(this.props.uploadDomain).setThumbnailDimensions(new o(fa,fa)).setShouldResize(this.props.shouldResize).setDTSG(this.props.dtsg).setWaterfall(this.props.waterfallID,this.props.waterfallAppName,this.props.waterfallSource).setHandler(this.handleUploadSuccess.bind(this,ea)).setErrorHandler(this.handleUploadError.bind(this,ea)).setProgressHandler(this.handleUploadProgress.bind(this,ea)).setTargetID(this.props.targetID).setActorID(this.props.actorID).send();if(this.props.singlePhoto)this.clearAttachments();this.addAttachment({id:ea,state:'sending',request:ga});this.setCollapsed(false);}},handleUploadError:function(z){var aa=this.getAttachment(z);this.updateAttachment({id:z,state:'error',request:aa.request});},handleUploadProgress:function(z,aa){var ba=this.getAttachment(z);this.updateAttachment({id:z,state:ba.state,request:ba.request,loaded:aa.loaded,totalSize:aa.totalSize});},handleUploadSuccess:function(z,aa){if(!aa.fbid){this.handleUploadError(z);return;}var ba=this.getAttachment(z);this.updateAttachment({id:z,state:'uploaded',fbid:aa.fbid,imageURI:aa.thumbnail_uri,thumbnail_width:aa.thumbnail_width,thumbnail_height:aa.thumbnail_height,loaded:ba.loaded,totalSize:ba.totalSize,previewURI:aa.preview_uri});this.props.onUploadSuccess&&this.props.onUploadSuccess(aa.fbid,z);},onPlusClick:function(event){this.props.fileInput.click(event);},onRemoveClick:function(z){var aa=this.getAttachment(z),ba=false;if(aa.state===r.SENDING||aa.state===r.ERROR)ba=confirm("This photo didn't upload. Do you want to try again?");if(ba){this.retryAttachment(z);}else this.removeAttachment(z);},componentWillUpdate:function(){if(this.props.shouldScroll&&this.refs&&this.refs.scroller)this.refs.scroller.checkShouldScrollToEnd();},componentDidUpdate:function(){var z=this.state.attachments.filter(function(aa){return aa.state===r.UPLOADED;}).map(function(aa){return aa.fbid;});m.renderComponent(t({fbids:z}),this.props.formHiddenInputs);if(this.props.shouldScroll&&this.refs&&this.refs.scroller){this.refs.scroller.resizeScroller();this.refs.scroller.scrollHorizontallyToEnd();}},getPlusAttachment:function(){if(this.props.singlePhoto&&this.state.collapsed)return null;if(this.isMaxAttachmentReached())return null;return (s({onClick:this.onPlusClick,largeThumbnails:this.props.shouldShowLargeThumbnails,shouldShowWhiteDesign:this.props.shouldShowWhiteDesign,shouldShowAddPhotoLabel:this.props.shouldShowAddPhotoLabel}));},adjustScroller:function(){if(this.props.shouldScroll&&this.refs&&this.refs.scroller){this.refs.scroller.checkShouldScrollToEnd();this.refs.scroller.resizeScroller();this.refs.scroller.scrollHorizontallyToEnd();}},render:function(){if(this.state.collapsed)return m.DOM.div(null);var z=this.state.attachments.map(function(ba){return q(g({},ba,{key:ba.id,shouldShowLargeThumbnails:this.props.shouldShowLargeThumbnails,previewSize:this.props.shouldShowLargeThumbnails?w:x,shouldShowWhiteDesign:this.props.shouldShowWhiteDesign,onRemoveClick:function(){this.onRemoveClick(ba.id);}.bind(this),onPreviewLoaded:function(){this.adjustScroller();}.bind(this),useProgressBar:this.props.useProgressBar,progressBarLongAnimationDelay:this.props.progressBarLongAnimationDelay,progressBarShortAnimationDelay:this.props.progressBarShortAnimationDelay,loaded:ba.loaded,totalSize:ba.totalSize,onThumbnailClicked:function(){this.props.onThumbnailClicked&&this.props.onThumbnailClicked(ba);}.bind(this)}));}.bind(this));if(this.props.shouldScroll){var aa=((!this.props.shouldShowLargeThumbnails?"_1upb":'')+(' '+"_xy")+(this.props.showDropShadow?' '+"_bgx":''));return (p({options:{scrollingY:false},className:aa,thumbnailSize:w,ref:"scroller"},z,this.getPlusAttachment()));}return (m.DOM.div({className:"_5cqb"},z,this.getPlusAttachment()));},getWaterfallID:function(){return this.props.waterfallID;},getWaterfallAppName:function(){return this.props.waterfallAppName;},getWaterfallSource:function(){return this.props.waterfallSource;}});e.exports=y;});
__d("MPhotoUploadFileInput",["DOM","MTouchClick"],function(a,b,c,d,e,f,g,h){function i(j){"use strict";this.$MPhotoUploadFileInput0=j;}i.prototype.setChangeHandler=function(j){"use strict";if(this.$MPhotoUploadFileInput1)this.$MPhotoUploadFileInput2.remove();this.$MPhotoUploadFileInput1=j;this.$MPhotoUploadFileInput2=g.listen(this.$MPhotoUploadFileInput0,'change',null,j);};i.prototype.setClickHandler=function(j){"use strict";if(this.$MPhotoUploadFileInput3)this.$MPhotoUploadFileInput4.remove();this.$MPhotoUploadFileInput3=j;this.$MPhotoUploadFileInput4=g.listen(this.$MPhotoUploadFileInput0,'click',null,j);};i.prototype.getDOMNode=function(){"use strict";return this.$MPhotoUploadFileInput0;};i.prototype.cloneDOMNode=function(){"use strict";var j=this.$MPhotoUploadFileInput0;this.$MPhotoUploadFileInput0=j.cloneNode(true);this.$MPhotoUploadFileInput0.value='';g.replace(j,this.$MPhotoUploadFileInput0);if(this.$MPhotoUploadFileInput1){this.$MPhotoUploadFileInput2.remove();this.$MPhotoUploadFileInput2=g.listen(this.$MPhotoUploadFileInput0,'change',null,this.$MPhotoUploadFileInput1);}if(this.$MPhotoUploadFileInput3){this.$MPhotoUploadFileInput4.remove();this.$MPhotoUploadFileInput4=g.listen(this.$MPhotoUploadFileInput0,'click',null,this.$MPhotoUploadFileInput3);}return j;};i.prototype.click=function(j){"use strict";h.click(this.$MPhotoUploadFileInput0,{getRawEvent:function(){return j.nativeEvent;}});};e.exports=i;});
__d("MMultiPhotoUploaderInitReact",["$","MMultiPhotoUploaderAttachmentState","DOM","React","Stratcom","StratcomManager","MMultiPhotoUploader.react","MPhotoUploadFileInput","URI","PUWSteps","supportsXHR2"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(s){"use strict";var t=document.createElement('div');i.insertBefore(g(s.previewGridId),t);var u=document.createElement('div');i.appendContent(g(s.targetFormId),u);var v=(m({fileInput:new n(g(s.inputId)),formHiddenInputs:u,uploadDomain:new o(s.uploadDomain),dtsg:s.dtsg,shouldResize:s.shouldResize,singlePhoto:+s.maxPhotosAllowed===1,maxPhotosAllowed:s.maxPhotosAllowed,waterfallID:s.waterfallID,waterfallAppName:s.waterfallAppName,waterfallSource:s.waterfallSource,initCollapsed:s.initCollapsed,logFlowBeginOnClick:s.logFlowBeginOnClick,targetID:s.targetID,actorID:s.actorID,shouldScroll:s.horizontalScrolling,shouldShowLargeThumbnails:s.largeThumbnails,shouldShowWhiteDesign:s.useWhiteDesign,shouldShowAddPhotoLabel:s.showPhotoLabel,useProgressBar:s.useProgressBar&&q(),progressBarLongAnimationDelay:s.progressBarLongAnimationDelay,progressBarShortAnimationDelay:s.progressBarShortAnimationDelay,showDropShadow:s.composerDropShadow}));this.$MMultiPhotoUploaderInitReact0=j.renderComponent(v,t);l.enableDispatch(window,'reset');k.listen('reset',['id:'+s.targetFormId],function(){this.resetState();}.bind(this));k.listen('MStructuredComposer-canceled',null,function(){if(!this.$MMultiPhotoUploaderInitReact0.isCollapsed())this.$MMultiPhotoUploaderInitReact0.logStep(p.CLIENT_FLOW_CANCEL,{volume:this.$MMultiPhotoUploaderInitReact0.getAttachmentCount()});}.bind(this));}r.prototype.logClientPost=function(s){"use strict";this.$MMultiPhotoUploaderInitReact0.logStep(p.CLIENT_FLOW_POST,{volume:this.$MMultiPhotoUploaderInitReact0.getAttachmentCount()},s);};r.prototype.alterPreviewGrid=function(s){"use strict";return this.$MMultiPhotoUploaderInitReact0.setCollapsed(!s);};r.prototype.getUploader=function(){"use strict";return this.$MMultiPhotoUploaderInitReact0;};r.prototype.resetState=function(){"use strict";this.$MMultiPhotoUploaderInitReact0.clearAttachments();return this.alterPreviewGrid(false);};r.prototype.hasPhotos=function(){"use strict";return this.$MMultiPhotoUploaderInitReact0.numAttachmentsWithState(h.UPLOADED)>0;};r.prototype.getPhotosCount=function(){"use strict";return this.$MMultiPhotoUploaderInitReact0.numAttachmentsWithState(h.UPLOADED);};e.exports=r;});