/*!CK:793525889!*//*1398462965,178142551*/

if (self.CavalryLogger) { CavalryLogger.start_js(["FTscp"]); }

__d("MVideoChat",["MRequest","Stratcom","MURI"],function(a,b,c,d,e,f,g,h,i){var j=function(k){h.listen('video',null,function(event){var l=event.getData();if(l.message_type==1){var m=k.uri,n=new g(new i(m).setAsync(true).toString()),o={callId:l.parameters.callId,skypeId:l.parameters.skypeIdCallee,idTarget:l.from,data:'client_not_supported'};n.setData(o);n.send();}});};f.main=j;});
__d("MInitJewelCounts",["Stratcom"],function(a,b,c,d,e,f,g){var h=function(i){g.invoke('m:jewels:init-counts',null,i);};f.main=h;});
__d("MJewel",["setTimeoutAcrossTransitions","CSS","DOM","MHistory","MJSEnvironment","MLogState","MTabbable","MViewport","Popover","Stratcom","$","copyProperties","eventsMixinDeprecated"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=10;function u(v,w,x){"use strict";this._sigil=v;this._marauderModuleName=x;this.options=w||{};this._jewelNode=q(u.JEWEL_NAV_NODE_ID);this._softState='jewel='+(u.nextID++);this._duringInit=false;this._previousScrollingPoint=null;this._createPopover();p.listen('m:history:change',null,function(event){if(event.getData().soft===this._softState){this._popover.open();}else this._popover.close();}.bind(this));}u.prototype.isInitialized=function(){"use strict";var v=this.options.contentsSigil||'contents';return !!i.scry(this._jewelNode,'*',v)[0];};u.prototype._getJewelElement=function(){"use strict";return i.find(this._jewelNode,'div',this._sigil);};u.prototype._getCountElement=function(){"use strict";return i.find(this._getJewelElement(),'span','count');};u.prototype._getContentsElement=function(){"use strict";var v=this.options.contentsSigil||'contents';return i.find(this._getJewelElement(),'*',v);};u.prototype._getFlyoutElement=function(){"use strict";return i.find(this._getJewelElement(),'*','flyout');};u.prototype.getCount=function(){"use strict";return this._count;};u.prototype.setDuringInit=function(v){"use strict";this._duringInit=v;};u.prototype._updateCountElement=function(){"use strict";var v=this._getJewelCount();i.setContent(this._getCountElement(),''+v);var w=this._getJewelElement(),x=this._count>0;h.conditionClass(w,'noCount',!x);h.conditionClass(w,'hasCount',x);if(!this._duringInit&&this.options.mJewelMarauderLogger)this._logMarauderEvent('updated');};u.prototype.setCount=function(v){"use strict";if(v<0)return;this._count=v;this._updateCountElement();};u.prototype.handleViewedContent=function(){"use strict";if(this.getCount()>0&&this.isInitialized()){this.setCount(0);this.invoke('cleared');}else this.invoke('jewel_click');};u.prototype.setMenuContent=function(v){"use strict";i.setContent(this._getFlyoutElement(),v);if(this.isOpen())this.handleViewedContent();};u.prototype.prependMenuContent=function(v){"use strict";i.prependContent(this._getContentsElement(),v);};u.prototype.removeMenuContent=function(v){"use strict";var w=document.getElementById(v);if(w)i.remove(w);};u.prototype.updateMenuColor=function(v,w,x){"use strict";x?g(this._updateMenuColor.bind(this,v,w),u.MARK_READ_DELAY):this._updateMenuColor(v,w);};u.prototype._updateMenuColor=function(v,w){"use strict";var x=document.getElementById(v);if(x){h.conditionClass(x,u.M_AREA_LIGHTBLUE,!w);h.conditionClass(x,u.M_AREA_WHITE,w);}};u.prototype._createPopover=function(){"use strict";var v=this._getJewelElement(),w=i.find(v,'div','flyout');this._popover=new o({button:i.find(v,'*','icon'),flyout:w,ensureVisible:true,touchstart_callback:(this.options.mJewelMarauderLogger?this._onTouchStart.bind(this):null),touchmove_callback:(this.options.mJewelMarauderLogger?this._onTouchMove.bind(this):null),touchend_callback:(this.options.mJewelMarauderLogger?this._onTouchEnd.bind(this):null)});this._onOpenListener=this._popover.listen('open',this._onOpen.bind(this));this._onCloseListener=this._popover.listen('close',this._onClose.bind(this));this._popoverClickListener=i.listen(w,'click',null,this._onPopoverClick.bind(this));if(k.IS_ROSETTA)this._popoverTouchStartListener=i.listen(w,'touchstart',null,this._onPopoverTouchStart.bind(this));if(k.IS_ANDROID&&k.GET_OS_VERSION>=4)this._scrollAreaNode=i.scry(w,'div','scroll-area')[0];};u.prototype.clear=function(){"use strict";this._onOpenListener&&this._onOpenListener.remove();this._onCloseListener&&this._onCloseListener.remove();this._popoverClickListener&&this._popoverClickListener.remove();this._popoverTouchStartListener&&this._popoverTouchStartListener.remove();this._touchMoveListener&&this._touchMoveListener.remove();this._touchStartListener&&this._touchStartListener.remove();this._popover&&this._popover.clear();};u.prototype._onPopoverClick=function(event){"use strict";l.updateLink(event,this.options.pos);this.options.clickCallback&&this.options.clickCallback(event);if(this.options.mJewelMarauderLogger)this._logMarauderEvent('clicked',event);var v=event.getNode('popover-interactive');!v&&this._popover.close();};u.prototype._onPopoverTouchStart=function(event){"use strict";event.kill();};u.prototype._getJewelCount=function(){"use strict";if(this._count>0){return this._count;}else return this._unreadCount;};u.prototype._onOpen=function(){"use strict";if(this._scrollAreaNode){n.scrollToHeader();var v=document.documentElement;h.conditionClass(v,'hide-scroll',true);this._scrollAreaNode.style.maxHeight=v.offsetHeight-200+'px';}var w=this._getJewelCount();j.pushSoftState(this._softState);this.handleViewedContent();if(this.options.mJewelMarauderLogger)this.options.mJewelMarauderLogger.toggleModule(this._marauderModuleName,true,{jewel_count:w});p.invoke('m:jewel:flyout:open');h.conditionClass(this._getJewelElement(),'popoverOpen',true);var x=i.find(this._getJewelElement(),'div','flyout');m.focusTabbable(x);};u.prototype._onClose=function(){"use strict";if(this._scrollAreaNode){this._scrollAreaNode.style.minHeight='';h.conditionClass(document.documentElement,'hide-scroll',false);}p.invoke('m:jewel:flyout:close');h.conditionClass(this._getJewelElement(),'popoverOpen',false);if(this.options.mJewelMarauderLogger)this.options.mJewelMarauderLogger.toggleModule(this._marauderModuleName,false);j.popSoftState(this._softState);};u.prototype._onTouchStart=function(v){"use strict";this._previousScrollingPoint=v;};u.prototype._onTouchMove=function(v){"use strict";if(!this._previousScrollingPoint)return;var w=v.x-this._previousScrollingPoint.x,x=v.y-this._previousScrollingPoint.y,y=Math.sqrt(Math.abs(w)+Math.abs(x));if(y>=t){this._previousScrollingPoint=v;this._logMarauderEvent('scroll',{x:w,y:x});}};u.prototype._onTouchEnd=function(v){"use strict";this._previousScrollingPoint=null;};u.prototype._logMarauderEvent=function(v,w){"use strict";this.options.mJewelMarauderLogger.log(this._marauderModuleName,v,w);};u.prototype.isOpen=function(){"use strict";return this._popover&&this._popover.isOpen();};u.prototype.openPopover=function(){"use strict";this._popover&&!this._popover.isOpen()&&this._popover.open();};u.prototype.reregisterListeners=function(){"use strict";var v=this.isOpen();this.clear();this._createPopover();if(v)this._popover.open();};s(u,['cleared','jewel_click']);r(u,{M_AREA_WHITE:'acw',M_AREA_LIGHTBLUE:'aclb',MARK_READ_DELAY:3000,JEWEL_NAV_NODE_ID:'mJewelNav',nextID:0});r(u.prototype,{_sigil:null,_currentJewel:null,_count:0,_popover:null});e.exports=u;});
__d("MJewelSet",["DOM","HTML","AppRequestLogger","MDynaTemplate","MJewel","MLogState","MRequest","Stratcom","MTouchChannelManager","MURI","startsWith"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r={_viewerID:null,_requestsJewel:null,_messagesJewel:null,_notificationsJewel:null,_unseenNotificationIds:{},_jewelClickLogListener:null,_haveInitializedJewels:false,MSG_ID_PREFIX:'msg_',NOTIF_ID_PREFIX:'notif_',JEWEL_NAV_NODE_ID:'mJewelNav',JEWEL_NAV_CACHE_KEY:'mJewelNavKey',JEWEL_MSG_LIST:"mJewelMsgThreadContents",createJewels:function(s){r._requestsJewel=new k('requests',{pos:l.CLICK_POSITION_REQUESTS_FLYOUT,mJewelMarauderLogger:s},'friends_jewel_module');r._requestsJewel.listen('cleared',r._markRequestsRead);r._requestsJewel.listen('jewel_click',r._logRequestsJewelClick);r._messagesJewel=new k('messages',{contentsSigil:r.JEWEL_MSG_LIST,pos:l.CLICK_POSITION_MESSAGES_FLYOUT,mJewelMarauderLogger:s},'messages_jewel_module');r._messagesJewel.listen('cleared',r._markMessagesRead);r._messagesJewel.listen('jewel_click',r._logMessagesJewelClick);r._notificationsJewel=new k('notifications',{pos:l.CLICK_POSITION_NOTIFICATIONS_FLYOUT,clickCallback:r._notificationClick,mJewelMarauderLogger:s},'notifications_jewel_module');r._notificationsJewel.listen('cleared',r._markNotificationsSeen);r._jewelClickLogListener=r._notificationsJewel.listen('jewel_click',r._logNotificationJewelClick);},openMessageJewel:function(){r._messagesJewel.openPopover();},markFriendRequestsSeen:function(event){r._requestsJewel.setCount(0);},updateFriendRequests:function(event){if(r._requestsJewel.isOpen())return;var s=new m('/ajax/mobile/friends/jewel/requests_markup');s.send();},onAfterUpdateFriendRequests:function(s){r._setJewelCount(r._requestsJewel,s,r._markRequestsRead);},onAfterUpdateMessages:function(s){r._setJewelCount(r._messagesJewel,s,r._markMessagesRead);},onAfterUpdateNotifications:function(s,t){r._setJewelCount(r._notificationsJewel,s,r._markNotificationsSeen);n.invoke('notifications_unseen',null,t);},updateNotification:function(event){var s=event.getData();if(s&&s.data){if(!r._notificationsJewel.isOpen()&&!r._unseenNotificationIds[s.data.alert_id])r._notificationsJewel.setCount(s.data.unread+r._notificationsJewel.getCount());r._notificationsJewel.removeMenuContent(r._getNotifNodeID(s.data.alert_id));var t=r._createNotificationMarkup(s.data);r._notificationsJewel.prependMenuContent(t);r._unseenNotificationIds[s.data.alert_id]=true;if(r._notificationsJewel.isOpen())r._markNotificationsSeen();}},_createNotificationMarkup:function(s){s.id=r._getNotifNodeID(s.alert_id);if(s.type&&s.type=='app_request'){s.onclick=i?"require('AppRequestLogger').setLastApp("+s.app_id+")":null;s.target='_blank';}if(window.devicePixelRatio>1&&s.profile_pic_2x)s.profile_pic=s.profile_pic_2x;var t=j.renderToHtml('@MJewelRealTimeNotificationTemplate',s);return (new h(t)).getFragment().firstChild;},updateUnseenNotificationIds:function(event){var s=event.getData();if(!s)return;var t=event.getType()=='notifications_read';if(s.alert_ids){var u=0;for(var v=0;v<s.alert_ids.length;v++)if(r._unseenNotificationIds[s.alert_ids[v]]){delete r._unseenNotificationIds[s.alert_ids[v]];t&&r._notificationsJewel.updateMenuColor(r._getNotifNodeID(s.alert_ids[v]),true,false);u++;}var w=r._notificationsJewel.getCount();r._notificationsJewel.setCount(w-u);}else{r._notificationsJewel.setCount(0);if(t)for(var x in r._unseenNotificationIds)r._notificationsJewel.updateMenuColor(r._getNotifNodeID(x),true,false);r._unseenNotificationIds={};}},updateUnreadMessageCount:function(event){var s=event.getData();if(!r._messagesJewel.isOpen()&&s&&typeof(s.unseen)!='undefined')r._messagesJewel.setCount(s.unseen);},updateMessage:function(event){var s=event.getData();if(!s||s.folder!=='inbox')return;if(s.tid){if(r._messagesJewel.isInitialized()){r._messagesJewel.removeMenuContent(r._getMessageNodeID(s.tid));var t=r._createMessageMarkup(s);r._messagesJewel.prependMenuContent(t);if(r._viewerID==s.author_fbid)r._messagesJewel.updateMenuColor(r._getMessageNodeID(s.tid),true,false);if(r._messagesJewel.isOpen())r._markMessagesRead();}}else if(s.mark_as_read)for(var u in s.tids)r._messagesJewel.updateMenuColor(r._getMessageNodeID(s.tids[u]),s.event=='read',false);},initFriendRequests:function(event){r._requestsJewel.setMenuContent(event.getData());},initMessages:function(event){r._messagesJewel.setMenuContent(event.getData());},initNotifications:function(event){r._notificationsJewel.setMenuContent(event.getData());},initUnseenNotificationIds:function(event){r._unseenNotificationIds=event.getData()||{};if(r._notificationsJewel.isOpen())r._markNotificationsSeen();},_createMessageMarkup:function(s){s.id=r._getMessageNodeID(s.tid);if(window.devicePixelRatio>1&&s.thread_image_2x)s.thread_image=s.thread_image_2x;var t=j.renderToHtml('@MJewelNewMessageTemplate',s),u=new h(t).getRootNode();if(s.has_attachment){var v=g.scry(u,'*','attachment-icon');for(var w=0;w<v.length;w++)g.show(v[w]);}return u;},_getMessageNodeID:function(s){return r.MSG_ID_PREFIX+s;},_getNotifNodeID:function(s){return r.NOTIF_ID_PREFIX+s;},_markRequestsRead:function(){var s=new m(new p('/a/jewel_requests_read.php').setAsync(true).toString());s.send();},_markMessagesRead:function(){var s=new m(new p('/a/jewel_messages_read.php').setAsync(true).toString());s.send();},_markNotificationsSeen:function(){if(r._jewelClickLogListener){r._jewelClickLogListener.remove();r._jewelClickLogListener=null;}var s=r._unseenNotificationIds;r._unseenNotificationIds={};var t=[];for(var u in s)t.push(u);var v=new m(new p('/a/jewel_notifications_read.php').setAsync(true).toString());v.addData({ids:t,count:t.length,seen:true});v.send();},_logMessagesJewelClick:function(event){var s=r._messagesJewel._getContentsElement();if(r._messagesJewel.isOpen()&&n.hasSigil(s,'messages-flyout-loading'))new m('/ajax/mobile/jewels/messages_markup').send();},_logNotificationJewelClick:function(){if(r._jewelClickLogListener){r._jewelClickLogListener.remove();r._jewelClickLogListener=null;}var s=new m(new p('/a/jewel_notifications_log.php').setAsync(true).toString());s.addData({click_type:'jewel_click',count:r._notificationsJewel.getCount()});s.send();var t=r._notificationsJewel._getContentsElement();if(r._notificationsJewel.isOpen()&&n.hasSigil(t,'notifications-flyout-loading'))new m('/ajax/mobile/jewels/notifications_markup').send();},_logRequestsJewelClick:function(){var s=r._requestsJewel._getContentsElement(),t=g.scry(s,'div','attachment'),u=[];for(var v in t){var w=t[v].getAttribute('id');if(w&&q(w,'m_jewel_req_'))u=u.concat(w.replace('m_jewel_req_',''));}if(u.length){var x=new m('/friends/requests/log_impressions');x.setMethod('POST');x.addData({ids:u.join(','),ref:'m_jewel'});x.send();}if(r._requestsJewel.isOpen()&&n.hasSigil(s,'requests-flyout-loading'))new m('/ajax/mobile/friends/jewel/requests_markup').send();},_notificationClick:function(event){var s=event.getNode('marea');if(!s)return;var t=s.getAttribute('id');if(!t)return;r._notificationsJewel.updateMenuColor(t,true,false);var u=new m(new p('/a/jewel_notifications_log.php').setAsync(true).toString());u.addData({click_type:'jewel_notif_click',id:t.replace(r.NOTIF_ID_PREFIX,'')});u.send();},_initJewelCount:function(s,t,u){s.setDuringInit(true);s.reregisterListeners();r._setJewelCount(s,t,u);s.setDuringInit(false);},_setJewelCount:function(s,t,u){if(!s.isOpen()){s.setCount(t);}else if(t)u();},_initJewelCounts:function(event){var s=event.getData();r.initJewels(null);r._viewerID=s.viewer_id;r._unseenNotificationIds=s.unread_notification_ids||{};r._initJewelCount(r._requestsJewel,s.request_count,r._markRequestsRead);r._initJewelCount(r._messagesJewel,s.message_count,r._markMessagesRead);r._initJewelCount(r._notificationsJewel,s.notification_count,r._markNotificationsSeen);},initJewels:function(s,t){if(r._haveInitializedJewels)return;r._haveInitializedJewels=true;o.initialize();r.createJewels(s);if(!r._friendRequestAddListener)r._friendRequestAddListener=n.listen('jewel_requests_add',null,r.updateFriendRequests);if(!r._friendRequestRemoveListener)r._friendRequestRemoveListener=n.listen('jewel_requests_remove_old',null,r.updateFriendRequests);if(!r._friendRequestSeenListener)r._friendRequestSeenListener=n.listen('friend_requests_seen',null,r.markFriendRequestsSeen);if(!r._notificationListener)r._notificationListener=n.listen('m_notification',null,r.updateNotification);if(!r._messageListener)r._messageListener=n.listen('m_messaging',null,r.updateMessage);if(!r._messageCountListener)r._messageCountListener=n.listen('inbox',null,r.updateUnreadMessageCount);if(!r._notifReadListener)r._notifReadListener=n.listen('notifications_read',null,r.updateUnseenNotificationIds);if(!r._notifSeenListener)r._notifSeenListener=n.listen('notifications_seen',null,r.updateUnseenNotificationIds);if(!r._notifUnseenListener)r._notifUnseenListener=n.listen('notifications_unseen',null,r.initUnseenNotificationIds);if(!r._notifInitListener)r._notifInitListener=n.listen('notifications_init',null,r.initNotifications);if(!r._messageInitListener)r._messageInitListener=n.listen('messages_init',null,r.initMessages);if(!r._friendRequestInitListener)r._friendRequestInitListener=n.listen('requests_init',null,r.initFriendRequests);if(t)r.openMessageJewel();}};(function(){n.listen('m:jewels:init-counts',null,r._initJewelCounts);})();e.exports=r;});
__d("MInitJewels",["MJewelSet"],function(a,b,c,d,e,f,g){var h=function(i){g.initJewels(i.mJewelMarauderLogger,i.expandMessageJewel);};f.main=h;});
__d("MJewelFlyout",["Stratcom"],function(a,b,c,d,e,f,g){var h=function(j,k){g.invoke(j,null,k);},i=function(j){g.invoke('notifications_unseen',null,j);};f.init=h;f.initUnseenNotifs=i;});
__d("MReactBookmarkTitles",[],function(a,b,c,d,e,f){var g={app:'Apps',developer:'Developer',friend_list:'Friends',group:'Groups',suggested_game:'Suggested Games',interest_list:'Interests',page:'Pages',pinned:'Favorites'};e.exports=g;});
__d("MReactBookmarkHeader",["React","cx"],function(a,b,c,d,e,f,g,h){'use strict';var i=g.PropTypes,j=g.createClass({displayName:'MReactBookmarkHeader',propTypes:{header:i.string.isRequired},render:function(){return (g.DOM.h3({className:"_52x1"},g.DOM.span({className:"_52x2"},this.props.header)));}});e.exports=j;});
__d("MSideAreaUtils",["URI"],function(a,b,c,d,e,f,g){var h={getCurrentURI:function(){return new g(window.location);},isSamePage:function(i,j){if(i.getPath()!=j.getPath())return false;var k=i.getQueryData(),l=j.getQueryData();return k.sk===l.sk&&k.v===l.v;}};e.exports=h;});
__d("MReactBookmarkRow",["MPlaces","MSession","MSideAreaUtils","React","URI","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){'use strict';var n=j.PropTypes,o=20,p=j.createClass({displayName:'MReactBookmarkRow',propTypes:{bookmark:n.object.isRequired,onClickItem:n.func.isRequired},shouldComponentUpdate:function(q,r){var s=this.props.bookmark,t=q.bookmark;return s!==t||s.pic!==t.pic||s.name!==t.name||this.state.count!==r.count||s.url!==t.url||this.state.isSelected!==r.isSelected;},getInitialState:function(){return {count:this.props.bookmark.count.value,isSelected:this._isSelected(this.props.bookmark)};},componentWillReceiveProps:function(q){this.setState({count:q.bookmark.count.value,isSelected:this._isSelected(q.bookmark)});},_isSelected:function(q){return i.isSamePage(i.getCurrentURI(),new k(q.url));},render:function(){var q=this.props.bookmark,r=!q.pic?null:j.DOM.i({className:"_52x5 img",style:{backgroundImage:"url('"+q.pic+"')"}}),s=!q.pic&&q.hasOwnProperty('noBookmarkIconSpacing')&&q.noBookmarkIconSpacing,t=q.name.length>42,u=q.name.length<=42&&q.name.length>30,v=this.state.count>o?"20+":this.state.count;return (j.DOM.li({className:(("_53_-")+(this.state.isSelected?' '+"selected":''))},j.DOM.div({'data-sigil':"touchable",className:"_52x6 touchable"},j.DOM.a({href:q.gpsify?'#':q.url,className:(("_5lut")+(' '+"_5luu")),onClick:this._onClick},j.DOM.div({className:((!s?"_52x3":'')+(s?' '+"_5p-5":'')+(h.useAngora?' '+"_52x4":''))},r),j.DOM.div({className:(("_52x7")+(t?' '+"_5401":'')+(u?' '+"_5400":'')+(q.dir==='rtl'?' '+"_5w9v":'')+(q.dir==='ltr'?' '+"_5w9w":''))},q.name),j.DOM.div({className:(("_55fj")+(!this.state.count?' '+"hiddenElem":''))},v,j.DOM.span({className:"_55fk"},"new"))),this._renderSideButton())));},_renderSideButton:function(){var q=this.props.bookmark;if(!q.side_button_icon||!q.side_button_uri)return null;return (j.DOM.a({className:"_5lut _5rl-",href:q.side_button_uri,onClick:this.props.onClickItem},j.DOM.i({className:"_5rl_ img",style:{backgroundImage:"url('"+q.side_button_icon+"')"}})));},_onClick:function(){var q=this.props.bookmark;this.props.onClickItem();if(q.gpsify){g.monitorLocation();if(g.getCurrentJSONLocation()){g.gotoPageWithLocation(q.url);}else g.gotoPage(q.url);}}});e.exports=p;});
__d("MReactCreateGroup",["React","cx","fbt"],function(a,b,c,d,e,f,g,h,i){'use strict';var j=g.PropTypes,k=g.createClass({displayName:'MReactCreateGroup',propTypes:{uri:j.string.isRequired},render:function(){var l=JSON.stringify({dialogURI:this.props.uri});return (g.DOM.li({className:"_53_-"},g.DOM.a({rel:"dialog",href:"#",'data-sigil':"touchable dialog-link",'data-store':l,className:"touchable _52x6 _53__"},"Create New Group")));}});k.make=function(l,m){return m.id!=='group'?null:k({uri:l,key:"bookmark_createGroup"});};e.exports=k;});
__d("MReactCreatePage.react",["React","cx","fbt"],function(a,b,c,d,e,f,g,h,i){'use strict';var j=g.PropTypes,k=g.createClass({displayName:'MReactCreatePage',propTypes:{uri:j.string.isRequired},render:function(){return (g.DOM.li({className:"_53_-"},g.DOM.a({rel:"dialog",href:this.props.uri,className:"touchable _52x6 _53__"},"Create New Page")));}});k.make=function(l,m){return m.id!=='page'?null:k({uri:l,key:"bookmark_createPage"});};e.exports=k;});
__d("MReactSeeAllBookmarks",["React","MReactBookmarkTitles","cx","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){'use strict';var l=g.PropTypes,m=g.createClass({displayName:'MReactSeeAllBookmarks',propTypes:{createGroupURI:l.string.isRequired,group:l.object.isRequired,onClickSeeAll:l.func.isRequired},render:function(){var n=this.props.group;k(h[n.id]);return (g.DOM.a({name:n.name,href:"#",'data-sigil':"touchable",onClick:this._onClick,className:"touchable _52x6 _53__"},j._({"Apps":"See All Apps","Developer":"See All Developer","Friends":"See All Friends","Groups":"See All Groups","Suggested Games":"See All Suggested Games","Interests":"See All Interests","Pages":"See All Pages","Favorites":"See All Favorites"},[j['enum'](h[n.id],{Apps:"Apps",Developer:"Developer",Friends:"Friends",Groups:"Groups","Suggested Games":"Suggested Games",Interests:"Interests",Pages:"Pages",Favorites:"Favorites"})])));},_onClick:function(n){this.props.onClickSeeAll({createGroupURI:this.props.createGroupURI,group:this.props.group});}});e.exports=m;});
__d("MReactBookmarks",["MLoadingIndicator","MLogger","React","StaticContainer.react","MReactBookmarkHeader","MReactBookmarkRow","MReactCreateGroup","MReactCreatePage.react","MReactSeeAllBookmarks","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';var q=i.PropTypes;function r(t,u){return 'bookmark_'+t.id+'_'+u.id;}var s=i.createClass({displayName:'MReactBookmarks',propTypes:{bookmarkGroups:q.array.isRequired,createGroupURI:q.string.isRequired,createPageURI:q.string,loaderId:q.string,loaderMarkup:q.object,onClickItem:q.func.isRequired,onClickSeeAll:q.func.isRequired,secondaryData:q.object},_addBookmarkGroup:function(t,u){var v=null;if(this.props.createPageURI)v=n.make(this.props.createPageURI,u);if(v||(u.visible&&u.visible.length)){var w=u.visible||[],x=u.all||w;if(u.header)t.push(k({header:u.header,key:'group_'+u.id}));w.forEach(function(aa){t.push(l({bookmark:aa,key:r(u,aa),onClickItem:this.props.onClickItem}));},this);var y=this.props.createGroupURI;if(w.length<x.length)t.push(i.DOM.li({className:"_53_-",key:'seeAll_'+u.id},o({createGroupURI:y,group:u,onClickSeeAll:this.props.onClickSeeAll})));var z=m.make(y,u);if(z)t.push(z);if(v)t.push(v);}},_getBookmarkGroups:function(t){var u=[];for(var v=0,w=t.length;v<w;++v){var x=t[v];this._addBookmarkGroup(u,x);}return u;},_getSecondary:function(t){var u=t.group,v=m.make(this.props.createGroupURI,u),w=[v];Array.prototype.push.call(w,u.all.map(function(x){return (l({bookmark:x,key:r(u,x),onClickItem:this.props.onClickItem}));},this));return w;},render:function(){var t=this.props.bookmarkGroups,u=Object.prototype.toString.call(t).slice(8,-1);if(t&&u!=='Array')h.warn('[react-bookmarks] received unexpected payload: %s',JSON.stringify(t));var v=[];this._loaderMarkup=null;if(this.props.isSecondary){v=this._getSecondary(this.props.secondaryData);}else{v=this._getBookmarkGroups(t||[]);this._loaderMarkup=t&&!this.props.isPartial?null:j(null,i.DOM.div({className:"apl",dangerouslySetInnerHTML:this.props.loaderMarkup}));}return (i.DOM.div(null,i.DOM.ul({className:"_7k7"},v,this._loaderMarkup)));},componentDidMount:function(){if(this._loaderMarkup)g.init(this.props.loaderId);}});e.exports=s;});
__d("MReactSearchProxy",["React","cx"],function(a,b,c,d,e,f,g,h){'use strict';var i=g.PropTypes,j=g.createClass({displayName:'MReactSearchProxy',propTypes:{enableReactSearch:i.bool.isRequired,onClick:i.func,searchPlaceholder:i.string},render:function(){return (g.DOM.div({className:"_5fm- touchable",onClick:this._onClick},g.DOM.div({className:"mSideSearch",'data-sigil':'search-activator'},g.DOM.div({className:"_5whq mSearchProxy input"},this.props.searchPlaceholder))));},_onClick:function(k){if(this.props.enableReactSearch)this.props.onClick();}});e.exports=j;});
__d("MReactSecondarySideMenuHeader",["React","cx"],function(a,b,c,d,e,f,g,h){'use strict';var i=g.PropTypes,j=g.createClass({displayName:'MReactSecondarySideMenuHeader',propTypes:{backButtonImg:i.string,onClickBackButton:i.func.isRequired},render:function(){return (g.DOM.div({className:"_56do",'data-sigil':"marea"},g.DOM.div({className:"mSideHeaderButton"},g.DOM.a({className:"touchable",'data-sigil':"blocking-touchable",href:"#",onClick:this._onClick},g.DOM.i({className:"_56dp img",style:{backgroundImage:"url('"+this.props.backButtonImg+"')"}}))),g.DOM.div({className:"_56dq"},this.props.title)));},_onClick:function(k){this.props.onClickBackButton();}});e.exports=j;});
__d("MReactPartialSideMenu",["MReactBookmarks","MReactBookmarkHeader","MReactSearchProxy","MReactSecondarySideMenuHeader","MReactBookmarkTitles","React","Vector","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o=l.PropTypes,p=l.createClass({displayName:'MReactPartialSideMenu',propTypes:{bookmarkGroups:o.array.isRequired,createGroupURI:o.string.isRequired,createPageURI:o.string,enableReactSearch:o.bool.isRequired,footerMarkup:o.object,isPartial:o.bool.isRequired,isSecondary:o.bool.isRequired,loaderId:o.string,loaderMarkup:o.object,onClickBackButton:o.func.isRequired,onClickItem:o.func.isRequired,onClickSearchProxy:o.func,onClickSeeAll:o.func.isRequired,showSearchHeader:o.bool,secondaryData:o.object,searchPlaceholder:o.string},render:function(){var q=null;if(this.props.isSecondary){var r=this.props.secondaryData.group,s=n._({"Apps":"All Apps","Developer":"All Developer","Friends":"All Friends","Groups":"All Groups","Suggested Games":"All Suggested Games","Interests":"All Interests","Pages":"All Pages","Favorites":"All Favorites"},[n['enum'](k[r.id],{Apps:"Apps",Developer:"Developer",Friends:"Friends",Groups:"Groups","Suggested Games":"Suggested Games",Interests:"Interests",Pages:"Pages",Favorites:"Favorites"})]);q=j({backButtonImg:this.props.backButtonImg,title:s,onClickBackButton:this.props.onClickBackButton});}else if(this.props.showSearchHeader)q=i({enableReactSearch:this.props.enableReactSearch,onClick:this.props.onClickSearchProxy,searchPlaceholder:this.props.searchPlaceholder});var t=null,u=null;if(!this.props.isSecondary&&this.props.footerMarkup){var v="HELP & SETTINGS";t=h({header:v});u=l.DOM.div({'data-sigil':"react-side-area-footer",dangerouslySetInnerHTML:this.props.footerMarkup});}return (l.DOM.div({className:"mSideMenuPage"},q,l.DOM.div({className:"mSideMenu"},g({bookmarkGroups:this.props.bookmarkGroups,createGroupURI:this.props.createGroupURI,createPageURI:this.props.createPageURI,isPartial:this.props.isPartial,isSecondary:this.props.isSecondary,loaderId:this.props.loaderId,loaderMarkup:this.props.loaderMarkup,onClickItem:this.props.onClickItem,onClickSeeAll:this.props.onClickSeeAll,secondaryData:this.props.secondaryData}),t,u)));},getDisplayedHeight:function(){return m.getDim(this.getDOMNode()).y;}});e.exports=p;});
__d("MReactSearchResultsRow",["MDynaTemplate","React","Stratcom","cx"],function(a,b,c,d,e,f,g,h,i,j){'use strict';var k=h.createClass({displayName:'MReactSearchResultsRow',_renderProfileImg:function(){var l=this.props.data.photo;if(l){return (h.DOM.i({className:(("_5fn7")+(' '+"img")+(this.props.data.isTrending?' '+"_1m-q":'')),style:{backgroundImage:"url('"+l+"')"}}));}else return (h.DOM.i({className:(("_5fn7")+(' '+"img")+(l==null&&!this.props.data.isTrending?' '+"_1mnm":'')+(this.props.data.isTrending?' '+"_1m-q":''))}));},_renderVerified:function(){var l=this.props.data.verified;return (l&&l.__html)?h.DOM.span({dangerouslySetInnerHTML:l}):null;},_renderSubtext:function(){var l=this.props.data;if(!l.isRecentSearch)return null;var m=l.subtext;if(l.action=='add_friend')return (h.DOM.span({className:"_5fn8 mfss",dangerouslySetInnerHTML:m}));var n;if(!l.isTrending){n=l.type?l.type+' '+String.fromCharCode(183)+' ':'';m=m?n+m:l.type;}if(!m)return null;return (h.DOM.span({className:"_5fn8 mfss"},m));},_renderSecondaryAction:function(){var l=this.props.data,m;if(l.action=='phone'){m=this._renderPhoneAction();}else if(l.action=='add_friend'){m=this._renderAddAction();}else if(l.action=='message'){m=this._renderMessageAction();}else l.action;if(!m)return null;if(m.__html){return (h.DOM.div({className:"_5fn9",dangerouslySetInnerHTML:m}));}else return (h.DOM.div({className:"_5fn9"},m));},_renderPhoneAction:function(){var l=this.props.data;if(!l.paths||!(l.paths.mobile||l.paths.sms))return null;var m=g.renderToHtml('@CallButtonTemplate',{call_uri:l.paths.mobile,call_style:l.paths.mobile?'':'display:none;',sms_uri:l.paths.sms,sms_style:l.paths.sms?'':'display:none;'});return {__html:m};},_renderAddAction:function(){var l=this.props.data;if(!l.paths||!l.paths[l.action])return null;return l.paths[l.action];},_renderMessageAction:function(){var l=this.props.data;if(!l.paths||!l.paths.message)return null;return (h.DOM.a({className:"_5rwu",href:l.paths.message,onClick:this._onClick},h.DOM.i({className:"img"})));},render:function(){var l=this.props.data;if(l.type==='node')return (h.DOM.div({className:"_1mnn"},l.node));return (h.DOM.div({className:"_5fna",rel:l.id},h.DOM.a({className:(("_5fnb")+(' '+"touchable")+(l.action?' '+"hasSecondaryAction":'')),'data-sigil':"touchable",name:l.name,href:l.uri,onClick:this._onClick},this._renderProfileImg(),h.DOM.div({className:"_5fnd mfsl"},l.display||l.name,this._renderVerified()),this._renderSubtext()),this._renderSecondaryAction()));},_onClick:function(event){this.props.onClickItem&&this.props.onClickItem(event,this.props.data);i.invoke('m:search-typeahead:select-react',null,{node:this.props.data,position:this.props.position,query:this.props.query});}});e.exports=k;});
__d("MReactSearchResultsPresenter",["MReactSearchResultsRow","React","StaticContainer.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){'use strict';var l=30,m=h.createClass({displayName:'ResultRenderer',renderLoader:function(){return (h.DOM.div({className:"_5fnh",style:{display:!this.props.waiting||!this.props.query?'none':''}},h.DOM.span({dangerouslySetInnerHTML:this.props.loaderMarkup}),"Loading..."));},renderSeeMore:function(){return (h.DOM.a({className:"_5fni touchable",'data-sigil':"touchable",href:'/search/?query='+encodeURIComponent(this.props.query),onClick:this._onClickSeeMore,style:{display:!this.props.query?'none':''}},k._("See more results for {query}",[k.param("query",'"'+this.props.query+'"')])));},render:function(){var o=this.props.data.slice(0,l),p,q;o=o.reduce(function(r,s,t){var u=null;if(!p&&s.isTrending){u={type:'node',node:h.DOM.div(null,"Trending")};r.push(i({key:"header-trending"},g({data:u})));p=true;}if(!q&&s.isRecentSearch){u={type:'node',node:h.DOM.div(null,"Recent Searches")};r.push(i({key:"header-recent"},g({data:u})));q=true;}r.push(i({key:s.id},g({position:t,query:this.props.query,data:s,onClickItem:this._onClick})));return r;}.bind(this),[]);return (h.DOM.div({className:"_5fng",onTouchStart:this.props.onTouchStart},o,this.renderLoader(),this.renderSeeMore()));},_onClickSeeMore:function(event){this.props.onClickItem&&this.props.onClickItem(event,{});},_onClick:function(event,o){this.props.onClickItem&&this.props.onClickItem(event,o);}}),n={ViewRenderer:m};e.exports=n;});
__d("Parent",["CSSCore"],function(a,b,c,d,e,f,g){var h={byTag:function(i,j){j=j.toUpperCase();while(i&&i.nodeName!==j)i=i.parentNode;return i;},byClass:function(i,j){while(i&&!g.hasClass(i,j))i=i.parentNode;return i;},byAttribute:function(i,j){while(i&&(!i.getAttribute||!i.getAttribute(j)))i=i.parentNode;return i;}};e.exports=h;});
__d("MReactTypeaheadView",["React"],function(a,b,c,d,e,f,g){'use strict';var h=g.createClass({displayName:'MReactTypeaheadView',render:function(){var i=this.props.Renderer;return (i({data:this.props.data,query:this.props.query,waiting:this.props.waiting,loaderMarkup:this.props.loaderMarkup,onTouchStart:this.props.onTouchStart,onClickItem:this.props.onClickItem,simpleSearch:this.props.simpleSearch,excludedEntries:this.props.excludedEntries}));}});e.exports=h;});
__d("MRecentSearchesUpdater",["Stratcom"],function(a,b,c,d,e,f,g){var h='search-recent-queries';function i(j){"use strict";j.listen('change',this.changeQuery.bind(this));j.listen('select',this.addRecentSearchWithSelection.bind(this));j.listen('show',this.changeResults.bind(this));j.listen('query',this.addRecentSearchWithQuery.bind(this));j.listen('refreshRecent',this.refreshRecent.bind(this));}i.prototype.refreshRecent=function(){"use strict";g.invoke('refreshRecent',h,{});};i.prototype.changeQuery=function(j){"use strict";this.currentQuery=j;};i.prototype.changeResults=function(j){"use strict";if(j.show){this.results=j.show.slice();}else this.results=j.slice();};i.prototype.addRecentSearchWithQuery=function(){"use strict";g.invoke('addRecentQuery',h,{query:this.currentQuery});};i.prototype.addRecentSearchWithSelection=function(j){"use strict";var k=j&&(j.rel||j.getAttribute('rel'));if(!k){this.addRecentSearchWithQuery();return;}for(var l=0;l<this.results.length;l++)if(this.results[l].id===k)g.invoke('addRecentSearch',h,{result:this.results[l]});};e.exports=i;});
__d("MSearchTypeaheadLogger",["setTimeoutAcrossTransitions","Banzai","DataStore","DOM","MTouchClick","MRequest","SearchMTouchGlobalOptions","Stratcom","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p='mtouch_typeahead_logging';function q(r,s){"use strict";this.typeahead=r;this.uri=s;this.initialize();this.emptyQueryResults=[];r.listen('change',function(u){this.startSession(u);if(this.sessionInProgress())this.data.query=u;}.bind(this));r.listen('select',function(u){var v=u&&(u.rel||u.getAttribute('rel'));this.data.click_event=Date.now();if(v){this.data.selected_id=v;}else this.data.selected_search=1;if(this.results&&this.results.length&&this.data.query&&this.data.query.length)n.invoke('m:search-typeahead:select',null,{node:u,results:this.results.slice(),query:this.data.query.slice()});this.logToServer();}.bind(this));r.listen('show',function(u){this.startSession(this.typeahead.getValue());if(this.sessionInProgress())if(u.show){this.results=u.show.slice();if(!this.typeahead.getValue())this.emptyQueryResults=this.results;}else{this.data.candidate_results=u.slice();if(!this.typeahead.getValue())this.emptyQueryResults=this.data.candidate_results;}}.bind(this));r.listen('query',function(u){this.data.selected_search=1;this.logToServer();}.bind(this));var t=k.hasTouchEvents()?'touchend':'click';n.listen(t,'search-activator',function(){this.startSession('',{force:true});}.bind(this));r.listen('scroll',function(event){this.data.scrolled=1;}.bind(this));}q.prototype.blur=function(r){"use strict";this.blurInProgress=true;g(function(){this.data.abandonment_reason=r;this.logToServer();}.bind(this),0);};q.prototype.startSession=function(r,s){"use strict";s=s||{};if(this.sessionID==null&&(r||s.force)){this.data={};this.sessionID=Math.random();this.data.query=r;this.data.session_start=Date.now();n.invoke('m-typeahead-logger:new-session-id',null,{sessionID:this.sessionID});}};q.prototype.sessionInProgress=function(){"use strict";if(this.sessionID!==null&&!this.blurInProgress)return true;return false;};q.prototype.logToServer=function(){"use strict";if(this.sessionID){this.data.sid=this.sessionID;this.data.typeahead_type=this.typeahead.getTypeaheadType&&this.typeahead.getTypeaheadType();this.data.candidate_results=this.data.candidate_results||[];if(this.data.candidate_results.length===0)for(var r=0;r<this.results.length;r++){var s=this.results[r];if(s.rel>0){var t={id:s.rel};t.type=s.type;t.renderType=s.renderType;try{var v=j.find(s,'a','typeahead-result');if(i.get(v).bootstrap)t.bootstrap=1;}catch(u){}this.data.candidate_results.push(t);}}if(!this.data.query&&(!this.data.candidate_results||this.data.candidate_results.length===0))this.data.candidate_results=this.emptyQueryResults;if(m.useBanzaiLogging){h.post(p,this.data,{delay:0,retry:true});}else{var w=new l(this.uri);w.setMethod('POST').setData({stats:JSON.stringify(this.data)}).send();}}this.initialize();};q.prototype.initialize=function(){"use strict";this.data={};this.sessionID=null;this.results=[];this.blurInProgress=false;};o(q.prototype,{typeahead:null,data:null,sessionID:null,results:null,uri:null,blurInProgress:null});e.exports=q;});
__d("BanzaiScuba",["Banzai","copyProperties"],function(a,b,c,d,e,f,g,h){var i="scuba_sample";function j(m,n,o){this.fields={};this.post=function(p){if(!m)return;var q={};h(q,this.fields);q._ds=m;if(n)q._lid=n;q._options=o;g.post(i,q,p);this.post=function(){};this.posted=true;};this.lid=n;return this;}function k(m,n,o){if(!this.fields[m])this.fields[m]={};this.fields[m][n]=o;return this;}function l(m){return function(n,o){if(this.posted)return this;return k.call(this,m,n,o);};}h(j.prototype,{addNormal:l('normal'),addInteger:l('int'),addDenorm:l('denorm'),addTagset:l('tags'),addNormVector:l('normvector')});e.exports=j;});
__d("MSearchTypeaheadPerfLogger",["BanzaiScuba","CurrentUser","performanceNow"],function(a,b,c,d,e,f,g,h,i){function j(k,l,m){"use strict";this._searchType=l.type;this._sampleRate=l.sample_rate;this._siteType=l.site;this._cacheEnable=m?1:0;this.init(k);this.initEvents();this._reset();}j.prototype.init=function(k){"use strict";this._data=k.getDatasource();this._typeahead=k;};j.prototype.initEvents=function(){"use strict";this._data.listen('initial_render',this.initialRender.bind(this));this._data.listen('after_complete',this.complete.bind(this));this._data.listen('req_dispatch',this.remoteRequestDispatch.bind(this));this._data.listen('req_sent',this.remoteRequestSent.bind(this));this._data.listen('req_recv',this.remoteRequestReceived.bind(this));this._typeahead.listen('update',this.queryStart.bind(this));this._typeahead.listen('render_start',this.renderStart.bind(this));this._typeahead.listen('rendered',this.rendered.bind(this));};j.prototype._reset=function(){"use strict";this._startTime=null;this._intialRenderTime=null;this._remoteRequestDispatchTime=null;this._remoteRequestSentTime=null;this._remoteRequestReceivedTime=null;this._renderStart=null;this._rendered=null;this._endTime=null;this._cacheOnly=1;this._resultLength=0;this._originQuery=null;this._query=null;};j.prototype.initialRender=function(){"use strict";this._intialRenderTime=Date.now();};j.prototype.complete=function(){"use strict";this._endTime=Date.now();this._query=this._typeahead.getValue();this.logToScuba();this._reset();};j.prototype.queryStart=function(k){"use strict";this._reset();this._originQuery=k;this._startTime=Date.now();};j.prototype.renderStart=function(){"use strict";this._renderStart=i();};j.prototype.rendered=function(){"use strict";this._rendered=i()-this._renderStart;};j.prototype.remoteRequestDispatch=function(k){"use strict";this._remoteRequestDispatchTime=Date.now();this._sid=k;};j.prototype.remoteRequestSent=function(){"use strict";this._remoteRequestSentTime=Date.now();};j.prototype.remoteRequestReceived=function(k){"use strict";this._remoteRequestReceivedTime=Date.now();this._resultLength=k;this._cacheOnly=0;};j.prototype.logToScuba=function(){"use strict";if(this._startTime===null)return;if(this._originQuery!==this._query)return;var k=new g('mobile_search_facebar_js',null,{addBrowserFields:true,addPredictedGeographyFields:true,addUser:true,addSearchVersion:true,addGatekeepers:{facebarGKs:true}});k.addInteger('sample_rate',this._sampleRate);k.addNormal('typeahead_type',this._searchType);k.addNormal('site',this._siteType);k.addNormal('session_id',this._sid);k.addNormal('user_id',h.getID());k.addNormal('query',this._query);k.addInteger('cache_keypress_render',Math.max(this._intialRenderTime-this._startTime,0));if(this._rendered)k.addInteger('rendered',this._rendered);if(this._cacheOnly===0){k.addInteger('remote_keypress_query_dispatch',Math.max(this._remoteRequestDispatchTime-this._startTime,0));k.addInteger('remote_keypress_query_start',Math.max(this._remoteRequestSentTime-this._startTime,0));k.addInteger('remote_keypress_query_end',Math.max(this._remoteRequestReceivedTime-this._startTime,0));k.addInteger('remote_keypress_render',Math.max(this._endTime-this._startTime,0));k.addInteger('remote_render',Math.max(this._endTime-this._remoteRequestReceivedTime,0));k.addInteger('time_js_async',Math.max(this._remoteRequestReceivedTime-this._remoteRequestSentTime,0));}k.addInteger('end_to_end',Math.max(this._endTime-this._startTime,0));k.addInteger('num_result',this._resultLength);k.addNormal('is_cache_only',this._cacheOnly);k.addNormal('is_cache_enable',this._cacheEnable);k.post();};e.exports=j;});
__d("MTypeaheadNullstateSource",["URI","Stratcom","MTypeaheadTouchSource"],function(a,b,c,d,e,f,g,h,i){var j='graph-search-entry-point',k='search-recent-queries';for(var l in i)if(i.hasOwnProperty(l))n[l]=i[l];var m=i===null?null:i.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=i;function n(o,p){"use strict";i.call(this,o,p);h.listen('setCurrentProfileID',j,function(event){if(event.getData().profileID!==this.profileID){this.profileID=event.getData().profileID;this.refresh();}}.bind(this));h.listen('addRecentSearch',k,function(event){var q=event.getData().result;if(q)this.addRecentResult(q);}.bind(this));h.listen('addRecentQuery',k,function(event){var q=event.getData().query;if(q){var r=this.makeRecentResultWithQuery(q);this.addRecentResult(r);}}.bind(this));h.listen('refreshRecent',k,function(){this.refresh();}.bind(this));}n.prototype.makeRecentResultWithQuery=function(o){"use strict";return {display:o,name:o,id:o,uri:'/search/?query='+o};};n.prototype.addRecentResult=function(o){"use strict";o.isRecentSearch=true;var p=[],q=0;o.idx=q;p.push(o);for(var r in this._raw)if(r!=o.id){q++;this._raw[r].idx=q;p.push(this._raw[r]);}this._raw=p;};n.prototype.refresh=function(){"use strict";this._raw={};this.sendRequest();};n.prototype.getAuxiliaryData=function(){"use strict";return {profile_id:this.profileID?this.profileID:null};};n.prototype.ondata=function(o){"use strict";m.ondata.call(this,o.nullstate);};n.prototype.matchResults=function(o){"use strict";var p=[];if(o==='')p=Object.keys(this._raw);this.sortHits(o,p);var q=this.renderNodes(o,p);this.invoke('resultsready',q);this.invoke('complete');};n.prototype.setCurrentProfileID=function(o){"use strict";this.profileID=o;};n.prototype.sortHits=function(o,p){"use strict";p.sort(this.sortingFunction.bind(this));};n.prototype.sortingFunction=function(o,p){"use strict";var q=this._raw[o],r=isNaN(q.idx)?Number.MAX_VALUE:q.idx,s=this._raw[p],t=isNaN(s.idx)?Number.MAX_VALUE:s.idx;return r-t;};n.prototype.getTransformer=function(){"use strict";return function(o){if(o.type==='trending'){var p=new g('/search/trending');p.setQueryData({query:o.name,topicID:o.id,isTrending:true});return {id:o.name,display:o.name,name:o.name,uri:p.toString(),subtext:o.articleTitle,type:o.type,photo:o.articleImageURI,actionTime:0,isTrending:true};}if(o.type==='keyword')return {cost:o.cost,idx:o.idx,display:o.text,name:o.text,type:o.type,id:o.uid,uri:o.path||o.uri,actionTime:o.action_time,isRelatedSearch:o.related_search,isRecentSearch:o.recent_search,isSuggestedSearch:o.suggested_search};return {actionTime:o.action_time,name:o.text,uri:o.path||o.uri,id:o.uid||o.id,display:o.name,photo:o.photo,category:o.category,cost:o.cost,idx:o.idx,tokens:o.tokens,type:o.type[0].toUpperCase()+o.type.slice(1),verticalType:o.vertical_type,subtext:o.subtext,isRecentSearch:o.recent_search};};};e.exports=n;});
__d("MReactTypeahead",["DOM","MJSEnvironment","MPageController","Parent","React","Stratcom","URI","Vector","MReactTypeaheadView","MRecentSearchesUpdater","MSearchTypeaheadLogger","MSearchTypeaheadPerfLogger","MTypeaheadNullstateSource","MTypeaheadOnDemandSource","MTypeaheadTouchSource","MTypeaheadTouchSourceWithSuggestions","TypeaheadCompositeSource","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){'use strict';var y=k.PropTypes,z=10,aa=k.createClass({displayName:'MReactTypeahead',_datasource:null,_datasourceListeners:[],_listeners:{},propTypes:{onClickItem:y.func,onBlur:y.func,onKeyUp:y.func,onKeyDown:y.func,onTouchStart:y.func,placeholder:y.string,presenter:y.object.isRequired,showClearButton:y.bool,typeaheadConfig:y.object.isRequired,excludedEntries:y.object,autoWidth:y.bool,getTypeaheadOnDemandSource:y.func,getTypeaheadTouchSource:y.func,getTypeaheadCompositeSource:y.func,getTypeaheadNullstateSource:y.func,onFocus:y.func,simpleSearch:y.bool,suggestions:y.array,hideSelected:y.bool,maxSuggestionCount:y.number},shouldComponentUpdate:function(ba,ca){if(this.state.resultData!==ca.resultData||this.state.waiting!==ca.waiting)return true;var da=ba.excludedEntries,ea=this.props.excludedEntries;for(var fa in da)if(da[fa]!==ea[fa])return true;for(var ga in ea)if(ea[ga]!==da[ga])return true;return false;},componentDidMount:function(){this._syncInputWidth();this.refs.input.type="search";},componentWillUpdate:function(){this._invoke('render_start');},componentDidUpdate:function(ba,ca){this.props.onUpdate&&this.props.onUpdate();this._syncInputWidth();this._invoke('rendered');},getInitialState:function(){return {resultData:[],query:null,waiting:false};},listen:function(ba,ca){this._listeners[ba]=this._listeners[ba]||[];this._listeners[ba].push(ca);},_invoke:function(ba,ca){if(this._listeners[ba])this._listeners[ba].forEach(function(da){da.apply(this,ca);}.bind(this),this);},waitForResults:function(){this.setState({waiting:true});},showResults:function(ba){if(this.props.hideSelected)ba=this._filterExcluded(ba);this.setState({resultData:ba,waiting:true},this._checkQueryState);this._invoke('show',[ba]);},_filterExcluded:function(ba){var ca=this.props.excludedEntries;if(ca)return ba.filter(function(da){return !ca[da.id];});return ba;},_checkQueryState:function(){if(this.state.query==null)this.setState({waiting:false});},complete:function(){this.setState({waiting:false});},reset:function(){this.refs.input.getDOMNode().value='';this.query('',true);},query:function(ba,ca){ca=ca||false;if(ca||this.state.query!==ba){this._invoke('update',[ba]);this._invoke('change',[ba]);this.setState({query:ba});}},inputChanged:function(){if(this.refs.input.getDOMNode().value==='')this.query('');},onSearchFormSubmit:function(event){event.preventDefault();var ba=this.refs.input.getDOMNode(),ca=ba.value;this._invoke('query',[this.state.resultData]);var da=new m('/search/?query').addQueryData('query',ca).toString();i.load(da);},render:function(){var ba=this.props.showClearButton&&this.state.query,ca=this.props.typeaheadRootClassName||"_5fn4",da=k.DOM.input({type:"search",ref:"input",className:"input",autoCorrect:"off",autoComplete:"off",autoCapitalize:"off",name:"query",placeholder:this.props.placeholder,onBlur:this.props.onBlur,onKeyUp:this.onKeyUp,onKeyDown:this.props.onKeyDown,onFocus:this._onFocus,onChange:this.inputChanged});if(this.props.typeaheadConfig.submitOnEnter)da=k.DOM.form({ref:"searchForm",action:"/search",className:"_4e7a",onSubmit:this.onSearchFormSubmit},da,k.DOM.input({type:"hidden",name:"source",value:"typeahead"}));var ea="_5fn6 touchable";if(this.props.useStandardClearButton)ea="_5fn6 touchable mClearButton";var fa=this.props.hideSelected?this._filterExcluded(this.state.resultData):this.state.resultData;return (k.DOM.div({className:this.props.className},k.DOM.div({className:ca},k.DOM.div({className:"_5fn5"},da,k.DOM.span({ref:"textSizeProxy",className:"_5rmg"},this.state.query||this.props.placeholder),k.DOM.div({className:ea,'data-sigil':"touchable",style:{display:ba?'':'none'},onMouseDown:this.onClearButtonEvent,onTouchStart:this.onClearButtonEvent},k.DOM.div(null,"Ã—")))),o({ref:"results",Renderer:this.props.presenter.ViewRenderer,data:fa,excludedEntries:this.props.excludedEntries,query:this.state.query,waiting:this.state.waiting,loaderMarkup:this.props.typeaheadConfig.loaderMarkup,onTouchStart:this.props.onTouchStart,simpleSearch:this.props.simpleSearch,onClickItem:this._onClickItem})));},setInputValue:function(ba){if(ba)this.refs.input.getDOMNode().value=ba;},onKeyUp:function(event){var ba=this.getInputValue();this.query(ba);this.props.onKeyUp&&this.props.onKeyUp(event);},onClearButtonEvent:function(event){event.preventDefault();this.reset();this.focusInput();},getInputValue:function(){return this.refs.input.getDOMNode().value;},getValue:function(){return this.getInputValue();},focusInput:function(){this.refs.input.getDOMNode().focus();},blurInput:function(){this.refs.input.getDOMNode().blur();},_onClickItem:function(event,ba,ca){if(!h.IS_ROSETTA)this.reset();this.props.onClickItem&&this.props.onClickItem(event,ba,ca);this._invoke('select',[j.byClass(event.target,"_5fna")]);this.forceUpdate();},getDisplayedHeight:function(){var ba=this.refs.results.getDOMNode(),ca=n.getPos(ba).y;return n.getDim(ba).y+ca;},getDatasource:function(){return this._datasource;},_setDatasource:function(ba){this._datasource=ba;this._datasourceListeners=[ba.listen('waiting',this.waitForResults),ba.listen('resultsready',this.showResults),ba.listen('complete',this.complete)];ba.bindToTypeahead(this);},_syncInputWidth:function(){if(!this.props.autoWidth)return;var ba=this.refs.textSizeProxy.getDOMNode().offsetWidth;if(ba===0)return;this.refs.input.getDOMNode().style.width=ba+'px';},configureDatasource:function(ba){if(this._datasource)return;var ca=this.props.typeaheadConfig.sources,da=[],ea=this.getTypeaheadTouchSource(ca.bootstrapped.src,ca.bootstrapped.source_key,this.props.suggestions);ea.setShowSecondaryAction(true);ea.reactRendered=true;this.touchSource=ea;da.push(ea);if(ca.nullstate){this.nullstateDataSource=this.getTypeaheadNullstateSource(ca.nullstate.src);this.nullstateDataSource.setMaximumResultCount(ca.nullstate.max_results);this.nullstateDataSource.setShowSecondaryAction(true);this.nullstateDataSource.reactRendered=true;da.push(this.nullstateDataSource);}ea=this.getTypeaheadOnDemandSource(ca.online.src);ea.setMaximumResultCount(ca.online.max_results);ea.setEnableImmediateReturnOfCachedResults(ca.online.enable_caching);if(ba){if(ba.enableQueryThrottle)ea.setThrottleSendRequest(ba.queryThrottleTime);ea.setMaxResults(ba.maxResults);ea.setEnableEagerSendRequest(ba.enableEagerSendRequest);ea.setQueryDelay(ba.queryWaitTime);}ea.setShowSecondaryAction(true);ea.reactRendered=true;da.push(ea);var fa=this.getTypeaheadCompositeSource(da);fa.reactRendered=true;fa.mergeKey='id';this._setDatasource(fa);this._invoke('start');},configureMSideNavMarauderLogger:function(){if(!this.props.typeaheadConfig.mSideNavMarauderLogger||this._mSideNavMarauderLoggerConfigurationComplete)return;this.props.typeaheadConfig.mSideNavMarauderLogger.setupTypeaheadListener(this);this._mSideNavMarauderLoggerConfigurationComplete=true;},configureMRecentSearchesUpdater:function(){if(this.props.typeaheadConfig.hasRecentSearches)new p(this);},configureMSearchTypeaheadLogger:function(){if(this._mSearchTypeaheadLoggerConfigurationComplete)return;l.listen('m-typeahead-logger:new-session-id',null,this.addSessionIDToSearch);var ba='/search/metrics.php',ca=new q(this,ba);this._mSearchTypeaheadLoggerConfigurationComplete=true;l.listen('log-m-search-session-end',null,function(da){ca.blur(da.getData().reason);});},configureMSearchTypeaheadPerfLogger:function(){if(!this.props.typeaheadConfig.typeaheadScubaInfo||this._mSearchTypeaheadPerfLoggerConfigurationComplete)return;new r(this,this.props.typeaheadConfig.typeaheadScubaInfo,this.props.typeaheadConfig.sources.online.enable_caching);this._mSearchTypeaheadPerfLoggerConfigurationComplete=true;},addSessionIDToSearch:function(ba){if(!this.refs||!this.refs.searchForm)return;var ca=this.refs.searchForm.getDOMNode(),da=g.scry(ca,'input','search-typeaahead-session-id')[0];if(!da){da=document.createElement('input');da.type='hidden';da.name='tsid';ca.appendChild(da);l.addSigil(da,'search-typeaahead-session-id');}da.value=ba.getData().sessionID;},getTypeaheadCompositeSource:function(ba){if(this.props.getTypeaheadCompositeSource)return this.props.getTypeaheadCompositeSource(ba);return new w(ba);},getTypeaheadOnDemandSource:function(ba){if(this.props.getTypeaheadOnDemandSource)return this.props.getTypeaheadOnDemandSource(ba);return new t(ba);},getTypeaheadTouchSource:function(ba,ca,da){if(this.props.getTypeaheadTouchSource)return this.props.getTypeaheadTouchSource(ba,ca);if(da){var ea=new v(ba,ca,da);if(this.props.maxSuggestionCount){ea.setMaximumResultCount(this.props.maxSuggestionCount);}else ea.setMaximumResultCount(z);return ea;}return new u(ba,ca);},getTypeaheadNullstateSource:function(ba){if(this.props.getTypeaheadNullstateSource)return this.props.getTypeaheadNullstateSource(ba);return new s(ba);},getTypeaheadType:function(){var ba='m_side_nav';if(this.props.simpleSearch){ba+='_simple';}else ba+='_gsv2';return ba;},updateSuggestionsIds:function(ba){if(this.touchSource)this.touchSource.setSuggestionsIds(ba);if(this.refs.input.getDOMNode().value==='')this.reset();},componentWillUnmount:function(){for(var ba=0;ba<this._datasourceListeners.length;++ba)this._datasourceListeners[ba].remove();this._datasourceListeners=null;},_onFocus:function(){this.props.onFocus&&this.props.onFocus();this.query(this.getInputValue());}});e.exports=aa;});
__d("MReactSearchOverlay",["MAddFriend","MJSEnvironment","MReactSearchResultsPresenter","MReactTypeahead","React","Stratcom","SearchMTouchGlobalOptions","cx","fbt","MOpenable"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';b('MOpenable');var p=k.PropTypes,q=k.createClass({displayName:'MReactSearchOverlay',propTypes:{display:p.bool,onClickItem:p.func,onClose:p.func,onTypeaheadUpdate:p.func,typeaheadConfig:p.object.isRequired},init:function(){this.refs.searchInput.configureDatasource(m);this.refs.searchInput.configureMSearchTypeaheadPerfLogger();this.refs.searchInput.configureMSideNavMarauderLogger();this.refs.searchInput.configureMSearchTypeaheadLogger();this.refs.searchInput.configureMRecentSearchesUpdater();this.focus();},focus:function(){this.refs.searchInput.focusInput();},blur:function(){this.refs.searchInput.blurInput();},hideKeyboard:function(){this.blur();},close:function(){this.props.onClose();},logSearchSessionEnd:function(r){l.invoke('log-m-search-session-end',null,{reason:r});},render:function(){return (k.DOM.div({className:"_5fmz",style:{display:this.props.display?'':'none'}},k.DOM.div({className:"_5fm-"},k.DOM.button({className:"_5fm_ touchable btn btnI bgdb mfss",type:"submit",'data-sigil':"touchable",'data-store':'{"nativeClick": true}',onClick:this.onCancelClick},"Cancel"),j({ref:"searchInput",placeholder:this.props.searchPlaceholder,presenter:i,typeaheadConfig:this.props.typeaheadConfig,showClearButton:true,onBlur:this.onBlur,onClickItem:this.onClickItem,onTouchStart:this.onTouchStart,onUpdate:this.props.onTypeaheadUpdate}))));},onBlur:function(r){if(!h.IS_ROSETTA&&this.refs.searchInput.getInputValue()==null){this.logSearchSessionEnd('cancel');this.close();}},onCancelClick:function(){this.logSearchSessionEnd('cancel');l.invoke('m:search-overlay:cancel-react');this.onCancel();},onCancel:function(r){this.close();this.refs.searchInput.reset();},onClickItem:function(r){this.props.onClickItem();this.hideKeyboard();if(!h.IS_ROSETTA)this.close();},onTouchStart:function(r){this.hideKeyboard();},handleStateChange:function(r){if(this.refs.searchInput.getInputValue())setTimeout(function(){this.onCancel(r);}.bind(this),0);},getDisplayedHeight:function(){return this.refs.searchInput.getDisplayedHeight();},componentDidMount:function(){g.main();l.listen('m:history:change',null,this.handleStateChange);l.listen('m:side-area:hide',null,function(){this.logSearchSessionEnd('back');}.bind(this));}});e.exports=q;});
__d("XChatBuddyCountControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/chat\/online_friend_count\/",{});});
__d("fetchBookmarks",["FBJSON","MRequest"],function(a,b,c,d,e,f,g,h){'use strict';function i(j,k){var l=new h('/api/').setData({method:'bookmarks.get',mobile:true});l.listen('done',function(m){if(typeof m!=='string'){k("payload is not string.",m);return;}var n=g.parse(m,e.id);if('error_code' in n||(n&&n[0]&&'error_code' in n[0])){k(n[0]||n);}else j(n);});l.send();}e.exports=i;});
__d("MReactSidenav",["MLogger","MRequest","MReactPartialSideMenu","MReactSearchOverlay","MViewport","React","Stratcom","XChatBuddyCountControllerURIBuilder","cx","fetchBookmarks","invariant","keyMirror","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){'use strict';var t=l.PropTypes,u=217974574879787,v=245119965500321,w=r({SELF:null,SECONDARY:null,SEARCH:null}),x={};x[w.SELF]='mainMenu';x[w.SECONDARY]='mainMenu';x[w.SEARCH]='search';var y=null,z=null,aa=l.createClass({displayName:'MReactSidenav',_bookmarkCountsById:[],_viewportConstraint:null,propTypes:{backButtonImg:t.string,bookmarkGroups:t.array,createGroupURI:t.string.isRequired,createPageURI:t.string,display:t.bool.isRequired,isPartial:t.bool.isRequired,footerMarkup:t.object,loaderId:t.string,loaderMarkup:t.object,onClickItem:t.func.isRequired,showSearchHeader:t.bool,typeaheadConfig:t.object},getInitialState:function(){var ba=this.props,ca=(z&&z.bookmarkGroups||ba.bookmarkGroups||[]);this._adaptBookmarkGroups(ca);return {displayMode:w.SELF,secondaryData:null,isPartial:ba.isPartial,bookmarkGroups:ca,footerMarkup:(z&&z.footerMarkup)||ba.footerMarkup};},componentWillMount:function(){if(z)this.fetchBookmarks();},deferredRefresh:function(){s(this._refreshViewport,0);},deferredViewportUpdate:function(){s(this._updateViewport,0);},toggleMenu:function(ba){q(this._isOpen());this.setState({secondaryData:ba,displayMode:this.state.displayMode===w.SELF?w.SECONDARY:w.SELF},this.deferredRefresh);},updateChatCounts:function(){var ba=new n().getURI(),ca=new h(ba);ca.listen('done',function(da){this._getBookmarkCount(v).value=da.online_friend_count;this.setState(this.state);}.bind(this));ca.send();},_showSearch:function(){this._toggleSearch(true);},_hideSearch:function(){this._toggleSearch(false);},_toggleSearch:function(ba){var ca=this;this.setState({displayMode:ba?w.SEARCH:w.SELF},function(){if(ba)ca.refs.search.init();ca.deferredRefresh();});},_updateViewport:function(){if(this._isOpen()){var ba=this.refs[x[this.state.displayMode]];q(ba);var ca=ba.getDisplayedHeight()+k.getHeaderHeight();if(this._viewportConstraint){this._viewportConstraint.setValue(ca);}else this._viewportConstraint=k.addHeightConstraint(ca);}else if(this._viewportConstraint){this._viewportConstraint.release();this._viewportConstraint=null;}},_refreshViewport:function(){this._updateViewport();k.scrollToHeader();},render:function(){var ba=this.props.typeaheadConfig!==null,ca=ba?j({ref:"search",display:this.state.displayMode===w.SEARCH,typeaheadConfig:this.props.typeaheadConfig,onClose:this._hideSearch,onClickItem:this.props.onClickItem,onTypeaheadUpdate:this._refreshViewport}):null,da=this.state.displayMode!==w.SEARCH&&i({ref:"mainMenu",enableReactSearch:ba,onClickSearchProxy:this._showSearch,loaderId:this.props.loaderId,loaderMarkup:this.props.loaderMarkup,footerMarkup:this.state.footerMarkup,isSecondary:this.state.displayMode===w.SECONDARY,createGroupURI:this.props.createGroupURI,createPageURI:this.props.createPageURI,bookmarkGroups:this.state.bookmarkGroups,isPartial:this.state.isPartial,secondaryData:this.state.secondaryData,backButtonImg:this.props.backButtonImg,onClickItem:this._onClickItem,onClickBackButton:this.toggleMenu,onClickSeeAll:this.toggleMenu,showSearchHeader:this.props.showSearchHeader,searchPlaceholder:this.props.searchPlaceholder}),ea=((this.props.display?"_5q9e":'')+(!this.props.display?' '+"_5q9f":'')+(!this.state.isPartial?' '+"_1aqy":''));return (l.DOM.div({className:ea},l.DOM.div({className:"mSideArea"},da),ca));},_onClickItem:function(){this.props.onClickItem();this.setState(this.state);},_isOpen:function(){return this.props.display;},componentDidMount:function(){q(!y);y=this;if(this.props.typeaheadConfig===null)m.listen('click',['search-overlay','typeahead-result'],this._onClickItem);m.listen('click',['search-overlay','discovery-external-page'],this._onClickItem);m.listen('click',['side-menu-item','tag:a'],this._onClickItem);m.listen('inbox',null,this._updateMessageCounts);m.listen('nav_update_counts',null,this._updateSidenavCounts);},_updateBookmarks:function(ba){this._adaptBookmarkGroups(ba);this.setState({bookmarkGroups:ba,isPartial:false},this._refreshWhenOpen);},_refreshWhenOpen:function(){if(this._isOpen())this._refreshViewport();},_getBookmarkCount:function(ba){var ca=this._bookmarkCountsById[ba];if(!ca)ca=this._bookmarkCountsById[ba]={};return ca;},_updateSidenavCounts:function(ba){var ca=ba.getData().items;for(var da=0;da<ca.length;da++){var ea=ca[da],fa=parseInt(ea.key.substring(ea.key.indexOf('_')+1),10);q('count' in ea||'increment' in ea);var ga=this._getBookmarkCount(fa);if(ea.count!==undefined){ga.value=ea.count;}else if(ea.increment)ga.value=Math.max(0,ga.value+ea.increment);}this.setState(this.state);},_updateMessageCounts:function(ba){this._getBookmarkCount(u).value=ba.getData().unread;this.setState(this.state);},_adaptBookmarkGroups:function(ba){for(var ca=0;ca<ba.length;ca++){this._adaptBookmarkCounts(ba[ca].all||[]);this._adaptBookmarkCounts(ba[ca].visible||[]);}return ba;},_adaptBookmarkCounts:function(ba){for(var ca=0;ca<ba.length;ca++){var da=ba[ca],ea=this._getBookmarkCount(da.id);ea.value=da.count;da.count=ea;}},applyPayload:function(ba){if(ba&&ba.bookmarkGroups)ba.bookmarkGroups=this._adaptBookmarkGroups(ba.bookmarkGroups);this.setState(ba,this.deferredViewportUpdate);},fetchBookmarks:function(){p(this._updateBookmarks,function(ba){g.warn('[react-bookmarks] error: %s',JSON.stringify(ba));});}});aa.update=function(ba){if(!y){z=ba;}else{y.applyPayload(ba);if(ba&&ba.isPartial)y.fetchBookmarks();}};e.exports=aa;});
__d("MReactSidearea",["CSS","DOM","MAria","MHistory","MJSEnvironment","RosettaGatingJS","MReactSidenav","MTabbable","MViewport","React","Stratcom","cx","emptyFunction","invariant","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){"use strict";var v='side-area',w=960,x=k.IS_ROSETTA?function(){return o.getWidth()>=w;}:s.thatReturnsFalse;function y(ba){return ba.isPersistent||ba.isUserOpened;}function z(ba){return ba.isAnimating&&!l.HAS_OVERLAY_MENU;}var aa=p.createClass({displayName:'MReactSidearea',getInitialState:function(){return {isPersistent:x(),isUserOpened:false,isAnimating:false};},render:function(){var ba=z(this.state)||y(this.state),ca=null;if(ba&&!this.state.isPersistent)ca=p.DOM.div({className:"_5gz3",'data-sigil':"touchable",onClick:this._setUserClosed});var da=l.HAS_OVERLAY_MENU?"_5q9g":null;return (p.DOM.div({className:da},this.transferPropsTo(m({ref:"sidenav",display:ba,onClickItem:this._setUserClosed})),ca));},componentWillMount:function(){this._setUserClosed=this._setUserOpened.bind(this,false);},componentDidMount:function(){this._listeners=[q.listen('click','menu-link',this._handleMenuLinkClick),q.listen('m:history:change',null,this._handleHistoryChange)];if(k.IS_ROSETTA)this._listeners.push(q.listen(['m:viewport:orientation-change','resize'],null,this._handleRosettaOrientationChange));this._componentDidMountOrUpdate();},componentDidUpdate:function(ba,ca){var da=y(this.state),ea=y(ca);if(ea!==da)q.invoke(da?'m:side-area:show':'m:side-area:hide');var fa=this.state.isAnimating,ga=ca.isAnimating;if(ga!==fa){clearTimeout(this._onAnimationEnd);if(fa)this._onAnimationEnd=u(this._handleAnimationEnd,200);}var ha=this.state.isUserOpened,ia=ca.isUserOpened;if(ia!==ha)if(ha){j.pushSoftState(v);u(function(){return n.focusTabbable(this.getDOMNode());}.bind(this),0);}else j.popSoftState(v);this._componentDidMountOrUpdate();},_componentDidMountOrUpdate:function(){var ba=document.body,ca=this.getDOMNode();if(l.HAS_OVERLAY_MENU){var da=h.find(ba,'*','menu-link');g.conditionClass(da,'sidePersistant',this.state.isPersistent);}else{g.conditionClass(ba,'sidePersistant',this.state.isPersistent);g.conditionClass(ba,'sideShowing',this.state.isUserOpened);}if(y(this.state)){i.show(ca);}else i.hide(ca);this.refs.sidenav.deferredViewportUpdate();},_handleHistoryChange:function(event){var ba=event.getData().soft===v,ca=this.state.isUserOpened;if(ca!==ba)this._setUserOpened(ba);},_handleRosettaOrientationChange:function(){t(k.IS_ROSETTA);if(x()){this.setState({isPersistent:true,isUserOpened:false,isAnimating:false});}else this.setState({isPersistent:false});},_handleMenuLinkClick:function(){this._setUserOpened(!this.state.isUserOpened);},_setUserOpened:function(ba){if(this.isPersistent)return;if(ba)this.refs.sidenav.updateChatCounts();this.setState({isUserOpened:ba,isAnimating:true});},_handleAnimationEnd:function(){this.setState({isAnimating:false});},componentWillUnmount:function(){for(var ba=0;ba<this._listeners.length;++ba)this._listeners[ba].remove();this._listeners=null;clearTimeout(this._onAnimationEnd);this._onAnimationEnd=null;}});e.exports=aa;});
__d("MSearchOverlay",["setTimeoutAcrossTransitions","$","CSS","DOM","DataStore","MPlaces","MViewport","MTouchClick","Stratcom","Vector","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=function(s){var t=h(s.overlay),u=j.find(t,'div','typeahead-hardpoint'),v=h(s.textinput),w=h(s.cancelbtn),x=s.discovery,y=s.emptyStatePromo;if(v.tagName!=='input')v=j.find(v,'input');var z=k.get(u);if(z.typeahead){aa();}else o.listen('m:search-typeahead:ready',null,aa);function aa(){var ba=z.typeahead;o.listen('m:viewport:update',null,function(pa){q(t.style,pa.getData());});var ca,da=false,ea=false,fa,ga=true;function ha(){var pa=p.getDim(j.scry(t,'div','marea')[0]).y,qa=j.scry(t,'div','jx-typeahead-results')[0];pa=pa+(qa?p.getDim(qa).y:0);return Math.max(pa,m.getScreenHeight());}function ia(){if(!y)return;i.conditionShow(y,ba.getValue().length===0);}function ja(pa){var qa=ha();ca=m.addHeightConstraint(qa);t.style.minHeight=qa+'px';da=true;fa=g(function(){ea=da;},2000);i.conditionClass(h("page"),'sideSearchShowing',true);j.show(t);m.scrollToHeader();ia();}function ka(pa){i.conditionClass(h("page"),'sideSearchShowing',false);clearTimeout(fa);da=ea=false;j.hide(t);t.style.minHeight='';ca&&ca.release();ca=null;l.clearWatch();}function la(pa){o.invoke('log-m-search-session-end',null,{reason:pa});}function ma(){ga=false;ba.clear();ba.refresh();na();ia();}function na(){v.blur();}var oa=n.hasTouchEvents()?'touchend':'click';o.listen(oa,'search-activator',ja);o.listen('click','search-activator',v.focus.bind(v));ba.listen('show',function(){g(function(){da&&ca.setValue(ha());},0);if(x)if(ba.getValue().length>0){j.hide(x);}else j.show(x);ia();});j.listen(u,'click','typeahead-result',function(pa){var qa=o.invoke('m:search-typehead:click',null,pa.getNode('typeahead-result'));if(qa.getPrevented()){if(qa.getStopped()){pa.kill();}else pa.prevent();na();}else{ma();ka();}});ba.listen('choose',function(){o.context().prevent();});t.onclick=function(){if(!ea){ea=true;v.focus();}};j.listen(w,'click',null,function(){if(ea){la('cancel');ma();ka();}o.invoke('m:search-overlay:cancel');});j.listen(t,'touchstart','jx-result',na);j.listen(v,'focus',null,function(pa){ga=true;m.scrollToHeader();});ba.listen('blur',function(pa){if(ga)pa.prevent();});o.listen('m:side-area:hide',null,function(){la('back');ka();});}};f.main=r;});
__d("MJewelMarauderLogger",["MarauderLogger"],function(a,b,c,d,e,f,g){function h(j,k,l){var m={};if(k==='scroll'){m.action_type=k;m.extra_data=l;}else if(k==='clicked'){m.action_type=k;var n=l.getNode('tag:a');m.extra_data=n&&n.href?n.href:null;}else if(k==='updated')m.action_type=k;g.log('jewel',j,m);}function i(j,k,l){g.toggleModule(j,k,l);}e.exports={log:h,toggleModule:i};});
__d("MSideNavMarauderLogger",["DataStore","Stratcom","MarauderLogger","MTouchClick"],function(a,b,c,d,e,f,g,h,i,j){var k='';function l(event){i.toggleModule('sidebar_menu',true);}function m(event){i.toggleModule('sidebar_menu',false);}function n(event){var w=event.getNode('tag:a'),x=event.getNode('tag:div');i.log('open_application','sidebar_menu',{application_link_type:'local_module',display_name:x?x.innerText:'unknown',url:w&&w.href});i.setNavigationModule('sidebar_menu');}function o(){t('session_start');}function p(){t('cancel');}function q(w){var x=w.getData();if(x.node.rel<=0)return;var y=0,z='',aa=g.get(x.node);if(aa){y=aa.bootstrap?1:0;z=aa.type;}var ba=0,ca=null;for(var da=0;da<x.results.length;da++){var ea=x.results[da];if(ea.rel>0){if(ea.rel==x.node.rel){ca=ba;break;}ba++;}}t('click',{query:x.query,is_bootstrapped:y,display_position:ca},z,x.node.rel);}function r(w){var x=w.getData();t('click',{query:x.query,is_bootstrapped:x.node.bootstrap?1:0,display_position:x.position},x.node.type,x.node.id);}function s(w){if(k!==w)t('search_keystroke',{prev_query:k,new_query:w});k=w;}function t(w,x,y,z){i.log(w,'search_typeahead',x,y,z);}function u(w){w.listen('change',s);}h.listen('m:side-area:show',null,l);h.listen('m:side-area:hide',null,m);h.listen('click','side-menu-item',n);var v=j.hasTouchEvents()?'touchend':'click';h.listen(v,'search-activator',o);h.listen('click','graph-search-entry-point',o);h.listen('m:search-overlay:cancel',null,p);h.listen('m:search-overlay:cancel-react',null,p);h.listen('m:search-typeahead:select',null,q);h.listen('m:search-typeahead:select-react',null,r);e.exports={setupTypeaheadListener:u};});
__d("MBackButton",["Stratcom"],function(a,b,c,d,e,f,g){var h=false,i=function(){if(h)return;h=true;g.listen('click','back-button',function(event){if(history.length>1){event.kill();history.go(-1);}});};f.main=i;});
__d("MLink",["DOM","DataStore","ErrorUtils","MLinkHack","MLogger","MPageController","Stratcom","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o='standalone' in window.navigator&&window.navigator.standalone,p=false;function q(){if(p)return;p=true;g.listen(document.documentElement,'click',null,function(event){if(event.getPrevented())return;i.applyWithGuard(function(){var r=event.getNode('tag:a');if(!r)return;var s=event.getRawEvent();if(r.getAttribute('onclick')||(s.which||s.button)>=2)return;j.remove(r);var t=r.getAttribute('href'),u=new n(t),v=u.getProtocol();if(v&&v!='http'&&v!='https')return;var w=u.getDomain(),x=w&&!(/\.facebook.com$/i).test(w);if(x&&!m.hasSigil(r,'MLinkshim'))k.mustfix('Loading an external URL without shimming: %s',t);var y=r.getAttribute('target');if((y=='_blank'||x)&&o)return;if(y=='_blank'){window.open(t);}else if(u.getPath().toLowerCase().indexOf('/dialog/oauth')===0){return;}else if(y||(v&&(v+':')!==location.protocol)||m.hasSigil(r,'no_mpc')||x){window.location=t;}else if(t){if(t.indexOf('#')===0){var z=document.getElementById(t.substr(1));z&&z.scrollIntoView();}else{var aa=h.get(r);l.load(t,{replace:aa.behavior==='replace-state'});}}else{if(r.hasAttribute('data-sigil'))return;var ba='',ca=event.getTarget();while(ca&&ca!=document.body){ba=ba+' <'+ca.nodeName;if(ca.id)ba=ba+' id='+ca.id;if(ca.className)ba=ba+' class='+ca.className;ba=ba+' >';ca=ca.parentNode;}k.warn('handleClick: unknown link action: '+'<a id="%s" class="%s" /> Path: %s',r.id,r.className,ba);return;}event.prevent();},null,[],null,'LinkController');});}f.setupListener=q;});
__d("MSearchTypeahead",["DOM","MPageController","MPlaces","MRequest","SearchMTouchGlobalOptions","MURI","Stratcom","Typeahead","copyProperties","createDeprecatedProperties","eventsMixinDeprecated","mtx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){for(var s in n)if(n.hasOwnProperty(s))u[s]=n[s];var t=n===null?null:n.prototype;u.prototype=Object.create(t);u.prototype.constructor=u;u.__superConstructor__=n;function u(v,w){"use strict";this.loadingIndicator=g.find(v,'div','searchLoadingIndicator');g.hide(this.loadingIndicator);this._seeMoreNode=g.create('a',{className:'touchable viewMore',sigil:'touchable typeahead-result'});g.hide(this._seeMoreNode);n.apply(this,[v,w]);this.uberbarQRPromo=g.scry(document.body,'*','uberbarQRPromo')[0];g.listen(this._root,'click','tag:a',function(x){this.invoke('select',x.getNode('tag:a'));}.bind(this));g.listen(this._control,'focus',null,this.startWatchLocation);g.listen(this._control,'blur',null,this.stopWatchLocation);}u.prototype.hide=function(){"use strict";if(this.getPermanent())return;n.prototype.hide.call(this);};u.prototype.setDatasource=function(v){"use strict";n.prototype.setDatasource.call(this,v);v.listen('complete',this.complete.bind(this));this.listen('show',this.resultsShown.bind(this));};u.prototype.submit=function(){"use strict";n.prototype.submit.call(this);if(k.enableSeeMore){var v='/search/?query='+encodeURIComponent(this.getValue());h.load(v);}this._control.blur();};u.prototype.waitForResults=function(){"use strict";if(window.FW_ENABLED){this._root.appendChild(this.loadingIndicator);}else this._root.insertBefore(this.loadingIndicator,this._root.lastChild);g.show(this.loadingIndicator);};u.prototype.complete=function(){"use strict";if(window.FW_ENABLED&&this._display.length===0)this._root.appendChild(g.create('div',{className:'noResults'},"No results"));if(window.FW_ENABLED&&this.uberbarQRPromo){this._root.appendChild(this.uberbarQRPromo);g.show(this.uberbarQRPromo);}g.hide(this.loadingIndicator);};u.prototype.resultsShown=function(v){"use strict";if(this.getValue().length!==0){if(!window.FW_ENABLED){var w=u.TRUNCATE_LENGTH,x=this.getValue();if(x.length>w)x=x.substr(0,w-3)+'...';if(k.enableSeeMore){this._seeMoreNode.href='/search/?query='+encodeURIComponent(this.getValue());g.setContent(this._seeMoreNode,r._("See more results for {query}",{query:x}));v.show.push(this._seeMoreNode);g.show(this._seeMoreNode);}}v.show.push(this.loadingIndicator);g.show(this.loadingIndicator);}if(this.showPresence)this.showPresenceIcons(v.show);return true;};u.prototype.showPresenceIcons=function(v){"use strict";var w=[];for(var x=0;x<v.length;++x)if(v[x].rel)w.push(v[x].rel);var y=new j(new l('/chat/presence_icon.php').setAsync(true).toString());y.setData({ids:w});y.listen('done',function(z){if(!z||z.length===0)return;var aa=g.scry(this._root,'a','typeahead-result');for(var ba=0;ba<aa.length;++ba)if(z[aa[ba].rel]===1){var ca=g.find(aa[ba],'i','presence');g.show(ca);}}.bind(this));y.send();};u.prototype.addLocationAwareSource=function(v){"use strict";m.listen('location-update',null,function(event){v.setAuxiliaryData(o(v.getAuxiliaryData(),{json_location:i.getCurrentJSONLocation()}));});};u.prototype.startWatchLocation=function(event){"use strict";if(i.shouldUseFWGeolocation())i.monitorLocation();};u.prototype.stopWatchLocation=function(event){"use strict";i.clearWatch();};o(u,{TRUNCATE_LENGTH:20});p(u,{permanent:false});q(u,['select']);o(u.prototype,{icons:null,loadingIndicator:null,uberbarQRPromo:null,showPresence:false});e.exports=u;});
__d("MTypeaheadNativeSource",["MTypeaheadHelpers","Stratcom","TypeaheadInternationalNormalizer","TypeaheadPreloadedSource","createDeprecatedProperties","eventsMixinDeprecated","FWLoader"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=b('FWLoader').FW;for(var n in j)if(j.hasOwnProperty(n))p[n]=j[n];var o=j===null?null:j.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=j;function p(){"use strict";j.apply(this,arguments);this.setNormalizer(i.normalize);}p.prototype.didStart=function(){"use strict";var q=this;h.listen('fw-bootstrapped-results-ready',null,function(r){q.invoke('rawresultsready',r.getData().friends);q.ondata(r.getData().friends);});window.FW_ENABLED&&m.bootstrapUsers();};p.prototype.ondata=function(q){"use strict";for(var r=0;r<q.length;++r)q[r].idx=r;j.prototype.ondata.apply(this,arguments);};p.prototype.sortHits=function(q,r){"use strict";var s=function(t,u){var v=this._raw[t],w=isNaN(v.idx)?Number.MAX_VALUE:v.idx,x=this._raw[u],y=isNaN(x.idx)?Number.MAX_VALUE:x.idx;return w-y;}.bind(this);r.sort(s);};p.prototype.matchResults=function(q){"use strict";var r=this.normalize(q);j.prototype.matchResults.call(this,r);};p.prototype.createNode=function(q){"use strict";return g.createNode(q,this.getShowSecondaryAction());};l(p,['rawresultsready']);k(p,{transformer:function(q){return {name:q.text,uri:q.path,id:q.uid,photo:q.photo,display:q.display||q.text,action:q.action,paths:q.paths,permissions:q.permissions,bootstrap:q.bootstrap,nativethirdpartyappicon:q.nativethirdpartyappicon};},showSecondaryAction:true});e.exports=p;});
__d("MTypeaheadPackagedSource",["MTypeaheadHelpers","TypeaheadInternationalNormalizer","TypeaheadPreloadedSource","createDeprecatedProperties"],function(a,b,c,d,e,f,g,h,i,j){for(var k in i)if(i.hasOwnProperty(k))m[k]=i[k];var l=i===null?null:i.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=i;function m(n){"use strict";i.call(this);this.packagedResults=n;this.setNormalizer(h.normalize);}m.prototype.didStart=function(){"use strict";this.ondata(this.packagedResults);};m.prototype.ondata=function(n){"use strict";for(var o=0;o<n.length;++o)n[o].idx=o;i.prototype.ondata.apply(this,arguments);};m.prototype.sortHits=function(n,o){"use strict";var p=function(q,r){var s=this._raw[q],t=isNaN(s.idx)?Number.MAX_VALUE:s.idx,u=this._raw[r],v=isNaN(u.idx)?Number.MAX_VALUE:u.idx;return t-v;}.bind(this);o.sort(p);};m.prototype.matchResults=function(n){"use strict";var o=this.normalize(n);i.prototype.matchResults.call(this,o);};m.prototype.createNode=function(n){"use strict";return g.createNode(n,this.getShowSecondaryAction());};j(m,{transformer:function(n){return {name:n.text,uri:n.path,id:n.uid,photo:n.photo,display:n.display||n.text,action:n.action,paths:n.paths,permissions:n.permissions,type:n.type,openinnewtab:n.openinnewtab,subtext:n.subtext,bootstrap:n.bootstrap,verified:n.verified,nativethirdpartyappicon:n.nativethirdpartyappicon};},packagedResults:null,showSecondaryAction:true});e.exports=m;});
__d("InitMSearchTypeahead",["$","DOM","DataStore","MSearchTypeahead","MSearchTypeaheadLogger","MSearchTypeaheadPerfLogger","MTypeaheadNativeSource","MTypeaheadOnDemandSource","MTypeaheadPackagedSource","MTypeaheadTouchSource","Stratcom","TypeaheadCompositeSource","SearchMTouchGlobalOptions","FWLoader"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=b('FWLoader').FW,u,v=function(w){if(u)return;u=true;var x=g(w.id),y=g(w.textinput);if(y.tagName.toLowerCase()!=='input')y=h.find(y,'input');var z=new j(x,y);if(w.mSideNavMarauderLogger)w.mSideNavMarauderLogger.setupTypeaheadListener(z);var aa,ba=[];if(w.sources.packagedSource){aa=new o(w.sources.packagedSource.packagedresults);aa.setShowSecondaryAction(w.showSecondaryAction);ba.push(aa);}if(w.sources.nativeSource){aa=new m();aa.setShowSecondaryAction(w.showSecondaryAction);ba.push(aa);}if(w.sources.bootstrapped){aa=new p(w.sources.bootstrapped.src,w.sources.bootstrapped.source_key);aa.setShowSecondaryAction(w.showSecondaryAction);ba.push(aa);}if(w.sources.online){aa=new n(w.sources.online.src);if(w.sources.online.max_results)aa.setMaximumResultCount(w.sources.online.max_results);aa.setEnableImmediateReturnOfCachedResults(w.sources.online.enable_caching);if(s.enableQueryThrottle)aa.setThrottleSendRequest(s.queryThrottleTime);aa.setMaxResults(s.maxResults);aa.setEnableEagerSendRequest(s.enableEagerSendRequest);aa.setQueryDelay(s.queryWaitTime);aa.setShowSecondaryAction(w.showSecondaryAction);ba.push(aa);if(w.sources.online.useLocation)z.addLocationAwareSource(aa);}var ca=new r(ba);z.setDatasource(ca);z.setPermanent(w.permanent);if(w.showPresence)z.showPresence=true;if(w.typeaheadScubaInfo)new l(z,w.typeaheadScubaInfo,w.sources.online.enable_caching);var da='/search/metrics.php',ea=new k(z,da);q.listen('log-m-search-session-end',null,function(fa){ea.blur(fa.getData().reason);});i.get(x).typeahead=z;q.listen('m-search-typeahead-change',null,function(fa){if(fa.getData().query!=z.getValue()){z.setValue(fa.getData().query);z.refresh();}});h.listen(x,'click','typeahead-result',function(){y.blur();});q.listen('m:search-typeahead:clear',null,function(fa){z.setValue('');z.refresh();});q.invoke('m:search-typeahead:ready');z.start();if(window.FW_ENABLED)t.ubersearchReady();};f.main=v;});