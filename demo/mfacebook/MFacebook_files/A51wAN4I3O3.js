/*!CK:1622552959!*//*1396841024,178179377*/

if (self.CavalryLogger) { CavalryLogger.start_js(["VqCih"]); }

__d("MShareAngoraAttachment",["Stratcom"],function(a,b,c,d,e,f,g){var h=false,i=function(j){if(h)return;h=true;window.addEventListener('error',function(event){if(event.target.nodeName=='IMG'){for(var k=event.target;k!=document.body&&!g.hasSigil(k,'shareAngoraAttachmentMedia');k=k.parentNode);if(k!=document.body)k.style.display='none';}},true);};f.registerDeadImageListener=i;});
__d("MExposeMore",["CSS","DOM","Stratcom"],function(a,b,c,d,e,f,g,h,i){var j=[];function k(){while(j.length)j.pop().remove();}var l='expose';i.listen('click',[l,'more'],function(event){var n=event.getNode(l);g.conditionClass(n,'text_exposed',true);event.prevent();});var m={main:function(){},showMessageSuffixOnClick:function(n,o){if(o.children.length!==0){if(!j.length)j.push(i.listen('m:page:unload',null,k));var p=h.scry(n,"span","more")[0];j.push(h.listen(p,'click',null,function(event){g.show(o);event.prevent();}));}}};e.exports=m;});
__d("MOrientationResize",["setTimeoutAcrossTransitions","DOM","DataStore","MParent","Stratcom","Vector"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m,n=function(o){var p='orientation-resizable',q='content-pane';if(m){r(o.id);return;}m=true;function r(ga){var ha=document.getElementById(ga);ha&&aa([{root:j.bySigil(ha,q),elements:[ha]}]);}function s(ga,ha){var ia=ha.padding||0,ja=ha.aspectRatio||1,ka=ha.widthRatio||1,la=ha.containerAspectRatio,ma=ga*ka-ia;if(!la){var na=ma,oa=Math.floor(ma/ja);}else{var pa=ma,qa=pa/la,ra=pa/qa,sa=ja,ta=sa/ra;if(ta>1){na=pa;oa=1/ta*qa;}else{na=ta*pa;oa=qa;}}return new l(na,oa);}function t(ga,ha){var ia=ha.aspectRatio||1,ja=ha.columnCount||1,ka=ha.gridPadding||0,la=ha.photoMargin||0,ma=ga-ka-(ja-1)*la,na=Math.floor(ma/ja),oa=Math.ceil(na/ia);return new l(na,oa);}function u(ga,ha){var ia=ha.aspectRatio||1,ja=ha.widthRatio||1,ka=ha.padding||0,la=ga*ja,ma=la/ia;return new l(Math.round(la)-ka,Math.floor(ma)-ka);}function v(ga){var ha=ga.getData(),ia=h.scry(ha,'*',p);ia&&aa([{root:j.bySigil(ha,q),elements:ia}]);}var w,x;function y(){x++;var ga=false,ha=h.scry(document,'*',q);if(ha&&ha.length){var ia=[];for(var ja=0;ja<ha.length;ja++){var ka=ha[ja],la=ka.offsetWidth,ma=i.get(ka),na=ma&&ma.offsetWidth;if(la!==na){i.set(ka,{offsetWidth:la});ga=true;ia.push({root:ka,elements:h.scry(ka,'*',p)});}}if(ia.length)aa(ia);}if(x<3)w=g(y,500);if(ga)k.invoke('m:orientation-resize:complete');}function z(){x=0;clearTimeout(w);y();}function aa(ga){var ha=[];for(var ia=0;ia<ga.length;ia++){var ja=ga[ia].root,ka=ga[ia].elements;if(!ja||!ka)continue;var la=ja.offsetWidth;if(la===0)continue;for(var ma=0;ma<ka.length;ma++){var na=ka[ma],oa=i.get(na),pa=null,qa;switch(oa.mode){case 'scale-photo-attachment':pa=s(la,oa);break;case 'scale-photo-relative-item':pa=u(la-oa.outerPadding,oa);break;case 'scale-photo-grid-item':pa=t(la,oa);break;case 'resize-to-unit':pa=ba(la,na,oa);break;case 'resize-feed-2-photos-attachment':qa=ea(la,na,oa);ha=ha.concat(qa);continue;case 'resize-feed-3-photos-attachment':qa=fa(la,na,oa);ha=ha.concat(qa);continue;default:continue;}ha.push({node:na,width:pa.x,height:pa.y});}}ha.forEach(function(ra){if(!ra||!ra.node)return;ra.node.style.width=ra.width+'px';ra.node.style.height=ra.height+'px';});}function ba(ga,ha,ia){var ja=ia.padding||0,ka=ia.aspectRatio||1,la=ia.widthRatio||1,ma=ca(ha),na=ma?l.getDim(ma).x:ga,oa=na*la-ja,pa=Math.floor(oa/ka);return new l(oa,pa);}function ca(ga){while(ga&&ga!=document){if(k.hasSigil(ga,'orientation-resize-parent'))return ga;ga=ga.parentNode;}return null;}function da(ga,ha){var ia=ha==='P'?4/3:3/4;return Math.floor(ga*ia);}function ea(ga,ha,ia){var ja=ia.orient,ka=ga-ia.spacing,la,ma,na;if(ja==='PL'||ja==='LP'){var oa=Math.round(ka*ia.fraction),pa=ka-oa;na=da(oa,'L');if(ja==='PL'){la=pa;ma=oa;}else{la=oa;ma=pa;}}else{la=Math.round(ka/2);ma=ka-la;na=da(la,ja[0]);}var qa=h.scry(ha,'*','photoleft')[0],ra=h.scry(ha,'*','photoright')[0],sa=[];if(qa)sa.push({node:qa,width:la,height:na});if(ra)sa.push({node:ra,width:ma,height:na});return sa;}function fa(ga,ha,ia){var ja=ga-ia.spacing,ka=Math.round(ja*ia.fraction),la=ja-ka,ma=da(ka,ia.orient),na=Math.floor(ma/2)-ia.margin,oa=ma-na-ia.margin;return [{node:h.find(ha,'*','mainphoto'),width:ka,height:ma},{node:h.find(ha,'*','topphoto'),width:la,height:na},{node:h.find(ha,'*','bottomphoto'),width:la,height:oa}];}if(o.id)r(o.id);k.listen(['m:viewport:orientation-change','m:page:render:complete','m:page:render:cache:complete','m:ajax:complete','m:plugin:resize'],null,z);k.listen(['m:timeline:unit:resize','m-timeline-two-column-layout:pre-section-balance'],null,v);};f.main=n;});
__d("MMoreItemAutomatic",["MPageCache","MPageControllerPath","MRequest","MRequestTypes","MResponseData","MStopNGo","MURI","MViewport","Stratcom","Vector","copyProperties","createDeprecatedProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(t){"use strict";this._href=t.href;this._proximityPages=t.proximity_pages||7;this._loggerID=t.logger_id;this._loggerName=t.logger_name;this._loadImmediately=t.load_first_immediately;var u=document.getElementById(t.id);if(u){this._verticalOffset=p.getPos(u).y;this.setMoreItem(u);this.setPersistOnReload(t.persist_on_reload);this._setUpSendRequest();}else this.uninstall();}s.prototype.isElementVisible=function(){"use strict";if(!this._isElementRendered())return false;var t,u=this.getMoreItem();if('getBoundingClientRect' in u){var v=u.getBoundingClientRect(),w=v.width/10,x=v.height/10,y=v.left,z=v.right,aa=v.top,ba=v.bottom,ca;while(ca!==u&&y<=z&&aa<=ba){y+=w;aa+=x;ca=document.elementFromPoint(Math.round(y),Math.round(aa));}t=ca===u;}else{var da=p.getPos(u).y,ea=da+p.getDim(u).y,fa=n.getScrollTop(),ga=fa+n.getUseableHeight();t=da<=ga&&ea>=fa;}return t;};s.prototype._checkScrolledIntoFetched=function(){"use strict";var t=this.getMoreItem();if(t)if(this._verticalOffset-n.getScrollTop()<0){o.invoke('m:more_item_automatic:items_visible',this._loggerID);this.uninstall();}};s.prototype._onGo=function(){"use strict";if(!this._itemsLoaded){this._readyToUpdate=true;if(this.isElementVisible())o.invoke('m:more_item_automatic:spinner_visible',this._loggerID);if(!this._requestSent){this._sendRequestIfScrolledDown();}else this._updateItems();}else this._checkScrolledIntoFetched();};s.prototype._onStop=function(){"use strict";if(!this._itemsLoaded)this._readyToUpdate=false;};s.prototype._setUpSendRequest=function(){"use strict";if((this._loadImmediately||this.isElementVisible())&&!this._requestSent){this._sendRequest();this._loadImmediately=false;}this._listeners=[l.listen('go',this._onGo.bind(this)),l.listen('stop',this._onStop.bind(this))];};s.prototype._existsOnPage=function(){"use strict";var t=this.getMoreItem();return t?document.documentElement.contains(t):false;};s.prototype.uninstall=function(){"use strict";while(this._listeners&&this._listeners.length)this._listeners.pop().remove();this._requestSent=false;this._prefetchResponse=null;this.setMoreItem(null);this.setPersistOnReload(false);};s.prototype.withinProximity=function(){"use strict";var t=this.getMoreItem();return t&&p.getPos(t).y-n.getScrollTop()<n.getUseableHeight()*(1+this._proximityPages);};s.prototype._updateItems=function(){"use strict";if(this._prefetchResponse){if(this._existsOnPage()){this._prefetchResponse.process();g.addCachedIUIResponse(h.getRequestPath(),this._prefetchResponse);}o.invoke('m:more_item_automatic:items_loaded',this._loggerID);this._itemsLoaded=true;}};s.prototype._isElementRendered=function(){"use strict";var t=this.getMoreItem();if(!t||!t.offsetHeight)return false;return true;};s.prototype._sendRequestIfScrolledDown=function(){"use strict";if(this.isElementVisible()||(this._isElementRendered()&&n.getScrollTop()>100&&this.withinProximity()))this._sendRequest();};s.prototype._sendRequest=function(){"use strict";var t=new i(new m(this._href).setAsync(true).toString()).setType(j.DEPENDENT);t.setAutoProcess(false);var u=[],v=false,w=function(){if(!v&&u.length){v=true;u.shift().process();}};t.listen('response',function(x){x=new k(x);x.listen('complete',function(){v=false;w();});if(x.isPagelet()){u.push(x);w();return;}v=true;this._prefetchResponse=x;if(this._readyToUpdate)this._updateItems();}.bind(this));t.send();this._requestSent=true;};r(s,{moreItem:null,persistOnReload:false});q(s.prototype,{_requestSent:false,_readyToUpdate:true,_moreStartTime:0,_moreLogged:false,_proximityPages:null,_prefetchResponse:null,_listeners:null,_href:null,_loggerName:null,_loggerID:null,_itemsLoaded:false,_verticalOffset:0});q(s,{TRY_AGAIN_DELAY:1500});e.exports=s;});
__d("InitMMoreItemAutomatic",["MMoreItemAutomatic","Stratcom"],function(a,b,c,d,e,f,g,h){var i,j=function(k){if(!i){i={};h.listen('m:page:loading',null,function(m){for(var n in i)if(!i[n].getPersistOnReload()){i[n].uninstall();delete i[n];}});}var l=k.id;if(i[l])i[l].uninstall();i[l]=new g(k);};f.main=j;});
__d("MMoreItemAutomaticLogger",["Stratcom","MarauderLogger","copyProperties"],function(a,b,c,d,e,f,g,h,i){function j(k,l){this._loggerName=k;this._loggerID=l;this._listeners=[g.listen('m:page:unload',null,this._pageUnload.bind(this)),g.listen('m:more_item_automatic:spinner_visible',null,this._onSpinnerVisible.bind(this)),g.listen('m:more_item_automatic:items_loaded',null,this._onItemsLoaded.bind(this)),g.listen('m:more_item_automatic:items_visible',null,this._onItemsVisible.bind(this))];}i(j.prototype,{_loggerName:'',_loggerID:'',_spinnerUnloaded:false,_spinnerVisible:false,_spinnerStartTime:null,_cleanup:function(){while(this._listeners&&this._listeners.length)this._listeners.pop().remove();},_pageUnload:function(){if(this._spinnerVisible){this._spinnerUnloaded=true;this._logLoadingSpinnerTime(this._getTimeSpan(),true);}this._cleanup();},_onSpinnerVisible:function(event){if(event.getPath()[0]===this._loggerID&&!this._spinnerVisible){this._spinnerVisible=true;this._spinnerStartTime=Date.now();}},_onItemsLoaded:function(event){if(event.getPath()[0]===this._loggerID&&!this._spinnerUnloaded){this._logLoadingSpinnerTime(this._getTimeSpan(),false);this._spinnerVisible=false;this._spinnerStartTime=null;}},_onItemsVisible:function(event){if(event.getPath()[0]===this._loggerID)this._logItemsVisible();},_getTimeSpan:function(){return this._spinnerVisible?Date.now()-this._spinnerStartTime:0;},_logLoadingSpinnerTime:function(k,l){h.log('m_more_items_automatic_spinner_visible_time',undefined,{name:this._loggerName,id:this._loggerID,visible_time:k,spinner_unloaded:l});},_logItemsVisible:function(){h.log('m_more_items_automatic_fetched_items_visible',undefined,{name:this._loggerName,id:this._loggerID});this._cleanup();}});j.init=function(k,l){new j(k,l);};e.exports=j;});
__d("MLinkshim",["setTimeoutAcrossTransitions","$","AsyncSignal","Stratcom","DataStore"],function(a,b,c,d,e,f,g,h,i,j,k){var l='MLinkshim';function m(o){var p=o.getNode(l),q=k.get(p);n(p,q.dest_uri,q.logging_uri);}function n(o,p,q){var r=h('meta_referrer');r.content='origin';o.href=p;g(function(){r.content='default';new i(q,{}).send();r=null;},100);}j.listen('click',l,m);});
__d("MScrollAreaHelper",["DataStore"],function(a,b,c,d,e,f,g){function h(i,j){j=j||10;var k;while(j>0&&i&&i.nodeType===1){k=g.get(i);if(k&&k.scrollArea)return k.scrollArea;i=i.parentNode;j--;}return null;}f.findScrollArea=h;});