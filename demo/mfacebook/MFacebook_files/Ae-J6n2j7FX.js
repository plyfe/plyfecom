/*!CK:3067616687!*//*1398375875,178183207*/

if (self.CavalryLogger) { CavalryLogger.start_js(["ZFu4U"]); }

__d("URLMatcher",[],function(a,b,c,d,e,f){var g='!"#%&\'()*,-./:;<>?@[\\]^_`{|}',h='\u2000-\u206F\u00ab\u00bb\uff08\uff09',i='(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])',j='(?:(?:ht|f)tps?)://',k='(?:(?:'+i+'[.]){3}'+i+')',l='\\[(?:(?:[A-Fa-f0-9]{1,4}::?){1,7}[A-Fa-f0-9]{1,4})\\]',m='(?:\\b)www\\d{0,3}[.]',n='[^\\s'+g+h+']',o='(?:(?:(?:[.:\\-_%@]|'+n+')*'+n+')|'+l+')',p='(?:[.][a-z]{2,4})',q='(?::\\d+){0,1}',r='(?=[/?#])',s='(?:'+'(?:'+j+o+q+')|'+'(?:'+k+q+')|'+'(?:'+l+q+')|'+'(?:'+m+o+p+q+')|'+'(?:'+o+p+q+r+')'+')',t='[/#?]',u='\\([^\\s()<>]+\\)',v='[^\\s()<>?#]+',w=new RegExp(s,'im'),x='^\\[[0-9]{1,4}:[0-9]{1,4}:[A-Fa-f0-9]{1,4}\\]',y=new RegExp(x,'im'),z='(?:'+'(?:'+t+')'+'(?:'+'(?:'+u+'|'+v+')*'+')*'+')*',aa=new RegExp('('+'(?:'+s+')'+'(?:'+z+')'+')','im'),ba=new RegExp('('+'(?:'+j+o+q+')|'+'(?:'+m+o+p+q+')'+')'),ca=/[\s'";]/,da=new RegExp(t,'im'),ea=new RegExp('[\\s!"#%&\'()*,./:;<>?@[\\]^_`{|}\u00ab\u00bb\u2000-\u206F\uff08\uff09]','im'),fa=new RegExp('[\\s()<>?#]','im'),ga=new RegExp('\\s()<>'),ha=function(oa){if(oa&&oa.indexOf('@')!=-1){return (ba.exec(oa))?oa:null;}else return oa;},ia=function(oa){return ja(oa,aa);},ja=function(oa,pa){var qa=(pa.exec(oa)||[])[1]||null;return ha(qa);},ka=function(oa){return w.exec(oa);},la=function(oa){return !ca.test(oa.charAt(oa.length-1));},ma=function(oa){do{var pa=w.exec(oa);if(!pa)return null;var qa=false;if(pa[0][0]==='['&&pa.index>0&&oa[pa.index-1]==='@'){var ra=y.exec(pa[0]);if(ra){qa=true;oa=oa.substr(pa.index+ra[0].length);}}}while(qa);var sa=oa.substr(pa.index+pa[0].length);if(sa.length===0||!(da.test(sa[0])))return ha(pa[0]);var ta=0,ua=0,va=1,wa=0,xa=ua;for(var ya=1;ya<sa.length;ya++){var za=sa[ya];if(xa===ua){if(za==='('){wa=wa+1;xa=va;}else if(da.test(za)||!(ea.test(za))){ta=ya;}else if(fa.test(za))break;}else if(za==='('){wa=wa+1;}else if(za===')'){wa=wa-1;if(wa===0){xa=ua;ta=ya;}}else if(ga.test(za))break;}return ha(pa[0]+sa.substring(0,ta+1));},na={};na.permissiveMatch=ia;na.matchToPattern=ja;na.matchHost=ka;na.trigger=la;na.match=ma;e.exports=na;});
__d("getHashtagRegex",[],function(a,b,c,d,e,f){function g(){var h='\xc0-\xd6'+'\xd8-\xf6'+'\xf8-\xff'+'\u0100-\u024f'+'\u0253-\u0254'+'\u0256-\u0257'+'\u0259'+'\u025b'+'\u0263'+'\u0268'+'\u026f'+'\u0272'+'\u0289'+'\u028b'+'\u02bb'+'\u0300-\u036f'+'\u1e00-\u1eff',i='\u0400-\u04ff'+'\u0500-\u0527'+'\u2de0-\u2dff'+'\ua640-\ua69f'+'\u0591-\u05bf'+'\u05c1-\u05c2'+'\u05c4-\u05c5'+'\u05c7'+'\u05d0-\u05ea'+'\u05f0-\u05f4'+'\ufb12-\ufb28'+'\ufb2a-\ufb36'+'\ufb38-\ufb3c'+'\ufb3e'+'\ufb40-\ufb41'+'\ufb43-\ufb44'+'\ufb46-\ufb4f'+'\u0610-\u061a'+'\u0620-\u065f'+'\u066e-\u06d3'+'\u06d5-\u06dc'+'\u06de-\u06e8'+'\u06ea-\u06ef'+'\u06fa-\u06fc'+'\u06ff'+'\u0750-\u077f'+'\u08a0'+'\u08a2-\u08ac'+'\u08e4-\u08fe'+'\ufb50-\ufbb1'+'\ufbd3-\ufd3d'+'\ufd50-\ufd8f'+'\ufd92-\ufdc7'+'\ufdf0-\ufdfb'+'\ufe70-\ufe74'+'\ufe76-\ufefc'+'\u200c-\u200c'+'\u0e01-\u0e3a'+'\u0e40-\u0e4e'+'\u1100-\u11ff'+'\u3130-\u3185'+'\uA960-\uA97F'+'\uAC00-\uD7AF'+'\uD7B0-\uD7FF'+'\uFFA1-\uFFDC',j=String.fromCharCode,k='\u30A1-\u30FA\u30FC-\u30FE'+'\uFF66-\uFF9F'+'\uFF10-\uFF19\uFF21-\uFF3A'+'\uFF41-\uFF5A'+'\u3041-\u3096\u3099-\u309E'+'\u3400-\u4DBF'+'\u4E00-\u9FFF'+j(173824)+'-'+j(177983)+j(177984)+'-'+j(178207)+j(194560)+'-'+j(195103)+'\u3003\u3005\u303B',l=h+i+k,m='\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6'+'\u00F8-\u0241\u0250-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EE\u037A\u0386'+'\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03CE\u03D0-\u03F5\u03F7-\u0481'+'\u048A-\u04CE\u04D0-\u04F9\u0500-\u050F\u0531-\u0556\u0559\u0561-\u0587'+'\u05D0-\u05EA\u05F0-\u05F2\u0621-\u063A\u0640-\u064A\u066E-\u066F'+'\u0671-\u06D3\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710'+'\u0712-\u072F\u074D-\u076D\u0780-\u07A5\u07B1\u0904-\u0939\u093D\u0950'+'\u0958-\u0961\u097D\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0'+'\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1'+'\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33'+'\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D'+'\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD'+'\u0AD0\u0AE0-\u0AE1\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30'+'\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83'+'\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F'+'\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0C05-\u0C0C\u0C0E-\u0C10'+'\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C60-\u0C61\u0C85-\u0C8C'+'\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE'+'\u0CE0-\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39'+'\u0D60-\u0D61\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6'+'\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E46\u0E81-\u0E82\u0E84\u0E87-\u0E88'+'\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7'+'\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6'+'\u0EDC-\u0EDD\u0F00\u0F40-\u0F47\u0F49-\u0F6A\u0F88-\u0F8B\u1000-\u1021'+'\u1023-\u1027\u1029-\u102A\u1050-\u1055\u10A0-\u10C5\u10D0-\u10FA\u10FC'+'\u1100-\u1159\u115F-\u11A2\u11A8-\u11F9\u1200-\u1248\u124A-\u124D'+'\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0'+'\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310'+'\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C'+'\u166F-\u1676\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711'+'\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7'+'\u17DC\u1820-\u1877\u1880-\u18A8\u1900-\u191C\u1950-\u196D\u1970-\u1974'+'\u1980-\u19A9\u19C1-\u19C7\u1A00-\u1A16\u1D00-\u1DBF\u1E00-\u1E9B'+'\u1EA0-\u1EF9\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D'+'\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC'+'\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC'+'\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u2094\u2102\u2107'+'\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D'+'\u212F-\u2131\u2133-\u2139\u213C-\u213F\u2145-\u2149\u2C00-\u2C2E'+'\u2C30-\u2C5E\u2C80-\u2CE4\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96'+'\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6'+'\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3006\u3031-\u3035'+'\u303B-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF'+'\u3105-\u312C\u3131-\u318E\u31A0-\u31B7\u31F0-\u31FF\u3400-\u4DB5'+'\u4E00-\u9FBB\uA000-\uA48C\uA800-\uA801\uA803-\uA805\uA807-\uA80A'+'\uA80C-\uA822\uAC00-\uD7A3\uF900-\uFA2D\uFA30-\uFA6A\uFA70-\uFAD9'+'\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C'+'\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F'+'\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A'+'\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7'+'\uFFDA-\uFFDC',n='\u0300-\u036F\u0483-\u0486\u0591-\u05B9\u05BB-\u05BD\u05BF'+'\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u0615\u064B-\u065E\u0670'+'\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A'+'\u07A6-\u07B0\u0901-\u0903\u093C\u093E-\u094D\u0951-\u0954\u0962-\u0963'+'\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7-\u09C8\u09CB-\u09CD\u09D7'+'\u09E2-\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D'+'\u0A70-\u0A71\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD'+'\u0AE2-\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B43\u0B47-\u0B48\u0B4B-\u0B4D'+'\u0B56-\u0B57\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7'+'\u0C01-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56'+'\u0C82-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5-\u0CD6'+'\u0D02-\u0D03\u0D3E-\u0D43\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D82-\u0D83'+'\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2-\u0DF3\u0E31\u0E34-\u0E3A'+'\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19'+'\u0F35\u0F37\u0F39\u0F3E-\u0F3F\u0F71-\u0F84\u0F86-\u0F87\u0F90-\u0F97'+'\u0F99-\u0FBC\u0FC6\u102C-\u1032\u1036-\u1039\u1056-\u1059\u135F'+'\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B6-\u17D3\u17DD'+'\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8-\u19C9'+'\u1A17-\u1A1B\u1DC0-\u1DC3\u20D0-\u20DC\u20E1\u20E5-\u20EB\u302A-\u302F'+'\u3099-\u309A\uA802\uA806\uA80B\uA823-\uA827\uFB1E\uFE00-\uFE0F'+'\uFE20-\uFE23',o='\u0030-\u0039\u0660-\u0669\u06F0-\u06F9\u0966-\u096F\u09E6-\u09EF'+'\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F'+'\u0CE6-\u0CEF\u0D66-\u0D6F\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29'+'\u1040-\u1049\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9'+'\uFF10-\uFF19',p=m+n+l,q=o+'_',r=p+q,s='['+p+']',t='['+r+']',u='^|$|[^&'+r+']',v='[#\\uFF03]',w='('+u+')('+v+')('+t+'*'+s+t+'*)';return new RegExp(w,'ig');}e.exports=g;});
__d("HashtagParser",["URLMatcher","getHashtagRegex"],function(a,b,c,d,e,f,g,h){var i=100,j=30,k=/@\[([0-9]+):([0-9]+):((?:[^\\\]]*(?:\\.)*)*)\]/g;function l(da){var ea=y(da),fa=0,ga=0;return n(da).map(function(ha){while(fa<ea.length){var ia=ea[fa],ja=ia.offset-ga;if(ja<ha.offset){ga+=ia.token.length-ia.name.length;fa++;}else break;}return {marker:ha.marker,tag:ha.hashtag,rawOffset:ha.offset+ga,offset:ha.offset};});}function m(da){return o(da,t(da));}function n(da){var ea=aa(da);return o(ea,p(da,ea));}function o(da,ea){return r(da).slice(0,j).filter(function(fa){var ga=v(fa.offset,fa.hashtag.length,ea);return !ga&&fa.hashtag.length<=i;});}function p(da,ea){return u(s(da),t(ea));}var q=h();function r(da){var ea=[];da.replace(q,function(fa,ga,ha,ia,ja){ea.push({marker:ha,hashtag:ia,offset:ja+ga.length});});return ea;}function s(da){return ba(da).map(function(ea){return [ea.offset,ea.name.length];});}function t(da){var ea=[],fa,ga=0;while((fa=g.permissiveMatch(da))){var ha=da.indexOf(fa);ea.push([ga+ha,fa.length]);da=da.substring(ha+fa.length);ga+=ha+fa.length;}return ea;}function u(da,ea){var fa=[],ga=0,ha=0,ia=0;while(ga<da.length&&ha<ea.length)if(da[ga][0]>ea[ha][0]){fa[ia++]=ea[ha++];}else fa[ia++]=da[ga++];return fa.concat(da.slice(ga),ea.slice(ha));}function v(da,ea,fa){if(!fa)return false;var ga=x(fa,da);return w(da,ea,fa,ga)||w(da,ea,fa,ga+1);}function w(da,ea,fa,ga){if(!fa[ga])return false;var ha=fa[ga][0],ia=fa[ga][1];return !((da+ea-1<ha)||(da>ha+ia-1));}function x(da,ea){var fa=0,ga=da.length-1;while(fa<=ga){var ha=Math.floor((fa+ga)/2),ia=da[ha][0];if(ia==ea){return ha;}else if(ia<ea){fa=ha+1;}else ga=ha-1;}return ga;}function y(da){var ea=[];da.replace(k,function(fa,ga,ha,ia,ja){ea.push({token:fa,id:ga,type:ha,name:ia,offset:ja});});return ea;}function z(da){return da?da.replace(/\\([^\\])/g,'$1').replace(/\\\\/g,'\\'):null;}function aa(da){return da.replace(k,function(ea,fa,ga,ha,ia){return z(ha);});}function ba(da){var ea=0,fa=0;return y(da).map(function(ga){var ha=da.indexOf(ga.token,fa);fa=ha+1;ha-=ea;var ia=z(ga.name);ea+=ga.token.length-ia.length;if(ha>=0)return {id:ga.id,name:ia,type:ga.type,offset:ha};});}var ca={};ca.parse=l;ca.parseWithoutMentions=m;e.exports=ca;});
__d("throttle",["copyProperties"],function(a,b,c,d,e,f,g){function h(j,k,l){return i(j,k,l,false,false);}g(h,{acrossTransitions:function(j,k,l){return i(j,k,l,true,false);},withBlocking:function(j,k,l){return i(j,k,l,false,true);},acrossTransitionsWithBlocking:function(j,k,l){return i(j,k,l,true,true);}});function i(j,k,l,m,n){if(k==null)k=100;var o,p,q,r=function(){p=Date.now();if(o){j.apply(l,o);o=null;q=setTimeout(r,k,!m);}else q=false;};return function s(){o=arguments;if(!q||(Date.now()-p>k))if(n){r();}else q=setTimeout(r,0,!m);};}e.exports=h;});
__d("Tokenizer",["setTimeoutAcrossTransitions","CSS","DataStore","DOM","Stratcom","copyProperties","createDeprecatedProperties","destroyOnUnload","eventsMixinDeprecated"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(q){"use strict";this._containerNode=q;this._listeners=[];n(function(){while(this._listeners.length)this._listeners.pop().remove();this._listeners=null;}.bind(this));}p.prototype.start=function(){"use strict";this._orig=j.find(this._containerNode,'input','tokenizer-input');this._tokens=[];this._tokenMap={};var q=this.buildInput(this._orig.value);this._focus=q;var r=j.scry(this._containerNode,'div','tokenizer-input-container');r=r[0]||this._containerNode;this._listeners.push(j.listen(q,['click','focus','blur','keydown','keypress'],null,this.handleEvent.bind(this)),j.listen(r,'click',null,function(u){if(u.getNode('remove')){this._remove(i.get(u.getNode('token')).key);}else if(u.getTarget()==this._root)this.focus();}.bind(this)));var s=j.create('div');s.id=this._orig.id;h.conditionClass(s,'jx-tokenizer',true);s.style.cursor='text';this._root=s;s.appendChild(q);var t=this._typeahead;t.setInputNode(this._focus);t.start();g(function(){var u=this._orig.parentNode;j.setContent(u,s);var v=this._initialValue||{};for(var w in v)this.addToken(w,v[w],u);j.appendContent(s,j.create('div',{style:{clear:'both'}}));this._redraw();}.bind(this),0);};p.prototype.setInitialValue=function(q){"use strict";this._initialValue=q;return this;};p.prototype.setTypeahead=function(q){"use strict";q.setAllowNullSelection(false);q.removeListener();q.listen('show',function(r){if(this._tokenMap){var s=r.show,t=[];for(var u=0;u<s.length;++u){var v=s[u],w=j.scry(v,'a','typeahead-result')[0];if(w)w.removeAttribute('href');if(!(s[u].rel in this._tokenMap))t.push(s[u]);}s.length=0;s.push.apply(s,t);}}.bind(this));q.listen('choose',function(r){k.context().prevent();k.invoke('Tokenizer-addedtoken',null,r);if(this.addToken(r.rel,r.name,r)){if(this.shouldHideResultsOnChoose())this._typeahead.hide();this._typeahead.clear();this._redraw();this.focus();}}.bind(this));q.listen('query',function(r){if(r.length)k.context().prevent();}.bind(this));this._typeahead=q;n(this._typeahead.removeListener.bind(this._typeahead));return this;};p.prototype.shouldHideResultsOnChoose=function(){"use strict";return true;};p.prototype.handleEvent=function(q){"use strict";this._typeahead.handleEvent(q);if(q.getPrevented())return;if(q.getType()=='click'){if(q.getTarget()==this._root){this.focus();q.prevent();return;}}else if(q.getType()=='keydown'){this._onkeydown(q);}else if(q.getType()=='blur')this._redraw();};p.prototype.refresh=function(){"use strict";this._redraw(true);return this;};p.prototype._redraw=function(q){"use strict";var r=this._focus;if(r.value===this._lastvalue&&!q)return;this._lastvalue=r.value;var s=j.textMetrics(this._focus,'jx-tokenizer-metrics');s.y=null;s.x+=24;s.setDim(r);r.value=r.value;if(this._typeahead)this._typeahead.refresh();};p.prototype.addToken=function(q,r,s){"use strict";if(q in this._tokenMap)return false;var t=this._focus,u=this._root,v=this.buildToken(q,r,s);this._tokenMap[q]={value:r,key:q,node:v};this._tokens.push(q);u.insertBefore(v,t);return true;};p.prototype.clearTokens=function(){"use strict";for(var q in this._tokenMap){j.remove(this._tokenMap[q].node);delete this._tokenMap[q];}this.refresh();};p.prototype.removeToken=function(q){"use strict";if(q in this._tokenMap){j.remove(this._tokenMap[q].node);delete this._tokenMap[q];this._redraw(true);return true;}return false;};p.prototype.buildInput=function(q){"use strict";return j.create('input',{className:'jx-tokenizer-input',type:'text',autocomplete:'off',value:q});};p.prototype.buildToken=function(q,r,s){"use strict";var t=j.create('input',{type:'hidden',value:q,name:this._orig.name+'['+(this._seq++)+']'}),u=j.create('a',{className:'jx-tokenizer-x',sigil:'remove'},'\u00d7');return j.create('a',{className:'jx-tokenizer-token',sigil:'token',meta:{key:q}},[r,t,u]);};p.prototype.getTokens=function(){"use strict";var q={};for(var r in this._tokenMap)q[r]=this._tokenMap[r].value;return q;};p.prototype._onkeydown=function(q){"use strict";switch(q.getSpecialKey()){case 'tab':var r=this._typeahead.submit();if(this.getNextInput()){if(!r)this._focus.value='';g(function(){this.getNextInput().focus();}.bind(this),0);}break;case 'delete':if(!this._focus.value.length){var s;while(s=this._tokens.pop())if(this._remove(s))break;}break;case 'return':break;default:if(this.getLimit()&&Object.keys(this._tokenMap).length==this.getLimit())q.prevent();g(this._redraw.bind(this),0);break;}};p.prototype._remove=function(q){"use strict";var r=this.removeToken(q);if(r){this.focus();this.invoke('removed',q);}return r;};p.prototype.focus=function(){"use strict";var q=this._focus;j.show(q);g(function(){q.focus();},0);};o(p,['removed']);m(p,{limit:null,nextInput:null});l(p.prototype,{_containerNode:null,_root:null,_focus:null,_orig:null,_typeahead:null,_tokenid:0,_tokens:null,_tokenMap:null,_initialValue:null,_seq:0,_lastvalue:null});e.exports=p;});
__d("Typeahead",["setTimeoutAcrossTransitions","CSS","DOM","MTouchHelper","MViewport","Vector","copyProperties","createDeprecatedProperties","eventsMixinDeprecated"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(q,r){"use strict";this._hardpoint=q;this._control=r||i.find(q,'input');this._root=i.create('div',{className:'jx-typeahead-results',sigil:'jx-typeahead-results'});this._display=[];this._listener=i.listen(this._control,['focus','blur','keypress','keydown','input'],null,this.handleEvent.bind(this));i.listen(this._root,[j.EVT_TOUCHSTART,j.EVT_TOUCHEND,j.EVT_TOUCHCANCEL],'tag:a',this._handleRootTouch.bind(this));if(q.id)p._instances[q.id]=this;}p.prototype.start=function(){"use strict";this.invoke('start');};p.prototype.setTypeObjects=function(q){"use strict";this._typeObjects=q;};p.prototype.setTypeObjectsOrder=function(q){"use strict";this._typeObjectsOrder=q;};p.prototype.setDatasource=function(q){"use strict";if(this._datasource){this._datasource.unbindFromTypeahead();this._waitingListener.remove();this._readyListener.remove();}this._waitingListener=q.listen('waiting',this.waitForResults.bind(this));this._readyListener=q.listen('resultsready',this.showResults.bind(this));q.bindToTypeahead(this);this._datasource=q;};p.prototype.getDatasource=function(){"use strict";return this._datasource;};p.prototype.getTypeaheadType=function(){"use strict";return 'm_legacy';};p.prototype.setInputNode=function(q){"use strict";this._control=q;return this;};p.prototype.hide=function(){"use strict";this._changeFocus(Number.NEGATIVE_INFINITY);this._display=[];if(this._root)i.hide(this._root);this.invoke('hide');};p.prototype.showResults=function(q){"use strict";this.invoke('render_start');var r={show:q},s=this.invoke('show',r);if(this._typeObjects&&this._typeObjectsOrder){var t={};for(var u=0;u<q.length;u++){var v=q[u].firstElementChild?q[u].firstElementChild.getAttribute('renderType'):null;if(!v)continue;if(!(v in t))t[v]=[];t[v].push(q[u]);}var w=[];for(var x in this._typeObjectsOrder){v=this._typeObjectsOrder[x];var y=t[v];if(y){var z=document.createElement('div');i.setContent(z,this._typeObjects[v].xhp);w.push(z.firstChild);w.push.apply(w,y);}}i.setContent(this._root,w);}else i.setContent(this._root,q);this._display=i.scry(this._root,'a','typeahead-result');if(this._display.length&&!s.getPrevented()){this._changeFocus(Number.NEGATIVE_INFINITY);var aa=l.getDim(this._hardpoint);aa.x=0;aa.setPos(this._root);if(this._root.parentNode!==this._hardpoint)this._hardpoint.appendChild(this._root);i.show(this._root);}else{this.hide();i.setContent(this._root,null);}this._refreshViewport();};p.prototype.refresh=function(){"use strict";this._refreshViewport();if(this._stop)return;this._value=this._control.value;this.invoke('update',this._value);this.invoke('change',this._value,this._control);};p.prototype.waitForResults=function(){"use strict";this.hide();};p.prototype._changeFocus=function(q){"use strict";var r=Math.min(Math.max(-1,this._focus+q),this._display.length-1);if(!this.getAllowNullSelection())r=Math.max(0,r);if(this._focus>=0&&this._focus<this._display.length)h.conditionClass(this._display[this._focus],'focused',false);this._focus=r;this._drawFocus();return true;};p.prototype._drawFocus=function(){"use strict";var q=this._display[this._focus];if(q)h.conditionClass(q,'focused',true);};p.prototype._choose=function(q){"use strict";var r=this.invoke('choose',q);if(r.getPrevented())return;this._control.value=q.name;this.hide();};p.prototype.clear=function(){"use strict";this._control.value='';this._value='';this.invoke('clear');this.hide();};p.prototype.enable=function(){"use strict";this._control.disabled=false;this._stop=false;};p.prototype.disable=function(){"use strict";this._control.blur();this._control.disabled=true;this._stop=true;};p.prototype.submit=function(){"use strict";if(this._focus>=0&&this._display[this._focus]){this._choose(this._display[this._focus]);return true;}else{var q=this.invoke('query',this._control.value);if(q.getPrevented())return true;}return false;};p.prototype.setValue=function(q){"use strict";this._control.value=q;};p.prototype.getValue=function(){"use strict";return this._control.value;};p.prototype._refreshViewport=function(){"use strict";var q=this._display&&this._display.length;if(q&&!this._heightConstraint){var r=l.getPos(this._root).y,s=l.getDim(this._root).y,t=k.getBoundingRect().height;if(r+s>t){var u=k.getHeaderHeight()+r+s;this._heightConstraint=k.addMinHeightConstraint(u);}}else if(this._heightConstraint&&!q){this._heightConstraint.release();this._heightConstraint=null;}this.invoke('rendered');};p.prototype._update=function(event){"use strict";var q=event&&event.getSpecialKey();if(q&&event.getType()=='keydown')switch(q){case 'up':if(this._display.length&&this._changeFocus(-1))event.prevent();break;case 'down':if(this._display.length&&this._changeFocus(1))event.prevent();break;case 'return':if(this.submit()){event.prevent();return;}break;case 'esc':if(this._display.length&&this.getAllowNullSelection()){this.hide();event.prevent();}break;case 'tab':return;}g(function(){if(this._value==this._control.value)return;this.refresh();}.bind(this),0);};p.prototype.handleEvent=function(q){"use strict";this.invoke(q.getType(),q);if(this._stop||q.getPrevented())return;var r=q.getType();if(r=='blur'){this._hasFocus=false;g(function(){if(!this._hasFocus)this.hide();}.bind(this),this.getBlurDefer());}else if(r=='focus'){this._hasFocus=true;}else this._update(q);};p.prototype.removeListener=function(){"use strict";if(this._listener)this._listener.remove();};p.prototype._handleRootTouch=function(q){"use strict";if(q.getType()===j.EVT_TOUCHSTART){this._rootTouchPos=j.getTouchPageCoord(q);this._rootTouchLink=q.getNode('tag:a')||undefined;var r=this._display[this._focus];if(r){h.conditionClass(r,'focused',false);this._focus=-1;}}else if(this._rootTouchPos){if(this._rootTouchLink===q.getNode('tag:a')){var s=j.getTouchPageCoord(q),t=this._rootTouchPos,u=3;if((Math.abs(s.x-t.x)<u)&&(Math.abs(s.y-t.y)<u))this._choose(this._rootTouchLink);}delete this._rootTouchLink;delete this._rootTouchPos;}if(q.getType()===j.EVT_TOUCHEND)q.prevent();};p.getInstance=function(q){"use strict";return p._instances[q];};o(p,['choose','query','start','change','show','focus','blur','keypress','keydown','input','hide','clear','render_start','rendered','update','scroll']);n(p,{allowNullSelection:true,normalizer:null,blurDefer:0});m(p.prototype,{_root:null,_control:null,_hardpoint:null,_listener:null,_value:null,_stop:false,_focus:-1,_display:[],_hasFocus:false,_datasource:null,_waitingListener:null,_readyListener:null,_typeObjects:null,_typeObjectsOrder:null,_heightConstraint:null});m(p,{_instances:{}});e.exports=p;});
__d("TypeaheadNormalizer",[],function(a,b,c,d,e,f){var g={normalize:function(h){return (''+h).toLocaleLowerCase().replace(/[\.,-\/#!$%\^&\*;:{}=\-_`~()]/g,'').replace(/ +/g,' ').replace(/^\s*|\s*$/g,'');}};e.exports=g;});
__d("TypeaheadInternationalNormalizer",["TypeaheadNormalizer"],function(a,b,c,d,e,f,g){var h={normalize:function(i){var j=h._charmap;return g.normalize(i).replace(/[\u00e0-\u0450]/g,function(k){return (k in j?j[k]:k);});},_charmap:{'\u00e0':'a','\u00e1':'a','\u00e2':'a','\u00e3':'a','\u00e4':'a','\u00e5':'a','\u00e6':'ae','\u00e7':'c','\u00e8':'e','\u00e9':'e','\u00ea':'e','\u00eb':'e','\u00ec':'i','\u00ed':'i','\u00ee':'i','\u00ef':'i','\u00f0':'d','\u00f1':'n','\u00f2':'o','\u00f3':'o','\u00f4':'o','\u00f5':'o','\u00f6':'o','\u00f8':'o','\u00f9':'u','\u00fa':'u','\u00fb':'u','\u00fc':'u','\u00fd':'y','\u00ff':'y','\u0153':'oe','\u0430':'a','\u0431':'b','\u0432':'v','\u0433':'g','\u0434':'d','\u0435':'e','\u0437':'z','\u0438':'i','\u0439':'j','\u043a':'k','\u043b':'l','\u043c':'m','\u043d':'n','\u043e':'o','\u043f':'p','\u0440':'r','\u0441':'s','\u0442':'t','\u0443':'u','\u0444':'f','\u0445':'h','\u0446':'c','\u0447':'ch','\u0448':'sh','\u044b':'y','\u044d':'e','\u044e':'u','\u044f':'ya'}};e.exports=h;});
__d("TypeaheadSource",["DOM","TypeaheadNormalizer","copyProperties","createDeprecatedProperties","eventsMixinDeprecated"],function(a,b,c,d,e,f,g,h,i,j,k){function l(m){"use strict";m=m||{};this.disableLongerQueryCacheHit=m.disableLongerQueryCacheHit;this._raw={};this._lookup={};this._firstSeenOnValue={};this.setNormalizer(h.normalize);this._excludeIDs={};}l.prototype.bindToTypeahead=function(m){"use strict";this._changeListener=m.listen('change',this.didChange.bind(this));this._startListener=m.listen('start',this.didStart.bind(this));this._clearListener=m.listen('clear',this.didClear.bind(this));};l.prototype.unbindFromTypeahead=function(){"use strict";this._changeListener.remove();this._startListener.remove();this._clearListener.remove();this._clearListener=null;};l.prototype.didChange=function(m){"use strict";return;};l.prototype.didStart=function(){"use strict";return;};l.prototype.didClear=function(){"use strict";return;};l.prototype.clearCache=function(){"use strict";this._raw={};this._lookup={};};l.prototype.addExcludeID=function(m){"use strict";if(m)this._excludeIDs[m]=true;};l.prototype.removeExcludeID=function(m){"use strict";if(m)delete this._excludeIDs[m];};l.prototype.addResult=function(m,n){"use strict";m=(this.getTransformer()||this._defaultTransformer)(m);if(m.id in this._raw)return;this._raw[m.id]=m;this._firstSeenOnValue[m.id]=this._firstSeenOnValue[m.id]||n;var o=this.tokenize(m.tokenizable||m.name);for(var p=0;p<o.length;++p){this._lookup[o[p]]=this._lookup[o[p]]||[];this._lookup[o[p]].push(m.id);}};l.prototype.waitForResults=function(){"use strict";this.invoke('waiting');return this;};l.prototype.getResult=function(m){"use strict";return this._raw[m];};l.prototype.emptyResults=function(){"use strict";return [];};l.prototype.getMatchedResults=function(m){"use strict";var n=[];if(m===''){n=this.emptyResults();}else{var o=m,p={},q={},r={},s={},t=this.getQueryExtractor();if(t)m=t(m);var u=this.tokenize(m),v=u[u.length-1];u.sort(function(ea,fa){return fa.length-ea.length;});for(var w=0;w<u.length;++w){if(u[w] in s){u.splice(w--,1);continue;}s[u[w]]=true;var x=u[w];for(var y in this._lookup){var z=this.checkFragmentMatches(y,x,o,v);if(z){if(!(y in r)){r[y]=true;}else continue;var aa=this._lookup[y];for(var ba=0;ba<aa.length;++ba){var ca=aa[ba];if(!q[ca])q[ca]={};if(!(x in q[ca])){q[ca][x]=true;p[ca]=(p[ca]||0)+1;}}}}}for(var da in p)if(p[da]==u.length&&!this._excludeIDs[da]&&(!this.disableLongerQueryCacheHit||!this._firstSeenOnValue[da]||this._firstSeenOnValue[da].length<=m.length))n.push(da);}this.sortHits(m,n);return this.renderNodes(m,n);};l.prototype.checkFragmentMatches=function(m,n,o,p){"use strict";return m.substr(0,n.length)===n;};l.prototype.matchResults=function(m){"use strict";var n=this.getMatchedResults(m);this.invoke('resultsready',n);this.invoke('complete');};l.prototype.sortHits=function(m,n){"use strict";var o=[],p;for(p=0;p<n.length;p++)o.push(this._raw[n[p]]);var q=function(s,t){var u=s.sort||s.name,v=t.sort||t.name;return u.localeCompare(v);},r=this.getSortHandler()||function(s,t,u){t.sort(u);};r.call(this,m,o,q);n.splice(0,n.length);for(p=0;p<o.length;p++)n.push(o[p].id);};l.prototype.renderNodes=function(m,n){"use strict";var o=Math.min(this.getMaximumResultCount(),n.length),p=[];for(var q=0;q<o;q++)if(n[q] in this._raw){var r=this._raw[n[q]];if(!this.reactRendered)r=this.createNode(r);p.push(r);}return p;};l.prototype.createNode=function(m){"use strict";return g.create('a',{sigil:'typeahead-result',href:m.uri,name:m.name,rel:m.id,className:'jx-result'},m.display);};l.prototype.normalize=function(m){"use strict";return this.getNormalizer()(m);};l.prototype.tokenize=function(m){"use strict";m=this.normalize(m);if(!m.length)return [];return m.split(/\s/g);};l.prototype._defaultTransformer=function(m){"use strict";return {name:m[0],display:m[0],uri:m[1],id:m[2]};};k(l,['waiting','resultsready','complete','after_complete','initial_render','initial_results_ready','req_dispatch','req_sent','req_recv','unlock_render']);j(l,{normalizer:null,queryExtractor:null,transformer:null,maximumResultCount:5,sortHandler:null});i(l.prototype,{_raw:null,_lookup:null,_firstOnValue:null,_excludeIDs:null,_changeListener:null,_startListener:null,_clearListener:null,reactRendered:false});e.exports=l;});
__d("TypeaheadOnDemandSource",["setTimeoutAcrossTransitions","TypeaheadSource","copyProperties","createDeprecatedProperties"],function(a,b,c,d,e,f,g,h,i,j){for(var k in h)if(h.hasOwnProperty(k))m[k]=h[k];var l=h===null?null:h.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=h;function m(n,o){"use strict";h.call(this,o);this.uri=n;this.haveData={'':true};}m.prototype.didChange=function(n){"use strict";this.lastChange=Date.now();n=this.normalize(n);if(this.haveData[n]){this.matchResults(n);}else{this.waitForResults();g(this.sendRequest.bind(this,this.lastChange,n),this.getQueryDelay());}};m.prototype.sendRequest=function(){"use strict";throw new Error('Use MTypeaheadOnDemandSource!');};m.prototype.ondata=function(n,o,p){"use strict";if(p)for(var q=0;q<p.length;q++)this.addResult(p[q],o);this.haveData[o]=true;if(n!=this.lastChange)return;this.matchResults(o);};j(m,{queryDelay:125,auxiliaryData:{}});i(m.prototype,{uri:null,lastChange:null,haveData:null});e.exports=m;});
__d("TypeaheadCompositeSource",["TypeaheadSource","TypeaheadOnDemandSource","copyProperties"],function(a,b,c,d,e,f,g,h,i){for(var j in g)if(g.hasOwnProperty(j))l[j]=g[j];var k=g===null?null:g.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=g;function l(m){"use strict";g.call(this);this.sources=m;this.cacheSourceCount=m.length;this.delayRender=false;for(var n=0;n<this.sources.length;++n){var o=this.sources[n];o.listen('waiting',this.childWaiting.bind(this));o.listen('resultsready',this.childResultsReady.bind(this));o.listen('complete',this.childComplete.bind(this));if(o instanceof h){o.listen('req_dispatch',this.childRequestDispatch.bind(this));o.listen('req_sent',this.childRequestSent.bind(this));o.listen('req_recv',this.childRequestReceived.bind(this));o.listen('unlock_render',this.startRender.bind(this));if(o.enableImmediateReturnOfCachedResults===false)--this.cacheSourceCount;if(o.enableEagerSendRequest)this.delayRender=true;this.listen('initial_results_ready',o.setCacheResultsLength.bind(o));}}}l.prototype.didChange=function(m){"use strict";this.results=[];this.completeCount=0;this.readyCount=0;this.lockRender=true;for(var n=0;n<this.sources.length;++n)this.sources[n].didChange(m);};l.prototype.didStart=function(){"use strict";for(var m=0;m<this.sources.length;++m)this.sources[m].didStart();};l.prototype.didClear=function(){"use strict";this.results=[];};l.prototype.childWaiting=function(){"use strict";if(!this.results||!this.results.length)this.invoke('waiting');};l.prototype.childResultsReady=function(m){"use strict";this.results=this.mergeResults(this.results||[],m);++this.readyCount;if(this.readyCount==this.cacheSourceCount)this.invoke('initial_results_ready',this.countValidResults(this.results));if(!this.delayRender||!this.lockRender){this.invoke('resultsready',this.results);if(this.readyCount==this.cacheSourceCount)this.invoke('initial_render');}};l.prototype.childComplete=function(){"use strict";this.completeCount++;if(this.completeCount==this.sources.length){this.invoke('complete');this.invoke('after_complete');}};l.prototype.childRequestDispatch=function(m){"use strict";this.invoke('req_dispatch',m);};l.prototype.childRequestSent=function(){"use strict";this.invoke('req_sent');};l.prototype.childRequestReceived=function(m){"use strict";this.invoke('req_recv',m);};l.prototype.startRender=function(){"use strict";this.lockRender=false;this.invoke('resultsready',this.results);this.invoke('initial_render');};l.prototype.countValidResults=function(m){"use strict";var n=0;m.forEach(function(o){if(o[this.mergeKey])++n;},this);return n;};l.prototype.getResult=function(m){"use strict";var n;for(var o=0;o<this.sources.length;++o){n=this.sources[o].getResult(m);if(n!==undefined)break;}return n;};l.prototype.mergeResults=function(m,n){"use strict";var o=[].concat(m);if(n.length===0)return o;var p={},q;for(q=0;q<m.length;++q)p[m[q][this.mergeKey]]=true;for(q=0;q<n.length;++q)if(!(n[q][this.mergeKey] in p))o.push(n[q]);return o;};i(l.prototype,{sources:null,results:null,completeCount:0,mergeKey:'rel'});e.exports=l;});
__d("TypeaheadPreloadedSource",["TypeaheadSource","copyProperties"],function(a,b,c,d,e,f,g,h){for(var i in g)if(g.hasOwnProperty(i))k[i]=g[i];var j=g===null?null:g.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=g;function k(l){"use strict";g.call(this);this.uri=l;}k.prototype.didChange=function(l){"use strict";if(this.ready){this.matchResults(l);}else{this.lastValue=l;this.waitForResults();}};k.prototype.didStart=function(){"use strict";throw new Error('Use MTypeaheadPreloadedSource!');};k.prototype.ondata=function(l){"use strict";for(var m=0;m<l.length;++m)this.addResult(l[m]);if(this.lastValue!==null)this.matchResults(this.lastValue);this.ready=true;};h(k.prototype,{ready:false,uri:null,lastValue:null});e.exports=k;});
__d("MTouchTransferFocus",["CSS","DOM","Stratcom","MViewport","DataStore"],function(a,b,c,d,e,f,g,h,i,j,k){var l='transfer-focus-container',m='focus-provider',n='focus-receiver',o='focused';i.listen(['click','touchend'],[l,m],function(p){var q=p.getNode(m),r=k.get(q);if(r.onclickIsSet)return;var s=p.getNode(l);q.onclick=function(){g.conditionClass(s,o,true);var t=h.scry(s,'input',n)[0];if(t){t.focus();var u=k.get(s);if(u.hideaddressbar)setTimeout(function(){if(j.getScrollTop()<1)j.scrollTo(0,1);},0);}};r.onclickIsSet=true;});i.listen('blur',[l,n],function(p){g.conditionClass(p.getNode(l),o,false);});});
__d("MTokenizer",["DOM","Tokenizer","copyProperties","createDeprecatedProperties","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){for(var l in h)if(h.hasOwnProperty(l))n[l]=h[l];var m=h===null?null:h.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=h;function n(o){"use strict";h.call(this,o);}n.prototype.buildInput=function(o){"use strict";var p=g.create('input',{type:'text',className:'jx-tokenizer-input',sigil:'tokenizer-input focus-receiver',placeholder:this.getPlaceholder(),value:o});p.setAttribute('autocomplete','off');p.setAttribute('autocapitalize','off');p.setAttribute('autocorrect','off');p.setAttribute('aria-label',"List of results will show up below");if(this.getPlaceholder()){this.placeholderWidth=n.estimatePlaceholderWidth(p)+'px';p.style.minWidth=this.placeholderWidth;}return p;};n.prototype.start=function(){"use strict";this._containerNode.tokenizer=this;h.prototype.start.call(this);if(this.getLabel()){var o=g.create('span',{className:'mTokenizerLabel'},this.getLabel());this._root.insertBefore(o,this._focus);}this.listen('removed',this.removedToken.bind(this));};n.prototype.removedToken=function(){"use strict";if(Object.keys(this._tokenMap).length===0){this._focus.placeholder=this.getPlaceholder();this._focus.style.minWidth=this.placeholderWidth;}if(this.hasMaxTokens&&this.getLimit()&&Object.keys(this._tokenMap).length<this.getLimit()){g.show(this._focus);this._typeahead._control.disabled=false;this._typeahead._stop=false;this._typeahead.refresh();this.hasMaxTokens=false;}};n.prototype.addToken=function(o,p,q){"use strict";if(this.hasMaxTokens)return false;var r=h.prototype.addToken.call(this,o,p,q);if(!this.hasMaxTokens&&this.getLimit()&&Object.keys(this._tokenMap).length>=this.getLimit()){this._typeahead.hide();this._typeahead.disable();g.hide(this._focus);this.hasMaxTokens=true;}return r;};n.prototype.removeToken=function(o){"use strict";var p=h.prototype.removeToken.call(this,o);p&&this.removedToken();return p;};n.prototype.buildToken=function(o,p,q){"use strict";var r=g.create('input',{type:'hidden',value:o,name:this._orig.name+'['+(this._seq++)+']'}),s=null;if(q.getAttribute('weak_reference'))s=g.create('i',{className:'mWeakReferenceIcon'});var t=this.getRemovableTokens()?g.create('span',{},'\u00a0\u00d7\u00a0'):null,u=g.create('a',{className:'touchable mCloseBtn',href:'#',sigil:'blocking-touchable remove'},t);u.setAttribute('aria-label',"Remove");this._focus.placeholder='';this._focus.style.minWidth=0;var v='mToken',w=this.getExtraCSSClassesFromContext(q);if(w)v+=(' '+w);return g.create('span',{className:v,sigil:'token',meta:{key:o}},[s,p,r,u]);};n.prototype.getExtraCSSClassesFromContext=function(o){"use strict";if(o.getAttribute('weak_reference'))return 'mTokenWeakReference';return '';};n.prototype.getTypeahead=function(){"use strict";return this._typeahead;};n.prototype.focus=function(){"use strict";};n.estimatePlaceholderWidth=function(o){"use strict";var p=o.value;o.value=o.placeholder;var q=g.textMetrics(o,'jx-tokenizer-metrics');o.value=p;return q.x;};j(n,{label:null,placeholder:null,removableTokens:true});i(n.prototype,{placeholderWidth:null,hasMaxTokens:false});e.exports=n;});
__d("MTokenizerWithExclusions",["MTokenizer","Stratcom"],function(a,b,c,d,e,f,g,h){for(var i in g)if(g.hasOwnProperty(i))k[i]=g[i];var j=g===null?null:g.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=g;function k(l,m){"use strict";g.call(this,l);var n=this.removeTokens.bind(this);h.listen('mtypeahead:exclusions',m,function(o){n(o.getData().ids);});}k.prototype.removeTokens=function(l){"use strict";for(var m=0;m<l.length;++m)this._remove(l[m]);};e.exports=k;});
__d("MTokenizerWithSuggestions",["setTimeoutAcrossTransitions","CSS","DOM","MTokenizer","copyProperties","createDeprecatedProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l){for(var m in j)if(j.hasOwnProperty(m))o[m]=j[m];var n=j===null?null:j.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=j;function o(p){"use strict";j.call(this,p);}o.prototype.start=function(){"use strict";j.prototype.start.call(this);h.conditionClass(this._containerNode,'suggestions',true);var p=i.scry(this._containerNode,'div','tokenizer-suggestions-label');if(p.length){this.setLabel(p[0]);i.remove(p[0]);}this.listen('removed',function(){g(this._typeahead.refresh.bind(this._typeahead),0);}.bind(this));};o.prototype.setTypeahead=function(p){"use strict";j.prototype.setTypeahead.call(this,p);p.setBlurDefer(o.blurDefer);p.listen('choose',function(q){g(function(){this._typeahead.refresh();}.bind(this),0);}.bind(this));p.listen('show',function(q){var r=q.show,s=[],t=o.maxSuggestions;for(var u=0;u<r.length;++u)if(!(r[u].rel in this._tokenMap)){s.push(r[u]);if(s.length>=t)break;}var v=this.getLabel();if(v&&v.length>0&&s.length&&p.getValue()==='')s.unshift(v);r.length=0;r.push.apply(r,s);}.bind(this));};o.prototype.shouldHideResultsOnChoose=function(){"use strict";return this.getFocused();};o.prototype.updateSuggestionsIds=function(p){"use strict";this._typeahead._datasource.setSuggestionsIds(p);this._typeahead.refresh();};o.prototype.handleEvent=function(p){"use strict";var q=p.getType();if(q=='focus'||q=='blur'){this.setFocused(q=='focus');g(function(){this._typeahead.refresh();}.bind(this),o.blurDefer);p.stop();}else j.prototype.handleEvent.call(this,p);};l(o,{focused:false,label:null});k(o,{maxSuggestions:50,blurDefer:500});e.exports=o;});
__d("MTypeaheadHelpers",["CSS","DOM","DataStore","HTML","MDynaTemplate","FWLoader"],function(a,b,c,d,e,f,g,h,i,j,k){var l=b('FWLoader').FW,m={getSecondaryAction:function(n){if(n.action=='phone'){return this.getPhoneAction(n);}else if(n.action=='add_friend'){return this.getAddAction(n);}else if(n.action=='add_contact'){return this.getAddContactAction(n);}else if(n.action=='message')return this.getMessageAction(n);return null;},getPhoneAction:function(n){if(!n.paths||!(n.paths.mobile||n.paths.sms))return null;var o=k.renderToHtml('@CallButtonTemplate',{call_uri:n.paths.mobile,call_style:n.paths.mobile?'':'display:none;',sms_uri:n.paths.sms,sms_style:n.paths.sms?'':'display:none;'});return new j(o);},getAddAction:function(n){if(!n.paths||!n.paths[n.action])return null;return new j(n.paths[n.action]);},getAddContactAction:function(n){if(!n.paths||!n.paths[n.action])return null;return n.paths[n.action];},getMessageAction:function(n){var o=k.renderToHtml('@MessageButtonTemplate',{message_uri:n.paths.message});return new j(o);},determineIconSize:function(n,o){var p=43,q=43,r=new Image(),s=function(t){var u=this;if(t.type==='load'){var v=document.getElementById(u.targetID);if(v){if(u.naturalWidth>q||u.naturalHeight>p){var w=window.devicePixelRatio,x=Math.round(u.naturalHeight/w),y=Math.round(u.naturalWidth/w);x=Math.min(x,p);y=Math.min(y,q);v.style.backgroundSize=y<x?y+'px auto':'auto '+x+'px';}v.style.backgroundImage='url('+u.src+')';}}u.onload=null;u.onerror=null;u.targetID=null;};r.targetID=n;r.onload=s;r.onerror=s;r.src=o;},createNode:function(n,o){var p=[];if(n.photo){var q=h.create('div',{className:'profile-icon'});p.push(q);this.determineIconSize(h.uniqID(q),n.photo);}var r=[n.display];if(n.verified)r.push(n.verified);var s=h.create('i',{className:'img presence',sigil:'presence'},'');h.hide(s);r.push(s);var t=h.create('span',{className:'mfsl'},r);p.push(t);if(!n.photo)g.conditionClass(t,'noimage',true);var u=n.subtext;g.conditionClass(t,'name',true);if(n.action!='add_friend')if(n.type&&(n.type!='user'))u=u?n.type+' '+String.fromCharCode(183)+' '+u:n.type;if(u)p.push(h.create('span',{className:'subtext mfss fcg'},u));var v={href:n.uri,name:n.display||n.name,className:'primary touchable',sigil:'touchable typeahead-result',rel:n.id};if(n.meta)v.meta=n.meta;var w=h.create('a',v,p);w.setAttribute("data-testid",n.id);if(n.weak_reference)w.setAttribute('weak_reference',true);if(n.renderType)w.setAttribute('renderType',n.renderType);if(window.FW_ENABLED&&l.isIOS())i.set(w,{nativeClick:true});if(n.bootstrap)i.set(w,{bootstrap:1});if(n.gender)i.set(w,{gender:n.gender});if(n.untranslatedType)i.set(w,{type:n.untranslatedType});if(n.openinnewtab)w.setAttribute('target','_blank');var x=[w];if(o){var y=this.getSecondaryAction(n);if(y)x.push(y);}if(n.nativethirdpartyappicon)x.push(new j(k.renderToHtml('@NativeThirdPartyAppIconTemplate')));var z='jx-result';if(n.nativethirdpartyappicon||(o&&this.getSecondaryAction(n)))z+=' hasSecondaryAction';if(n.action=='add_friend'&&n.addfriendtemplate)k.renderToHtml('@AddFriendLoadResourcesTemplate');return h.create('div',{className:z,sigil:'jx-result'+(n.action=='add_friend'?' undoable-action':''),rel:n.id,renderType:n.renderType,type:n.untranslatedType},x);}};e.exports=m;});
__d("MTypeaheadOnDemandSource",["setTimeoutAcrossTransitions","MRequest","MTypeaheadHelpers","Stratcom","TypeaheadInternationalNormalizer","TypeaheadNormalizer","TypeaheadOnDemandSource","copyProperties","createDeprecatedProperties","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){for(var q in m)if(m.hasOwnProperty(q))s[q]=m[q];var r=m===null?null:m.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=m;function s(t,u){"use strict";this.previousResults=null;m.call(this,t,u);this.setNormalizer(k.normalize);this.setSanitizer(l.normalize);this._allowFreeformEntry=false;this._cacheResultsLength=0;this._maxResults=1e+06;j.listen('m-typeahead-logger:new-session-id',null,function(v){this._sessionID=v.getData().sessionID;}.bind(this));}s.prototype.setAllowFreeformEntry=function(t){"use strict";this._allowFreeformEntry=t;};s.prototype.createNode=function(t){"use strict";return i.createNode(t,this.getShowSecondaryAction());};s.prototype.didChange=function(t){"use strict";this.lastChange=Date.now();var u=(this.getSanitizer())(t);if(this.haveData[u]){var v=this.normalize(u),w=this.getMatchedResults(v);this.invoke('resultsready',w);if(this.enableEagerSendRequest)this.invoke('unlock_render');this.invoke('complete');}else{if(this.enableImmediateReturnOfCachedResults===true){this.previousResults=this.getMatchedResults(t);this.invoke('resultsready',this.previousResults);}else this.previousResults=null;if(this._cacheResultsLength>=this._maxResults){if(this.enableEagerSendRequest)this.invoke('unlock_render');this.invoke('complete');return;}if(!this.enableEagerSendRequest)this.waitForResults();this.invoke('req_dispatch',this._sessionID);if(this.throttleSendRequest){this.throttleSendRequest(this.lastChange,t);}else g(this.sendRequest.bind(this,this.lastChange,t),this.getQueryDelay());if(this.enableEagerSendRequest){this.invoke('unlock_render');this.waitForResults();}}};s.prototype.setEnableImmediateReturnOfCachedResults=function(t){"use strict";this.enableImmediateReturnOfCachedResults=t;};s.prototype.setEnableEagerSendRequest=function(t){"use strict";this.enableEagerSendRequest=t;};s.prototype.setThrottleSendRequest=function(t){"use strict";this.throttleSendRequest=p.acrossTransitionsWithBlocking(this.sendRequest.bind(this),t);};s.prototype.setCacheResultsLength=function(t){"use strict";this._cacheResultsLength=t;};s.prototype.setMaxResults=function(t){"use strict";this._maxResults=t;};s.prototype.sendRequest=function(t,u){"use strict";if(t!=this.lastChange)return;var v=new h(this.uri);v.setData(n(this.getAuxiliaryData(),{q:u,session_id:this._sessionID}));v.setMethod('GET');v.listen('done',function(w,x,y){this.ondata(w,x,y);}.bind(this,this.lastChange,u));v.send();this.invoke('req_sent');};s.prototype.ondata=function(t,u,v){"use strict";this.invoke('req_recv',v?v.length:0);var w=0,x=0,y={};if(this.previousResults!=null){x=this.previousResults.length;for(w=0;w<this.previousResults.length;w++){var z=this.previousResults[w];z.idx=w;this._raw[z.id]=z;this.addToLookup(z.id,u);y[z.id]=z.id;}}if(v){if(v.length!==0){var aa;for(aa=0;aa<v.length;++aa)v[aa].idx=aa+x;for(aa=0;aa<v.length;aa++)if(!(v[aa].uid in y))this.addResult(v[aa],u);}else if(this._allowFreeformEntry)this.addResult({text:u,uid:0,path:'#'},u);this.haveData[u]=true;if(t!=this.lastChange)return;this.matchResults(u);}};s.prototype.addResult=function(t,u){"use strict";var v=this.addToLookup.bind(this);if(t.uid in this._raw)this._raw[t.uid].idx=t.idx;t=(this.getTransformer()||this._defaultTransformer)(t);this._firstSeenOnValue[t.id]=this._firstSeenOnValue[t.id]||u;if(!(t.id in this._raw)){this._raw[t.id]=t;v(t.id,t.name);v(t.id,u);}else{this._raw[t.id]=t;v(t.id,u);}};s.prototype.addToLookup=function(t,u){"use strict";var v=this.tokenize(u);for(var w=0;w<v.length;++w){this._lookup[v[w]]=this._lookup[v[w]]||[];this._lookup[v[w]].push(t);}};s.prototype.sortHits=function(t,u){"use strict";var v=function(w,x){var y=this._raw[w],z=isNaN(y.idx)?Number.MAX_VALUE:y.idx,aa=this._raw[x],ba=isNaN(aa.idx)?Number.MAX_VALUE:aa.idx;return z-ba;}.bind(this);u.sort(v);};s.prototype.renderNodes=function(t,u){"use strict";return m.prototype.renderNodes.apply(this,arguments);};o(s,{sanitizer:null,transformer:function(t){return {name:t.text,uri:t.path,id:t.uid,photo:t.photo,display:t.display||t.text,action:t.action,paths:t.paths,permissions:t.permissions,type:t.type,openinnewtab:t.openinnewtab,subtext:t.subtext,nativethirdpartyappicon:t.nativethirdpartyappicon,idx:t.idx,renderType:t.render_type,untranslatedType:t.untranslated_type,verified:t.verified,weak_reference:t.weak_reference,city_id:t.city_id,city_text:t.city_text};},showSecondaryAction:true});e.exports=s;});
__d("MTypeaheadCachableSource",["MCache","MRequest","TypeaheadPreloadedSource","copyProperties","createDeprecatedProperties","eventsMixinDeprecated"],function(a,b,c,d,e,f,g,h,i,j,k,l){for(var m in i)if(i.hasOwnProperty(m))o[m]=i[m];var n=i===null?null:i.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=i;function o(p,q){"use strict";i.call(this,p);this.sourceKey=q||null;}o.prototype.didStart=function(){"use strict";var p=this.ondata,q=o._bootstrapping;if(this.sourceKey){if(q[this.sourceKey]===true){o.listen('bootstrapped',function(s){s.source_key===this.sourceKey&&this.didStart();}.bind(this));return;}var r=o._fetchFromCache(this.sourceKey,this.uri);if(r){this.invoke('rawresultsready',r);p.call(this,r);return;}}this.sendRequest();};o.prototype.sendRequest=function(){"use strict";var p=o._bootstrapping;p[this.sourceKey]=true;var q=new h(this.uri);q.setAutoProcess(false);q.listen('done',function(r){r=r.payload||r;if(this.sourceKey){var s=o.getKeyForSource(this.sourceKey),t=g.getItem(s)||{};t[this.uri]=r;g.setItem(s,t);}this.invoke('rawresultsready',r);this.ondata.call(this,r);delete p[this.sourceKey];this.invoke('bootstrapped',{source_key:this.sourceKey});}.bind(this));q.listen('finally',function(){delete p[this.sourceKey];}.bind(this));q.listen('open',function(){var r=q.getTransport();r.withCredentials=true;if(window.FW_ENABLED&&!this.getNofwheaders()){r.setRequestHeader('FB_FW','1');if(window.FB_FW_VERSION)r.setRequestHeader('FB_FW_VERSION',window.FB_FW_VERSION);if(window.FB_FW_DEVICE)r.setRequestHeader('FB_FW_DEVICE',window.FB_FW_DEVICE);}}.bind(this));if(this.getAuxiliaryData())q.setData(this.getAuxiliaryData());q.setMethod('GET');q.send();};o._fetchFromCache=function(p,q){"use strict";var r=g.getItem(o.getKeyForSource(p));if(r){var s=r[q];if(s)return s;}return null;};l(o,['bootstrapped','rawresultsready']);k(o,{nofwheaders:false,showSecondaryAction:false,auxiliaryData:{}});j(o,{_KEY:'typeahead',getKeyForSource:function(p){return o._KEY+'_'+p;},_bootstrapping:{}});j(o.prototype,{sourceKey:null});e.exports=o;});
__d("MTypeaheadTouchSource",["MTypeaheadCachableSource","MTypeaheadHelpers","TypeaheadInternationalNormalizer","createDeprecatedProperties"],function(a,b,c,d,e,f,g,h,i,j){for(var k in g)if(g.hasOwnProperty(k))m[k]=g[k];var l=g===null?null:g.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=g;function m(n,o){"use strict";g.call(this,n,o);this.setNormalizer(i.normalize);}m.prototype.createNode=function(n){"use strict";return h.createNode(n,this.getShowSecondaryAction());};m.prototype.matchResults=function(n){"use strict";var o=this.normalize(n);g.prototype.matchResults.call(this,o);};m.prototype.ondata=function(n){"use strict";for(var o=0;o<n.length;++o)n[o].idx=o;g.prototype.ondata.apply(this,[n]);};j(m,{transformer:function(n){return {name:n.text,uri:n.path,id:n.uid,photo:n.photo,gender:n.gender,display:n.display||n.text,action:n.action,paths:n.paths,permissions:n.permissions,type:n.type,openinnewtab:n.openinnewtab,subtext:n.subtext,nativethirdpartyappicon:n.nativethirdpartyappicon,bootstrap:n.bootstrap,idx:n.idx,tokenType:n.tokenType,renderType:n.render_type,untranslatedType:n.untranslated_type,weak_reference:n.weak_reference,verified:n.verified};},sortHandler:function(n,o,p){var q=function(r,s){var t=isNaN(r.idx)?Number.MAX_VALUE:r.idx,u=isNaN(s.idx)?Number.MAX_VALUE:s.idx;return t-u;};o.sort(q);}});e.exports=m;});
__d("MTypeaheadSourceWithExclusions",["MTypeaheadTouchSource","Stratcom"],function(a,b,c,d,e,f,g,h){for(var i in g)if(g.hasOwnProperty(i))k[i]=g[i];var j=g===null?null:g.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=g;function k(l,m,n){"use strict";g.call(this,l,m);var o=this.addExcludeID.bind(this);h.listen('mtypeahead:exclusions',n,function(p){var q=p.getData().ids;for(var r=0;r<q.length;++r)o(q[r]);});}k.prototype.sortHits=function(l,m){"use strict";for(var n=m.length-1;n>=0;--n)if(this._excludeIDs[m[n]])m.splice(n,1);g.prototype.sortHits.apply(this,arguments);};e.exports=k;});
__d("MTypeaheadTouchSourceWithSuggestions",["setTimeoutAcrossTransitions","MTypeaheadTouchSource","createDeprecatedProperties"],function(a,b,c,d,e,f,g,h,i){for(var j in h)if(h.hasOwnProperty(j))l[j]=h[j];var k=h===null?null:h.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=h;function l(m,n,o){"use strict";h.call(this,m,n);this.setSuggestions(o);var p=[];for(var q=0;q<o.length;++q){this.addResult(o[q]);p.push(o[q].uid);}this.setSuggestionsIds(p);this.setDefaultSuggestionsIds(p);}l.prototype.didStart=function(){"use strict";h.prototype.didStart.call(this);g((function(){var m=this.renderNodes(null,this.getSuggestionsIds());this.invoke('resultsready',m);this.invoke('complete');}.bind(this)),0);};l.prototype.matchResults=function(m){"use strict";if(m.length===0){var n=this.getSuggestionsIds();if(this.getSuggestionsIds().length===0)n=this.getDefaultSuggestionsIds();var o=this.renderNodes(null,n);this.invoke('resultsready',o);this.invoke('complete');}else h.prototype.matchResults.call(this,m);};i(l,{suggestions:[],suggestionsIds:[],defaultSuggestionsIds:[]});e.exports=l;});
__d("InitMTokenizer",["copyProperties","$","MTokenizer","MTokenizerWithExclusions","MTokenizerWithSuggestions","MTypeaheadOnDemandSource","MTypeaheadSourceWithExclusions","MTypeaheadTouchSource","MTypeaheadTouchSourceWithSuggestions","Stratcom","Typeahead","TypeaheadCompositeSource"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=function(t){var u=null,v=null,w=t.element;if(t.id)w=document.getElementById(t.id);if(t.suggestions.length){u=new o(t.src,t.source_key,t.suggestions);v=new k(w);}else{if(t.exclusions){v=new j(w,w.id);}else v=new i(w);if(u){v.setRemovableTokens(false);}else if(t.exclusions){u=new m(t.src,t.source_key,w.id);}else u=new n(t.src,t.source_key);}if(t.ondemand_src){var x=[u,new l(t.ondemand_src)];u=new r(x);}if(t.excludeids)t.excludeids.forEach(function(ba){u.addExcludeID(ba);});if(t.maxresults)u.setMaximumResultCount(t.maxresults);if(u instanceof n||u instanceof l)u.setShowSecondaryAction(false);var y=t.textinput;if(typeof y==='string')y=h(y);var z=new q(w,y);z.setDatasource(u);z.setTypeObjects(t.typeObjects);z.setTypeObjectsOrder(t.typeObjectsOrder);v.setTypeahead(z);v.setInitialValue(t.initialtokens);v.setLabel(t.label);v.setPlaceholder(t.placeholder);if(t.limit)v.setLimit(t.limit);if(t.freeform){var aa=new RegExp(t.freeform,'i');z.listen('change',function(ba){if(aa&&aa.test(ba)){u.lastChange=Date.now();var ca={uri:'#',name:ba,id:ba,display:ba},da=[u.createNode(ca)];z.showResults(da);p.context().kill();}});}if(t.needs_template_data&&Object.keys(t.initialtokens).length>0)z.disable();v.start();};f.main=s;});
__d("MTokenizerBehavior",["CSS","Stratcom","MViewport","Vector"],function(a,b,c,d,e,f,g,h,i,j){var k=false,l={addListener:function(m){if(k)return;k=true;h.listen('click',[['tokenizer','typeahead-result'],['remove']],function(n){n.prevent();});h.listen(['focus','blur'],'tokenizer-input',function(n){var o=n.getNode('tokenizer'),p=n.getType()=='blur';g.conditionClass(o,'blurred',p);if(p){if(m.clearvalueonblur||1)o.tokenizer&&o.tokenizer.getTypeahead().clear();}else if(m.shouldscroll)i.scrollTo(0,j.getPos(o).y);});}};e.exports=l;});