/*!CK:270501185!*//*1398047002,178183207*/

if (self.CavalryLogger) { CavalryLogger.start_js(["2ZssQ"]); }

__d("XUITypeaheadTextOnlyView.react",["ReactPropTypes","React","TypeaheadViewItem","cx"],function(a,b,c,d,e,f,g,h,i,j){var k=h.createClass({displayName:'XUITypeaheadTextOnlyViewItem',mixins:[i.Mixin],propTypes:i.propTypes,render:function(){var m=this.props.entry,n=(("_599m")+(this.props.highlighted?' '+"_599n":''));return (h.DOM.li({key:m.getUniqueID(),className:n,onMouseDown:this._onSelect,onMouseEnter:this._onHighlight},h.DOM.div({className:"_599p"},m.getTitle())));}}),l=h.createClass({displayName:'XUITypeaheadTextOnlyView',propTypes:{highlightedEntry:g.object,entries:g.array.isRequired,onSelect:g.func.isRequired,onHighlight:g.func.isRequired,onRenderHighlight:g.func},_renderItem:function(m){var n=m===this.props.highlightedEntry;return (k({entry:m,highlighted:n,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight}));},render:function(){var m=(("_599r")+(!this.props.entries.length?' '+"_599s":''));return (h.DOM.ul({className:m},this.props.entries.map(this._renderItem)));}});e.exports=l;});
__d("XUITypeahead.react",["ReactPropTypes","React","Typeahead.react","XUITypeaheadTextOnlyView.react","XUITypeaheadView.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m={ViewRenderer:k,useLayer:true},n={ViewRenderer:k,useLayer:false},o={ViewRenderer:j,useLayer:true},p=h.createClass({displayName:'XUITypeahead',propTypes:{autoHighlight:g.bool,maxEntries:g.number,onBlur:g.func,onChange:g.func.isRequired,onFocus:g.func,onSelectAttempt:g.func.isRequired,placeholder:g.string,queryString:g.string,searchSource:g.object.isRequired,searchSourceOptions:g.object,selectOnBlur:g.bool,showEntriesOnFocus:g.bool,focusedOnInit:g.bool,tallInput:g.bool,viewStyle:g.oneOf(['textonly','rich','richNoLayer'])},getDefaultProps:function(){return {viewStyle:'rich'};},componentWillMount:function(){if(this.props.maxEntries)m.maxEntries=n.maxEntries=o.maxEntries=this.props.maxEntries;},focusInput:function(){this.refs.typeahead.focusInput();},render:function(){var q=(("_55r1")+(!!this.props.tallInput?' '+"_55r2":'')),r=null;if(this.props.viewStyle=='rich'){r=m;}else if(this.props.viewStyle=='richNoLayer'){r=n;}else r=o;return this.transferPropsTo(i({inputClassName:q,ref:"typeahead",presenter:r,excludedEntries:this.props.excludedEntries}));}});e.exports=p;});
__d("requiredIfPropIsTruthy",["invariant"],function(a,b,c,d,e,f,g){function h(i,j){return function(k,l,m){if(!k[i])return;g(k[l]!==undefined);j(k,l,m);};}e.exports=h;});
__d("TimelineChecklistMixin",["OrderedMap","React","endsWith","requiredIfPropIsTruthy"],function(a,b,c,d,e,f,g,h,i,j){var k=h.PropTypes,l={propTypes:{baseName:k.string.isRequired,fetchOnScroll:k.bool,imageSize:k.number,multiSelect:k.bool,onChange:k.func,options:k.array,overflow:k.oneOf(['scroll','show']),pagerEndpoint:j('showPager',k.string),pagerPlaceholder:j('showPager',k.string),showPager:k.bool},methods:{clearSelection:function(){this._uncheckAllOptions();},addOption:function(m,n,o,p,q,r){!this.props.multiSelect&&this._uncheckAllOptions();var s=g.fromArray([{id:m,title:n,subtitle:o,image:p,checked:!!q,name:r}],function(t){return t.id;});this.setState({options:this.state.options.merge(s)});if(this._optionWasAdded)setTimeout(function(){this._optionWasAdded(m);}.bind(this),0);},getSelection:function(){var m={};this.state.options.forEach(function(n,o){if(n.checked)m[o]=n;});return m;},getInitialState:function(){var m=g.fromArray(this.props.options,function(n){return n.id;});return {options:m,showPager:this.props.showPager};},_getOptionNameOrFallback:function(m){var n=m.name||this.props.baseName;if(this.props.multiSelect&&!i(n,'[]'))n+='['+m.id+']';return n;},_changeHandler:function(event){var m=event.target;!this.props.multiSelect&&this._uncheckAllOptions();this.state.options.get(m.value).checked=m.checked;this.setState({options:this.state.options});this.props.onChange&&this.props.onChange();},_exhaustionHandler:function(){this.setState({showPager:false});},_fetchHandler:function(m){var n=m.options;if(n.length>0){var o=this.state.options.merge(g.fromArray(n,function(p){return p.id;}));this.setState({options:o});}else this.setState({showPager:false});},_uncheckAllOptions:function(){this.setState({options:this.state.options.map(function(m){m.checked=false;return m;})});}}};e.exports=l;});
__d("TimelineChecklistScrollMixin",["Animation","Style","Vector","highlight","startsWith","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=250,n=100,o=125,p=null,q={scrollToBottom:function(){this._scrollTo(this.refs.container.getDOMNode().scrollHeight);},scrollToOption:function(s){if(!this.state.options.has(s))return;var t=this.refs.container.getDOMNode(),u=this.refs[s].getDOMNode(),v=u.offsetTop+u.offsetHeight,w=t.scrollTop+t.offsetHeight,x=function(){var y=this._getBackgroundColor();y&&j(u,null,y);}.bind(this);if(u.offsetTop<t.scrollTop){this._scrollTo(u.offsetTop-1,x);}else if(v>w){this._scrollTo(v-t.offsetHeight,x);}else{x();return;}},_getBackgroundColor:function(){var s=this.refs.container.getDOMNode();while(s){var t=h.get(s,'backgroundColor');if(!r(t))return t;s=s.parentElement;}return null;},_scrollHandler:function(){if(!p)p=l(function(){if(!this.props.fetchOnScroll||!this.state.showPager)return;var s=this.refs.container.getDOMNode(),t=i.getElementDimensions(s).y,u=s.scrollHeight-s.scrollTop-t;u>m||this.refs.pager.fetchMore();},o,this);p();},_scrollTo:function(s,t){new g(this.refs.container.getDOMNode()).to('scrollTop',s).ease(g.ease.end).duration(n).ondone(function(){t&&t();}).go();}};function r(s){if(!k(s,'rgba'))return false;var t=s.split(',');return t.length===4&&parseFloat(t[3])===0;}e.exports=q;});
__d("TimelineChecklistItem.react",["ReactPropTypes","React","cx","invariant","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){var l=h.createClass({displayName:'TimelineChecklistItem',propTypes:{context:g.oneOf(['block','inline']),paddingLeft:g.oneOf(['none','small','normal']),paddingRight:g.oneOf(['none','small','normal'])},getDefaultProps:function(){return {context:'block',paddingLeft:'normal',paddingRight:'normal'};},render:function(){j(Array.isArray(this.props.children)&&(this.props.children.length===2||this.props.children.length===3));var m,n,o;if(this.props.children.length===3){m=this.props.children[0];n=this.props.children[1];o=this.props.children[2];}else{m=null;n=this.props.children[0];o=this.props.children[1];}var p=m||n;p.props.className=k(p.props.className,"_14ku");if(m)m.props.className=k(m.props.className,"_5jou");n.props.className=k(n.props.className,"_5jov");o.props.className=k(o.props.className,"_14kv");var q=[m,n,o],r=this.props.context==='block'?h.DOM.div(null,q):h.DOM.span(null,q),s=this.props.paddingLeft,t=this.props.paddingRight;r.props.className=(("_5j7e")+(s==='none'?' '+"_14kw":'')+(s==='small'?' '+"_14kx":'')+(t==='none'?' '+"_14ky":'')+(t==='small'?' '+"_14kz":''));return this.transferPropsTo(r);}});e.exports=l;});
__d("TimelineChecklistPager.react",["AsyncRequest","ReactPropTypes","React","XUIText.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k){var l=i.createClass({displayName:'TimelineChecklistPager',props:{endpoint:h.string.isRequired,onExhaustion:h.func.isRequired,onFetch:h.func,placeholder:h.string.isRequired},fetchMore:function(){if(this.state.loading||!this.state.endpoint)return;this.setState({loading:true});(new g()).setURI(this.state.endpoint).setHandler(this._fetchHandler).send();},getInitialState:function(){return {endpoint:this.props.endpoint,loading:false};},render:function(){var m=(("_5ueb")+(this.state.loading?' '+"_5ued":''));return (i.DOM.div({className:m,onClick:this._clickHandler},j({size:"small",weight:"bold"},this.props.placeholder),i.DOM.div({className:"_5uec"})));},_clickHandler:function(event){this.fetchMore();},_fetchHandler:function(m){var n=m.getPayload();this.setState({endpoint:n.endpoint,loading:false});this.props.onFetch&&this.props.onFetch(n);!n.endpoint&&this.props.onExhaustion();}});e.exports=l;});
__d("TimelineChecklist.react",["React","TimelineChecklistMixin","TimelineChecklistScrollMixin","Image.react","TimelineChecklistItem.react","TimelineChecklistPager.react","XUIText.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=32,p=g.createClass({displayName:'TimelineChecklist',mixins:[h.methods,i],propTypes:h.propTypes,getDefaultProps:function(){return {overflow:'show',imageSize:o};},render:function(){var q=[];this.state.options.forEach(function(v,w){var x=null;if(v.image)x=g.DOM.span(null,j({alt:v.title,height:this.props.imageSize,src:v.image,width:this.props.imageSize}));var y=null;if(v.subtitle)y=g.DOM.span({className:"_49ua"},v.subtitle);var z=(("_49ub")+(v.checked?' '+"_49uc":'')+(v.focused?' '+"_49ud":''));q.push(g.DOM.label({className:z,key:w,ref:w},k({context:"inline",paddingLeft:this.props.paddingLeft,paddingRight:this.props.paddingRight},x,g.DOM.span(null,m({className:"_49ue",size:"small",weight:"bold"},v.title),y),g.DOM.span({className:"_49uf"},g.DOM.span({className:"_49ug"}),g.DOM.input({checked:v.checked,className:"_49uh",name:this._getOptionNameOrFallback(v),onBlur:this._blurHandler,onChange:this._changeHandler,onFocus:this._focusHandler,type:"checkbox",value:w})))));},this);var r=null;if(this.state.showPager)r=l({endpoint:this.props.pagerEndpoint,onExhaustion:this._exhaustionHandler,onFetch:this._fetchHandler,placeholder:this.props.pagerPlaceholder,ref:"pager"});var s=this.props.overflow==='scroll',t=((s?"_49ui":'')+(s?' '+"scrollable":'')),u=g.DOM.div({className:t,ref:"container"},g.DOM.fieldset({className:"_49uj"},q,r));if(this.props.fetchOnScroll&&this.state.showPager&&s)u.props.onScroll=this._scrollHandler;return this.transferPropsTo(u);},_blurHandler:function(event){this.state.options.get(event.target.value).focused=false;this.setState({options:this.state.options});},_focusHandler:function(event){this.setState({options:this.state.options.map(function(q,r){q.focused=r===event.target.value;return q;})});}});e.exports=p;});
__d("TimelineSingleTypeahead.react",["DOM","ReactPropTypes","React","CloseButton.react","XUITypeahead.react","csx","cx","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=i.createClass({displayName:'TimelineSingleTypeahead',propTypes:{excludedEntries:h.object,onBlur:h.func,onChange:h.func,onFocus:h.func,onSelectAttempt:h.func,placeholder:h.string,queryName:h.string,requireSelection:h.bool,searchSource:h.object.isRequired,selectedEntry:h.object,selectionName:h.string,selectOnBlur:h.bool,showEntriesOnFocus:h.bool,tallInput:h.bool},getDefaultProps:function(){return {requireSelection:false,selectedEntry:null,selectionName:'selected_id',queryName:'query'};},componentDidUpdate:function(){var p=this._getTextInputNode(),q=p.scrollWidth>p.clientWidth;if(this.state.useMask!==q)this.setState({useMask:q});},getInitialState:function(){return {queryString:'',selectedEntry:this.props.selectedEntry,useMask:false};},render:function(){var p=this.state.selectedEntry,q=this.state.queryString,r=null;if(this.state.useMask)r=i.DOM.div({className:"_5rrw"});var s=null;if(p)s=j({'aria-label':n._("Remove {item}",{item:p.getTitle()}),className:"_5rrv",onClick:this._clearButtonClickHandler,size:"small"});var t=null;if(p){t=i.DOM.input({name:this.props.selectionName,type:"hidden",value:p.getUniqueID()});}else if(q)t=i.DOM.input({name:this.props.queryName,type:"hidden",value:q});var u=(("_5rru")+(this.props.tallInput?' '+"_5rrx":'')+(!!p?' '+"_5rry":''));return (i.DOM.div({className:u},k({excludedEntries:this.props.excludedEntries,onBlur:this._blurHandler,onChange:this._changeHandler,onFocus:this.props.onFocus,onSelectAttempt:this._selectHandler,placeholder:this.props.placeholder,queryString:p?p.getTitle():q,ref:"typeahead",selectOnBlur:this.props.selectOnBlur,searchSource:this.props.searchSource,showEntriesOnFocus:this.props.showEntriesOnFocus,tallInput:this.props.tallInput}),r,s,t));},clearSelection:function(){this.setState({queryString:'',selectedEntry:null});},_blurHandler:function(){if(this.props.requireSelection&&!this.state.selectedEntry)this.clearSelection();},_changeHandler:function(event){this.setState({queryString:event.target.value,selectedEntry:null});this.props.onChange&&this.props.onChange(event);},_selectHandler:function(p){this.setState({selectedEntry:p});this.props.onSelectAttempt&&this.props.onSelectAttempt(p);},_clearButtonClickHandler:function(event){this.clearSelection();var p=this._getTextInputNode();setTimeout(p.focus.bind(p),0);},_getTextInputNode:function(){return g.find(this.refs.typeahead.getDOMNode(),"._58al");}});e.exports=o;});
__d("TimelineTypeaheadChecklist.react",["React","TimelineChecklist.react","TimelineSingleTypeahead.react","TimelineTypeaheadContainer.react","XUITypeahead.react"],function(a,b,c,d,e,f,g,h,i,j,k){var l=g.PropTypes,m=g.createClass({displayName:'TimelineTypeaheadChecklist',propTypes:{excludedEntries:l.object,placeholder:l.string.isRequired,requireSelection:l.bool,searchSource:l.object.isRequired,typeaheadName:l.string,queryName:function(n,o,p){if(!n.multiSelect&&!n[o])return new Error(("Must supply a query name to "+p+" for ")+("single-selection mode."));}},getDefaultProps:function(){return {overflow:'scroll'};},getInitialState:function(){return {queryString:''};},render:function(){var n=null;if(this.props.multiSelect){n=k({excludedEntries:this.props.excludedEntries,onBlur:this._typeaheadBlurHandler,onChange:this._typeaheadChangeHandler,queryString:this.state.queryString});}else n=i({requireSelection:this.props.requireSelection,selectionName:this.props.typeaheadName,queryName:this.props.queryName});n.props.onSelectAttempt=this._selectHandler;n.props.placeholder=this.props.placeholder;n.props.ref='typeahead';n.props.searchSource=this.props.searchSource;var o=this.transferPropsTo(h({onChange:this._checklistChangeHandler,ref:"checklist"}));return (g.DOM.div(null,o,j(null,n)));},_checklistChangeHandler:function(){this.props.multiSelect||this.refs.typeahead.clearSelection();},_selectHandler:function(n){if(!n)return;if(!this.props.multiSelect){this.refs.checklist.clearSelection();return;}this.refs.checklist.addOption(n.getUniqueID(),n.getTitle(),n.getSubtitle(),n.getPhoto(),true,this.props.typeaheadName);this.setState({queryString:''});setTimeout(function(){this.refs.checklist.scrollToOption(n.getUniqueID());}.bind(this),0);},_typeaheadBlurHandler:function(){this.props.requireSelection&&this.setState({queryString:''});},_typeaheadChangeHandler:function(event){this.setState({queryString:event.target.value});}});e.exports=m;});