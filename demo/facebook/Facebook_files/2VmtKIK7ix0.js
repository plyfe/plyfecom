/*!CK:2938500509!*//*1398272250,178171215*/

if (self.CavalryLogger) { CavalryLogger.start_js(["1H77N"]); }

__d("AdblockDetector",["CSS"],function(a,b,c,d,e,f,g){var h='data-adblock-hash',i={},j=0;function k(l,m){var n=l.getAttribute(h);if(!n){n=++j;l.setAttribute(h,n);}else if(i[n]){clearTimeout(i[n]);i[n]=null;}i[n]=setTimeout(function(){i[n]=null;if(!l.offsetHeight){var o=l,p=document.getElementsByTagName('body')[0];while(o&&o!==p){if(!o.style||g.hasClass(o,'hidden_elem')||o.style.display==='none'||o.style.height==='0px'||o.style.height===0||o.style.height==='0'||o.childNodes.length===0)return;o=o.parentNode;}if(o===p)m&&m(l);}},3000);}f.assertUnblocked=k;});
__d("AdblockDetectorLogging",["AdblockDetector","EagleEye"],function(a,b,c,d,e,f,g,h){function i(j){g.assertUnblocked(j,h.log.bind(h,'ads',{event:'ads_blocked'}));}f.assertUnblocked=i;});
__d("EmuController",["AsyncRequest","DataStore","URI","copyProperties","emptyFunction","ge","goURI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(o,p){"use strict";var q=l(o);if(!q)return null;this.impression=p;this.containerId=o;h.set(q,'emuController',this);return this;}n.prototype.event=function(o,p,q,r){"use strict";var s={eid:this.impression,f:0,ui:this.containerId,en:o,a:1};if(p)s.ed=JSON.stringify(p);if(!r)r=k;var t=new g().setURI(this.EVENT_HANDLER_PATH).setData(s).setErrorHandler(r);if(q)t.setHandler(q);t.send();};n.prototype.redirect=function(){"use strict";var o={eid:this.impression,f:0,ui:this.containerId,en:this.CLICK,a:0,sig:Math.floor(Math.random()*65535)+65536},p=new i(this.EVENT_HANDLER_PATH);p.setQueryData(o);m(p);};n.fromContainer=function(o){"use strict";var p=l(o);if(!p)return null;return h.get(p,'emuController');};n.getEventClass=function(o){"use strict";return "emuEvent"+String(o).trim();};j(n.prototype,{EVENT_HANDLER_PATH:'/ajax/emu/end.php',CLICK:1,FAN:"fad_fan"});e.exports=n;});
__d("legacy:ad-units-base-js",["EmuController"],function(a,b,c,d){a.EmuController=b('EmuController');},3);
__d("Visibility",["mixInEventEmitter"],function(a,b,c,d,e,f,g){var h,i;if(typeof document.hidden!=='undefined'){h='hidden';i='visibilitychange';}else if(typeof document.mozHidden!=='undefined'){h='mozHidden';i='mozvisibilitychange';}else if(typeof document.msHidden!=='undefined'){h='msHidden';i='msvisibilitychange';}else if(typeof document.webkitHidden!=='undefined'){h='webkitHidden';i='webkitvisibilitychange';}function j(){return h?document[h]:false;}var k={HIDDEN:'hidden',VISIBLE:'visible',isHidden:j};g(k,{visible:true,hidden:true});if(document.addEventListener&&i)document.addEventListener(i,function l(){k.emit(j()?k.HIDDEN:k.VISIBLE);});e.exports=k;});
__d("ViewableImpressionTracker",["Banzai","copyProperties","DOM","getElementPosition","getViewportDimensions","Style","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(o,p,q){"use strict";this.id=o;this.element=p;this.config=q;this.iframe=null;this.viewableTimeout=null;this.clearSubsequentTimeout=null;this.waitForSubsequent=false;this.waitForLogged=false;this.isNonViewableLogged=false;this.isVisible=false;}n.prototype.getID=function(){"use strict";return this.id;};n.prototype.isViewable=function(o){"use strict";var p=j(this.element);if(p.x<o.width&&p.x+p.width>0&&p.y<o.height&&p.y+p.height>0&&l.get(this.element,'visibility')!=='hidden'){var q=Math.max(p.x,0),r=Math.min(p.x+p.width,o.width),s=Math.max(p.y,0),t=Math.min(p.y+p.height,o.height);if((p.height*p.width)===0)return true;var u=100*(r-q)*(t-s)/(p.height*p.width);return u>this.config.pixel_in_percentage;}return false;};n.prototype.onVisible=function(){"use strict";this.isVisible=true;if(!this.isViewable(k())){this.$ViewableImpressionTracker0();return;}if(this.isLogged()){this.$ViewableImpressionTracker1();}else this.$ViewableImpressionTracker2();if(!this.waitForLogged&&!this.isLogged()){this.waitForLogged=true;this.viewableTimeout=setTimeout(function(){this.waitForLogged=false;if(!this.isViewable(k())){this.$ViewableImpressionTracker3();return;}this.logImpression(1,{});this.$ViewableImpressionTracker1();}.bind(this),this.config.duration_in_ms);}};n.prototype.onHidden=function(){"use strict";if(this.config.log_initial_nonviewable&&!this.isLogged()&&!this.isNonViewableLogged){this.logNonViewableImpression();}else if(!this.config.log_initial_nonviewable&&!this.isLogged()&&this.isVisible)this.logNonViewableImpression();this.isVisible=false;if(this.waitForLogged){this.waitForLogged=false;clearTimeout(this.viewableTimeout);}if(this.isLogged()&&!this.waitForSubsequent&&this.config.subsequent_gap_in_ms>=0){this.waitForSubsequent=true;this.clearSubsequentTimeout=setTimeout(function(){this.waitForSubsequent=false;this.reset();if(this.isVisible)this.onVisible();}.bind(this),this.config.subsequent_gap_in_ms);}this.$ViewableImpressionTracker3();};n.prototype.onRemoved=function(){"use strict";this.isVisible=false;};n.prototype.logImpression=function(o,p){"use strict";if(this.iframe)return;if(this.config.should_not_log_impression)return;var q=this.element.getAttribute('data-xt'),r=h({xt:q,isv:o,cts:Math.floor(Date.now()/1000)},p);this.iframe=i.create('iframe',{src:new m('/xti.php').addQueryData(r),width:0,height:0,frameborder:0,scrolling:'no',className:'fbEmuTracking'});this.iframe.setAttribute('aria-hidden','true');i.appendContent(this.element,this.iframe);};n.prototype.logNonViewableImpression=function(){"use strict";if(this.config.should_not_log_nonviewable)return;var o=this.element.getAttribute('data-xt');g.post('xtrackable:nonviewable',{xt:o});this.isNonViewableLogged=true;};n.prototype.isLogged=function(){"use strict";return this.iframe!==null;};n.prototype.reset=function(){"use strict";if(this.iframe){i.remove(this.iframe);this.iframe=null;}this.isNonViewableLogged=false;this.isVisible=false;this.waitForLogged=false;this.waitForSubsequent=false;};n.prototype.$ViewableImpressionTracker4=function(){"use strict";return 0;};n.prototype.$ViewableImpressionTracker0=function(){"use strict";if(this.$ViewableImpressionTracker4())l.set(this.element,'background-color','#abab9a');};n.prototype.$ViewableImpressionTracker2=function(){"use strict";if(this.$ViewableImpressionTracker4())l.set(this.element,'background-color','#e4f70a');};n.prototype.$ViewableImpressionTracker3=function(){"use strict";if(this.$ViewableImpressionTracker4())l.set(this.element,'background-color',null);};n.prototype.$ViewableImpressionTracker1=function(){"use strict";if(this.$ViewableImpressionTracker4())l.set(this.element,'background-color','#047515');};e.exports=n;});
__d("VisibilityTrackingHelper",["Arbiter","DesktopHscrollUnit","getViewportDimensions","Event"],function(a,b,c,d,e,f,g,h,i,j){var k={VISIBILITY_CHANGE:'visibility_change',getEventListeners:function(l){return [j.listen(document,'DOMContentLoaded',l),j.listen(window,'scroll',l),j.listen(window,'resize',l),g.subscribe(h.HSCROLL_ITEM_SHOWN_EVENT,l)];},getViewportInfo:function(){return i();}};e.exports=k;});
__d("VisibilityTracking",["Banzai","ErrorUtils","ScriptPath","SubscriptionsHandler","Visibility","VisibilityTrackingHelper","collectDataAttributes","copyProperties","getElementPosition","pageID","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r='visibility_tracking',s='[data-vistracking]',t=500,u=50,v=50,w=50,x=50,y={VISIBLE:'visible',HIDDEN:'hidden'},z={DEFAULT:'default',REMOVED:'removed'},aa={name:y.VISIBLE,cause:z.DEFAULT},ba={name:y.HIDDEN,cause:z.DEFAULT},ca={name:y.HIDDEN,cause:z.REMOVED},da=0;function ea(fa){"use strict";fa=fa||{};if(!fa.bypass_banzai_check&&!g.isEnabled(r))return;this.visibleElementInfo={};this.getDataFromConfig(fa);k.addListener(k.VISIBLE,h.guard(this.fireEvent,'VisibilityTracking:visible',this));if(!this.skipVisibilityHiddenEvents)k.addListener(k.HIDDEN,h.guard(this.clearAllVisibleElements,'VisibilityTracking:hidden',this));i.subscribe(h.guard(this.updateVisibleElements,'VisibilityTracking:scriptPath',this));g.subscribe(g.SHUTDOWN,h.guard(this.onUnload,'VisibilityTracking:banzaiShutdown',this));this.fireEventCallback=q.acrossTransitions(h.guard(this.fireEvent,'VisibilityTracking:fireEventCallback',this),this.timeout,this);this.listeners=new j();l.getEventListeners(this.fireEventCallback).forEach(function(ga){this.listeners.addSubscriptions(ga);},this);if(this.extraInit)h.applyWithGuard(this.extraInit.bind(this));}ea.prototype.getDataFromConfig=function(fa){"use strict";this.config=fa;this.root=fa.root||document.documentElement;this.selector=fa.selector||s;this.timeout=(typeof fa.timeout!=='undefined')?fa.timeout:t;this.minOffsetVisibleFromBottom=(typeof fa.minOffsetVisibleFromBottom!=='undefined')?fa.minOffsetVisibleFromBottom:u;this.minOffsetVisibleFromTop=(typeof fa.minOffsetVisibleFromTop!=='undefined')?fa.minOffsetVisibleFromTop:v;this.minOffsetVisibleFromLeft=(typeof fa.minOffsetVisibleFromLeft!=='undefined')?fa.minOffsetVisibleFromLeft:w;this.minOffsetVisibleFromRight=(typeof fa.minOffsetVisibleFromRight!=='undefined')?fa.minOffsetVisibleFromRight:x;this.handleAllHiddenEvents=(typeof fa.handleAllHiddenEvents!=='undefined')?fa.handleAllHiddenEvents:false;this.handleAllVisibleEvents=(typeof fa.handleAllVisibleEvents!=='undefined')?fa.handleAllVisibleEvents:false;this.skipVisibilityHiddenEvents=(typeof fa.skipVisibilityHiddenEvents!=='undefined')?fa.skipVisibilityHiddenEvents:false;this.cacheTrackedElements=(typeof fa.cacheTrackedElements!=='undefined')?fa.cacheTrackedElements:false;};ea.prototype.getAllTrackedElements=function(){"use strict";if(!this.allTrackedElements){this.allTrackedElements={};if(this.root.querySelectorAll){var fa=this.root.querySelectorAll(this.selector);for(var ga=0;ga<fa.length;ga++){var ha=this.getElementID(fa[ga]);this.allTrackedElements[ha]=fa[ga];}}}return this.allTrackedElements;};ea.prototype.refreshAllTrackedElements=function(){"use strict";delete this.allTrackedElements;return this.getAllTrackedElements();};ea.prototype.getDataToLog=function(fa){"use strict";var ga=n(m(fa,['gt']).gt,{client_time:Date.now()/1000,time_spent_id:p,script_path:i.getScriptPath()});return ga;};ea.prototype.getElementID=function(fa){"use strict";var ga=fa.$VisibilityTracking0;if(ga)return ga;fa.$VisibilityTracking0=++da;return da;};ea.prototype.sendDataToLog=function(fa){"use strict";g.post(r,fa);};ea.prototype.fireEvent=function(){"use strict";var fa=this.cacheTrackedElements?this.allTrackedElements:this.refreshAllTrackedElements();for(var ga in fa){var ha=fa[ga],ia=l.getViewportInfo(),ja=this.isVisible(ha,ia);if(!ja&&(ga in this.visibleElementInfo||this.handleAllHiddenEvents)){this.handleEvent(ha,ba);}else if(ja&&(!(ga in this.visibleElementInfo)||this.handleAllVisibleEvents))this.handleEvent(ha,aa);}this.clearUntrackedVisibleElements();};ea.prototype.isVisible=function(fa,ga){"use strict";var ha=o(fa);return (ha.x||ha.y||ha.width||ha.height)&&(ha.y+ha.height>=this.minOffsetVisibleFromTop)&&(ha.y<=ga.height-this.minOffsetVisibleFromBottom)&&(ha.x+ha.width>=this.minOffsetVisibleFromLeft)&&(ha.x<=ga.width-this.minOffsetVisibleFromRight);};ea.prototype.handleEvent=function(fa,event){"use strict";var ga=this.getElementID(fa),ha=this.getDataToLog(fa),ia;if(event.name===y.VISIBLE){var ja=Math.floor(Date.now()/1000);ia=p.concat(":",ja.toString(),":",this.getElementID(fa).toString());this.visibleElementInfo[ga]={visibility_id:ia,elem:fa};}else if(event.name===y.HIDDEN)if(ga in this.visibleElementInfo){ia=this.visibleElementInfo[ga].visibility_id;delete this.visibleElementInfo[ga];}this.sendDataToLog(n(ha,{event:event.name,visibility_id:ia}));};ea.prototype.clearUntrackedVisibleElements=function(){"use strict";var fa=this.getAllTrackedElements();for(var ga in this.visibleElementInfo)if(!(ga in fa)){var ha=this.visibleElementInfo[ga];if(ha.elem)this.handleEvent(ha.elem,ca);}};ea.prototype.clearAllVisibleElements=function(){"use strict";var fa=this.getAllTrackedElements();for(var ga in fa)if(ga in this.visibleElementInfo)this.handleEvent(fa[ga],ba);this.clearUntrackedVisibleElements();};ea.prototype.updateVisibleElements=function(){"use strict";this.clearAllVisibleElements();this.fireEvent();};ea.prototype.onUnload=function(){"use strict";this.clearAllVisibleElements();if(this.listeners){this.listeners.release();this.listeners=null;}if(this.extraCleanup)h.applyWithGuard(this.extraCleanup.bind(this));};ea.init=function(fa){"use strict";new ea(fa);};ea.EVENT=y;ea.CAUSE=z;e.exports=ea;});
__d("ViewableImpressionEventHandler",["ViewableImpressionTracker","VisibilityTracking"],function(a,b,c,d,e,f,g,h){var i=1;for(var j in h)if(h.hasOwnProperty(j))l[j]=h[j];var k=h===null?null:h.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=h;function l(){"use strict";if(h!==null)h.apply(this,arguments);}l.prototype.extraInit=function(){"use strict";this.impressionTrackers={};};l.prototype.getImpressionTracking=function(m){"use strict";var n=this.getElementID(m),o=this.getConfigFromElement(m);if(o.should_not_handle_event)return null;var p=this.impressionTrackers[n];if(!p){p=new g(n,m,o);this.impressionTrackers[n]=p;}return p;};l.prototype.refreshAndFireEvent=function(){"use strict";this.refreshAllTrackedElements();this.fireEventCallback();};l.prototype.handleEvent=function(m,event){"use strict";var n=this.getImpressionTracking(m);if(!n)return;if(event.name===h.EVENT.VISIBLE){n.onVisible();if(!this.visibleElementInfo[n.getID()])this.visibleElementInfo[n.getID()]={elem:m};}else if(event.name===h.EVENT.HIDDEN)if(event.cause===h.CAUSE.DEFAULT){n.onHidden();delete this.visibleElementInfo[n.getID()];}else if(event.cause===h.CAUSE.REMOVED){n.onRemoved();delete this.visibleElementInfo[n.getID()];delete this.impressionTrackers[n.getID()];}};l.prototype.getConfigFromElement=function(m){"use strict";return JSON.parse(m.getAttribute('data-xt-vimp'));};l.prototype.getElementID=function(m){"use strict";if(!m.getAttribute('id'))m.setAttribute('id','xt_uniq_'+i++);return m.getAttribute('id');};e.exports=l;});
__d("BookmarkFeedSorter",["Run"],function(a,b,c,d,e,f,g){var h,i={init:function(j){h=j;g.onLeave(function(){h=null;});},setChecked:function(j){if(h)h.setValue(j);}};e.exports=i;});
__d("LitestandStream",["Arbiter","DOM","LitestandMessages","LitestandStoryInsertionStatus","LitestandStreamConfig","ViewportBounds","copyProperties","csx","ge","getElementPosition"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q,r,s,t,u,v,w={init:function(x,y,z){q=y;s=z;t=x;r=u=0;g.subscribe(i.STORIES_INSERTED,function(aa,ba){if(!ba||!ba.substream_id||!q)return;var ca=h.scry(o(ba.substream_id),w.getStoriesSelector());ca.forEach(function(da){var ea=da.getAttribute('data-timestamp'),fa=da.getAttribute('data-ft')&&JSON.parse(da.getAttribute('data-ft')).ei;if(!fa&&ea&&ea<q)r++;u++;});});},getEmptySubstreamsSelector:function(){return "._4ikz:empty";},getStoriesSelector:function(){return "._5jmm";},getStreamConfig:function(x){return m({bufferPixels:1000,firstPagerScrollBuffer:100,maxStories:null,oldStoriesDelay:5000,oldStoriesLimit:30,pagerController:'LitestandMoreStoriesPagelet',pagerSelector:w.getPagerSelector(),pollIntervalMS:null,newStoryIdleTime:60000},x);},getPagerSelector:function(){return "._2as,._5pan,._5us6";},getStreamRoot:function(){return t;},getVisibleStoryCount:function(x){var y=h.scry(x,w.getStoriesSelector());return y.length;},hideOffscreenSubstreams:function(){return k.hide_offscreen_substreams;},hasAutoUpdateTest:function(){return k.auto_update_test;},getOldStoryCount:function(){return r;},getTotalStoryCount:function(){return u;},setHomeloadID:function(x){v=x;},getHomeloadID:function(){return v;},getSectionID:function(){return s;},canInsertNewerStories:function(){var x=w.hasAutoUpdateTest()?k.top_margin_px:0;if(l.getTop()-x>p(w.getStreamRoot()).y)return false;return j.canInsert();}};e.exports=w;});
__d("LitestandStreamUnloader",["Event","Arbiter","DOM","DOMQuery","LitestandMessages","LitestandStream","Run","$","csx","getElementPosition","queryThenMutateDOM","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=false,t,u,v,w,x={},y=[];function z(){m.onLeave(aa);y=[h.subscribe(k.FILTER_SWITCH_BEGIN,aa),h.subscribe(k.STORIES_INSERTED,ca)];s=true;}function aa(){y.forEach(h.unsubscribe);y=[];s=false;}function ba(){var ea=false,fa=[];clearTimeout(u);u=setTimeout(function(){q(function(){var ga=Math.abs(Math.min(p(t).y,0));if(ga===0){ea=true;fa=i.scry(v,l.getStoriesSelector());}},function(){if(fa.length>x.oldStoriesLimit){fa.slice(x.oldStoriesLimit).forEach(i.remove);h.inform(k.STORIES_REMOVED);}if(ea){w&&w.remove();w=null;}},'LitestandStreamUnloader/removeOldStories');},x.oldStoriesDelay);}function ca(){ba();if(!w&&l.getVisibleStoryCount(v)>x.oldStoriesLimit)w=g.listen(window,'scroll',r(ba));}var da={register:function(ea,fa){s||z();x=l.getStreamConfig(fa);v=n(ea);t=j.scry(document.body,"._li")[0];}};e.exports=da;});
__d("ViewableImpressionTracking",["Arbiter","DesktopHscrollUnit","ErrorUtils","LitestandMessages","Run","ViewableImpressionEventHandler"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m={init:function(n){if(typeof l.instance==='undefined'){l.instance=new l(n);l.instance.listeners.addSubscriptions(g.subscribe([j.STORIES_INSERTED,j.STORIES_REMOVED,'AdsRefreshHandler/AdsLoaded','PhotoSnowliftAds/displayUnits','WebMessengerAdsControl/adjustAds',h.HSCROLL_ITEM_INSERTED_EVENT],i.guard(function(){l.instance.refreshAndFireEvent();},'ViewableImpressionTracking')));}k.onLoad(function(){l.instance.refreshAndFireEvent();});}};e.exports=m;});
__d("Tour",["Arbiter","LayerDestroyOnHide","LayerHideOnEscape","NavigationMessage","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k){function l(){"use strict";if(l._instance)l._instance.setTourComplete();l._instance=this;}l.prototype.init=function(){"use strict";this._pageLeaveToken=g.subscribe('onload/exit',this.handleLeavePage.bind(this));this._navigationBeginToken=g.subscribe(j.NAVIGATION_BEGIN,this.handleTransition.bind(this));this.steps={};return this;};l.prototype.registerStep=function(m,n){"use strict";m.disableBehavior(h);m.disableBehavior(i);this.steps[n]=m;m.subscribe('show',function(){m.inform('tour-dialog-show',m);});if(!this.getTourStarted())this.setTourStart();};l.prototype._unsubscribeSubscriptions=function(){"use strict";this._navigationBeginToken.unsubscribe();this._pageLeaveToken.unsubscribe();};l.prototype.handleLeavePage=function(){"use strict";this._unsubscribeSubscriptions();};l.prototype.handleTransition=function(){"use strict";this._unsubscribeSubscriptions();};l.prototype.handleTourStart=function(){"use strict";};l.prototype.handleTourStop=function(){"use strict";};l.prototype.handleTourComplete=function(){"use strict";};l.prototype.showStep=function(m){"use strict";var n=this.steps[m];if(!(this.openDialog==n))this.hideOpenDialog();if(!n)return;this.openDialog=n;n.show();};l.prototype.hideOpenDialog=function(){"use strict";if(this.openDialog){this.openDialog.hide();this.openDialog=null;}};l.prototype.getTourStarted=function(){"use strict";return this.tourStarted;};l.prototype.setTourStart=function(){"use strict";this.tourStarted=true;this.handleTourStart();};l.prototype.setTourStop=function(){"use strict";this.tourStarted=false;this.hideOpenDialog();this.handleTourStop();};l.prototype.setTourComplete=function(){"use strict";if(this.tourComplete)return;this.setTourStop();this.tourComplete=true;this.handleTourComplete();};l.prototype.hideStep=function(m){"use strict";var n=this.steps[m];n&&n.hide();};l.getInstance=function(){"use strict";return l._instance||(l._instance=new l());};k(l.prototype,{tourStarted:false,tourComplete:false,_navigationBeginToken:null,_pageLeaveToken:null,steps:{},openDialog:null});e.exports=l;});
__d("EgoUnitSlideInsert",["Animation","CSS","DataStore","DOM","Ease","Event","Parent","TidyArbiterMixin","cx","copyProperties","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r='sliding',s="EgoSlider/End",t=p({isSliding:function(u){return i.get(u,r);},runAfterSlide:function(u,v){var w=q(t.subscribe(s,function(x,y){if(y===u){w&&w.unsubscribe();v();}}));},registerSlide:function(u,v){l.listen(u,'click',function(w){var x=m.byClass(w.getTarget(),"_5cl_");if(!x)return;var y=m.byClass(u,'ego_unit'),z=0,aa=m.byClass(y,'ego_unit_container'),ba=j.scry(aa,'.ego_unit')[0];if(ba===y)if(y.nextSibling){y.nextSibling.style.paddingTop='0px';y.nextSibling.style.borderTop='0px';}h.addClass(y,"_5cl-");i.set(y,r,true);new g(y).to('height',0).to('padding-top',z).to('padding-bottom',0).to('margin',0).from('opacity',1).to('opacity',0).ease(k.circOut).duration(300).checkpoint(1,function(){j.appendContent(aa,y);j.prependContent(y,v);i.remove(y,r);}).to('height',12).to('opacity',1).to('margin-bottom',10).duration(0).checkpoint(2,function(){t.inform(s,y);}).go();});}},n);e.exports=t;});
__d("FutureSideNavItem",["Arbiter","CSS","DOM","Parent","$","createArrayFrom"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(n,o){"use strict";this.id=n.id;this.up=o;this.endpoint=n.endpoint;this.type=n.type;this.node=n.node||k(n.id);this.paths=n.path?l(n.path):[];this.keys=n.key?l(n.key):[];this.context=n.context;var p=this._findKeys(this.keys);this.numericKey=p.numeric||this.keys[0];this.textKey=p.text||this.keys[0];this._pathPattern=this._buildRegex(this.paths);this._keyPattern=this._buildRegex(this.keys);this.hideLoading();this.hideSelected();}m.prototype.equals=function(n){"use strict";return n&&n.id===this.id;};m.prototype.getLinkNode=function(){"use strict";return (i.scry(this.node,'a.item')[0]||i.scry(this.node,'a.subitem')[0]);};m.prototype.matchPath=function(n){"use strict";return this._matchInput(this._pathPattern,n);};m.prototype.matchKey=function(n){"use strict";return this._matchInput(this._keyPattern,n);};m.prototype._matchInput=function(n,o){"use strict";var p=n&&n.exec(o);return p&&p.slice(1);};m.prototype.getTop=function(){"use strict";return this.isTop()?this:this.up.getTop();};m.prototype.isTop=function(n){"use strict";return !this.up;};m.prototype.setCount=function(n,o){"use strict";return this._updateCount(n,true);};m.prototype.incrementCount=function(n,o){"use strict";return this._updateCount(n,false);};m.prototype._updateCount=function(n,o,p){"use strict";var q=i.scry(this.node,'span.count')[0],r=q&&i.scry(q,'span.countValue')[0];if(r){var s=o?0:parseInt(i.getText(r),10),t=Math.max(0,s+n),u=this.isTop()?'hidden':'hiddenSubitem';i.setContent(r,t);p&&h.conditionClass(this.node,u,!t);h.conditionClass(q,'hidden_elem',!t);if(this.isTop()){var v=i.scry(this.node,'div.linkWrap')[0];if(v){h.conditionClass(v,'noCount',!t);h.conditionClass(v,'hasCount',t);}}}g.inform('NavigationMessage.COUNT_UPDATE_DONE');};m.prototype.showLoading=function(){"use strict";h.addClass(this.node,'loading');};m.prototype.hideLoading=function(){"use strict";h.removeClass(this.node,'loading');};m.prototype.showSelected=function(){"use strict";h.addClass(this.node,'selectedItem');h.hasClass(this.node,'hider')&&h.addClass(this._getExpanderParent(),'expandedMode');};m.prototype.hideSelected=function(){"use strict";h.removeClass(this.node,'selectedItem');};m.prototype.showChildren=function(){"use strict";h.addClass(this.node,'open');};m.prototype.hideChildren=function(){"use strict";h.removeClass(this.node,'open');};m.prototype._getExpanderParent=function(){"use strict";return j.byClass(this.node,'expandableSideNav');};m.prototype._buildRegex=function(n){"use strict";if(n.length){var o=n.map(function(p){if(typeof p==="string"){return p.replace(/([^a-z0-9_])/ig,'\\$1');}else if(p&&p.regex)return p.regex;});return new RegExp('^(?:'+o.join('|')+')$');}};m.prototype._findKeys=function(n){"use strict";var o=/^(app|group|fl)_/,p={};for(var q=0;q<n.length;q++){var r=o.test(n[q]);if(r&&!p.numeric){p.numeric=n[q];}else if(!r&&!p.text)p.text=n[q];if(p.numeric&&p.text)break;}return p;};e.exports=m;});
__d("FutureSideNavSection",["Bootloader","DOMQuery","$"],function(a,b,c,d,e,f,g,h,i){function j(k){"use strict";this.id=k.id;this.node=this.node||i(k.id);this.editEndpoint=k.editEndpoint;}j.prototype.equals=function(k){"use strict";return k&&k.id===this.id;};j.prototype.getEditorAsync=function(k){"use strict";g.loadModules(["SortableSideNav"],function(l){var m=new l(h.find(this.node,'ul.uiSideNav'),this.editEndpoint);k(m);}.bind(this));};e.exports=j;});
__d("FutureSideNav",["Arbiter","ChannelConstants","CSS","DOM","DOMDimensions","$","Event","FutureSideNavItem","FutureSideNavSection","NavigationMessage","PageTransitions","Parent","Run","SelectorDeprecated","URI","Vector","Locale","copyProperties","createArrayFrom","debounce"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){function aa(ba,ca,da){"use strict";aa.instance&&aa.instance.uninstall();aa.instance=this;if(typeof ba==='undefined')return;this.init(ba,ca,da);}aa.prototype.init=function(ba,ca,da){"use strict";this.root=ba;this.items={};this.sections={};this.editor=null;this.editing=false;this.selected=null;this.loading=null;this.keyParam='sk';this.defaultKey=ca;this.uri=u.getRequestURI();this.ajaxPipe=da;this.ajaxPipeEndpoints={};this.sidecol=true;this._installed=true;this._handlePageTransitions=true;q.registerHandler(function(ea){return this._handlePageTransitions&&this.handlePageTransition(ea);}.bind(this));this._eventHandlers=[];this._sectionEventHandlers={};this._arbiterSubscriptions=[g.subscribe(p.NAVIGATION_COMPLETED,this.navigationComplete.bind(this)),g.subscribe(p.NAVIGATION_FAILED,this.navigationFailed.bind(this)),g.subscribe(p.NAVIGATION_COUNT_UPDATE,this.navigationCountUpdate.bind(this)),g.subscribe(p.NAVIGATION_SELECT,this.navigationSelect.bind(this)),g.subscribe(h.getArbiterType('nav_update_counts'),this.navigationCountUpdateFromPresence.bind(this)),g.subscribe('sideNavPopoverMenuItemClicked',function(ea,fa){var ga=r.byClass(fa.bookmarkNode,'homeSideNav'),ha=ga&&ga.getAttribute('id');if(!ha)return;this._handleMenuClick(this.sections[ha],fa.bookmarkNode,fa.menuItemNode,fa.menuNode);}.bind(this)),g.subscribe('sideNavPopoverMenuCheckFavorite',function(ea,fa){var ga=r.byClass(fa.bookmarkNode,'homeSideNav'),ha=ga&&ga.getAttribute('id');if(!ha)return;var ia=this.sections[ha].equals(this.getSection('favorites')),ja=this.items[fa.bookmarkNode.id];if(ia){ja.showFavorite(fa.menuNode);}else ja.hideFavorite(fa.menuNode);}.bind(this))];this._handleResize=z(this._checkNarrow.bind(this),200);this._eventHandlers.push(m.listen(window,'resize',this._handleResize));this._checkNarrow();this._selectorSubscriptions=[];window.Selector&&this._selectorSubscriptions.push(t.subscribe(['open','close'],function(ea,fa){var ga=r.byClass(fa.selector,'sideNavItem');ga&&i.conditionClass(ga,'editMenuOpened',ea==='open');}));s.onLeave(this.uninstall.bind(this));if(this._pendingSections)this._pendingSections.forEach(function(ea){this.initSection.apply(this,ea);}.bind(this));};aa.prototype._checkNarrow=function(){"use strict";if(!this.root)return;var ba=v.getElementPosition(this.root).x;i.conditionClass(this.root,'uiNarrowSideNav',ba<20||(w.isRTL()&&ba+k.getElementDimensions(this.root).width<k.getElementDimensions(l('globalContainer')).width));};aa.prototype.uninstall=function(){"use strict";if(this._installed){this._installed=false;this._handlePageTransitions=false;this._arbiterSubscriptions.forEach(g.unsubscribe);this._selectorSubscriptions.forEach(function(ca){t.unsubscribe(ca);});this._eventHandlers.forEach(function(ca){ca.remove();});for(var ba in this._sectionEventHandlers)this._sectionEventHandlers[ba].remove();this._handleResize.reset();}};aa.prototype.initSection=function(ba,ca){"use strict";if(!this._installed){this._pendingSections=this._pendingSections||[];this._pendingSections.push(arguments);return;}this._initItems(ca);this._initSection(ba);};aa.prototype.addItem=function(ba,ca){"use strict";this._initItem(ba,ca);};aa.prototype._initItems=function(ba){"use strict";var ca=function(da,ea){var fa=this._initItem(da,ea);if(da.children)da.children.forEach(function(ga){ca(ga,fa);});}.bind(this);y(ba).forEach(function(da){ca(da,null);});};aa.prototype._initItem=function(ba,ca){"use strict";var da=this.items[ba.id]=this._constructItem(ba,ca);if(da.equals(this.selected)||ba.selected)this.setSelected(da);var ea=da.getLinkNode();ea&&this._eventHandlers.push(m.listen(ea,'click',function(event){return !this.editing;}.bind(this)));return da;};aa.prototype._initSection=function(ba){"use strict";this._sectionEventHandlers[ba.id]&&this._sectionEventHandlers[ba.id].remove();var ca=this.sections[ba.id]=this._constructSection(ba);this._sectionEventHandlers[ba.id]=m.listen(ca.node,'click',this.handleSectionClick.bind(this,ca));return ca;};aa.prototype._constructItem=function(ba,ca){"use strict";return new n(ba,ca);};aa.prototype._constructSection=function(ba){"use strict";return new o(ba);};aa.prototype.handleSectionClick=function(ba,event){"use strict";var ca=this._getEventTarget(event,'a');if(ca)this._handleLinkClick(ba,ca,event);};aa.prototype._getEventTarget=function(event,ba){"use strict";var ca=event.getTarget();if(ca.tagName!==ba.toUpperCase()){return r.byTag(ca,ba);}else return ca;};aa.prototype._handleMenuClick=function(ba,ca,da,ea){"use strict";if(i.hasClass(da,'rearrange'))this.beginEdit(ba);};aa.prototype._handleMenuItemClick=function(ba,ca,da){"use strict";if(ba==='rearrange')this.beginEdit(ca);};aa.prototype._handleLinkClick=function(ba,ca,event){"use strict";if(i.hasClass(ca,'navEditDone')){this.editing?this.endEdit():this.beginEdit(ba);event.kill();}};aa.prototype.getItem=function(ba){"use strict";if(this._isCurrentPath(ba)){return this._getItemForKey(this._getKey(ba.getQueryData())||this.defaultKey);}else return this._getItemForPath(ba.getPath());};aa.prototype.getNodeForKey=function(ba){"use strict";var ca=this._getItemForKey(ba);if(ca)return ca.node;};aa.prototype._isCurrentPath=function(ba){"use strict";return ba.getDomain()===this.uri.getDomain()&&ba.getPath()===this.uri.getPath();};aa.prototype._getKey=function(ba){"use strict";return ba[this.keyParam];};aa.prototype._getSectionForNode=function(ba){"use strict";while(ba=ba.parentNode)if(ba.id&&this.sections[ba.id])return this.sections[ba.id];};aa.prototype._getItemForNode=function(ba){"use strict";ba=r.byClass(ba,'sideNavItem');return ba&&this.items[ba.id];};aa.prototype._getItemForKey=function(ba){"use strict";return this._findItem(function(ca){return ca.matchKey(ba);});};aa.prototype._getItemForPath=function(ba){"use strict";return this._findItem(function(ca){return ca.matchPath(ba);});};aa.prototype._findItem=function(ba){"use strict";for(var ca in this.items)if(ba(this.items[ca]))return this.items[ca];};aa.prototype.removeItem=function(ba){"use strict";if(ba&&this.items[ba.id]){j.remove(ba.node);delete this.items[ba.id];}};aa.prototype.removeItemByKey=function(ba){"use strict";this.removeItem(this._getItemForKey(ba));};aa.prototype.moveItem=function(ba,ca,da){"use strict";var ea=j.find(ba.node,'ul.uiSideNav');(da?j.prependContent:j.appendContent)(ea,ca.node);};aa.prototype.setLoading=function(ba){"use strict";this.loading&&this.loading.hideLoading();this.loading=ba;this.loading&&this.loading.showLoading();};aa.prototype.setSelected=function(ba){"use strict";this.setLoading(null);if(this.selected){this.selected.hideSelected();this.selected.getTop().hideChildren();}this.selected=ba;if(this.selected){this.selected.showSelected();this.selected.getTop().showChildren();}};aa.prototype.handlePageTransition=function(ba){"use strict";var ca=this.getItem(ba);if(!ca||!ca.endpoint)return false;var da=this.selected;if(da&&da.context&&da.context!=ca.context)return false;return this._doPageTransition(ca,ba);};aa.prototype._doPageTransition=function(ba,ca){"use strict";this.setLoading(ba);this._sendPageTransition(ba.endpoint,x(this._getTransitionData(ba,ca),ca.getQueryData()));return true;};aa.prototype._sendPageTransition=function(ba,ca){"use strict";ca.endpoint=ba;g.inform(p.NAVIGATION_BEGIN,{useAjaxPipe:this._useAjaxPipe(ba),params:ca});};aa.prototype._getTransitionData=function(ba,ca){"use strict";var da={};da.sidecol=this.sidecol;da.path=ca.getPath();da[this.keyParam]=ba.textKey;da.key=ba.textKey;return da;};aa.prototype._useAjaxPipe=function(ba){"use strict";return this.ajaxPipe||this.ajaxPipeEndpoints[ba];};aa.prototype.navigationComplete=function(){"use strict";this.loading&&this.setSelected(this.loading);};aa.prototype.navigationFailed=function(){"use strict";this.setLoading(null);};aa.prototype.navigationSelect=function(ba,ca){"use strict";var da=this._getItemForKey(this._getKey(ca));if(ca.asLoading){this.setLoading(da);}else this.setSelected(da);};aa.prototype.navigationCountUpdate=function(ba,ca){"use strict";var da=this._getItemForKey(ca&&ca.key);if(da)if(typeof ca.count!=="undefined"){da.setCount(ca.count,ca.hide);}else if(typeof ca.increment!=="undefined")da.incrementCount(ca.increment,ca.hide);};aa.prototype.navigationCountUpdateFromPresence=function(ba,ca){"use strict";ca=ca.obj;if(ca)if(!ca.class_name||ca.class_name&&i.hasClass(this.root,ca.class_name))if(ca.items)for(var da=0;da<ca.items.length;da++)this.navigationCountUpdate(ba,ca.items[da]);};aa.prototype.beginEdit=function(ba){"use strict";if(!this.editing){this.editing=true;i.addClass(this.root,'editMode');this._updateTrackingData();this._initEditor(ba);}};aa.prototype.endEdit=function(){"use strict";if(this.editing){i.removeClass(this.root,'editMode');this.editor&&this.editor.endEdit();this.editor=null;this.editing=false;this._updateTrackingData();}};aa.prototype._updateTrackingData=function(ba){"use strict";var ca=this.root.getAttribute('data-gt')||"{}";try{ca=JSON.parse(ca);if(this.editing){ca.editing=true;}else delete ca.editing;this.root.setAttribute('data-gt',JSON.stringify(ca));}catch(da){}};aa.prototype._initEditor=function(ba){"use strict";ba.getEditorAsync(function(ca){if(this.editing){this.editor=ca;this.editor.beginEdit();}}.bind(this));};aa.getInstance=function(){"use strict";return aa.instance||new aa();};aa.initMenu=function(ba,ca){"use strict";ca.subscribe('itemclick',function(da,ea){var fa=aa.getInstance(),ga=ba.getTriggerElem(),ha=fa._getSectionForNode(ga),ia=fa._getItemForNode(ga);fa._handleMenuItemClick(ea.item.getValue(),ha,ia);});};aa.initSectionGlobally=function(ba,ca){"use strict";aa.getInstance().initSection(ba,ca);};aa.instance=null;e.exports=aa;});
__d("PageFanning",["Animation","AsyncRequest","CSS","DOM","FutureSideNav","Parent","URI","$","collectDataAttributes","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q={setFanStatus:function(s,t,u,v,w,x,y){var z={ft:{}};if(s)z={ft:o(s,['ft']).ft};w=w||function(ca){var da=ca.getPayload();if(!da||!s)return;if(da.reload){q.reloadOnFanStatusChanged(da.preserve_tab);}else r(s,da);};var aa={fbpage_id:t,add:u,reload:v};if(y!=null)p(aa,y);p(aa,z);var ba=new h().setURI('/ajax/pages/fan_status.php').setData(aa).setNectarModuleDataSafe(s).setHandler(w);if(x)ba.setErrorHandler(x);ba.send();return false;},reloadOnFanStatusChanged:function(s){var t=m.getRequestURI();if(s){var u=k.getInstance().selected.textKey;if(!t.getQueryData().sk&&u)t.addQueryData({sk:u});}window.location.href=t;},toggleLikeOnFanStatusChanged:function(s,t){var u=n('liked_pages_like_action_'+s),v=n('liked_pages_undo_action_'+s);i.conditionClass(u,'hidden_elem',t);i.conditionClass(v,'hidden_elem',!t);}};function r(s,t){var u=t.feedback;if(!u)return;if(l.byClass(s,'fbTimelineEscapeSectionItem'))s=l.byClass(s,'fan_status_inactive')||s;var v=j.create('span',{className:'fan_status_inactive'},u);s.parentNode.replaceChild(v,s);var w=function(){if(t.can_repeat_action)v.parentNode.replaceChild(s,v);};new g(v).duration(3000).checkpoint().to('backgroundColor','#FFFFFF').duration(1000).ondone(w).go();}e.exports=q;});
__d("PageLikeButton",["Arbiter","AsyncRequest","AsyncResponse","Event","PageFanning","SubscribeButton","FeedBlacklistButton","Tour","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p={LIKED:'liked',UNLIKED:'unliked',LIKED_SUCCESS:'liked_success',init:function(s,t,u,v,w,x,y,z,aa,ba,ca){g.subscribe(p.LIKED,function(da,ea){if(v===ea.profile_id){s.swap();if(!aa)u.suppressNextMouseEnter&&u.suppressNextMouseEnter();}});g.subscribe(p.UNLIKED,function(da,ea){if(v==ea.profile_id){s.unswap();u.hideFlyout&&u.hideFlyout();}});if(ca)g.subscribe(p.LIKED_SUCCESS,function(da,ea){ca.show();});if(z)g.subscribe(p.LIKED_SUCCESS,function(da,ea){var fa=o.getRequestURI().getQueryData().app_data;if(ea.profile_id==v)new h().setURI('/ajax/pages/fetch_app_column.php').setData({profile_id:v,tab_key:z,app_data:fa}).send();});j.listen(t,'click',function(event){var da=s.getCurrentButton();r(v,w,x,y,da,event);}.bind(this));},initCallout:function(s,t){var u=document.getElementById('pageActionLikeCalloutButton');j.listen(u,'click',r.bind(null,s,t,null,null,null));},initUnlike:function(s,t,u){j.listen(s,'click',function(event){q(event.getTarget(),t,false,function(v){g.inform(p.LIKED,{profile_id:t});i.defaultErrorHandler(v);},u);p.informUnlike(t);});},informLike:function(s,t,u){var v={profile_id:s,target:t,origin:u};g.inform(p.LIKED,v);v.connected=true;g.inform(l.SUBSCRIBED,v);g.inform(m.UNBLACKLIST,v);},informLikeSuccess:function(s){var t={profile_id:s};g.inform(p.LIKED_SUCCESS,t);},informUnlike:function(s){var t={profile_id:s};setTimeout(g.inform.bind(g,p.UNLIKED,t),0);t.connected=false;setTimeout(g.inform.bind(g,l.UNSUBSCRIBED,t),0);g.inform(m.BLACKLIST,t);}};function q(s,t,u,v,w,x,y){n.getInstance().hideStep('low_page_likes');k.setFanStatus(s,t,u,false,function(){p.informLikeSuccess(t);},v,{fan_origin:w,fan_source:x,cat:y});}function r(s,t,u,v,w,event){q(event.getTarget(),s,true,function(x){g.inform(p.UNLIKED,{profile_id:s});i.defaultErrorHandler(x);},t,u,v);p.informLike(s,w,t);}e.exports=p;a.PageLikeButton=p;});
__d("NetEgo",["Animation","Arbiter","CSS","DOM","EgoUnitSlideInsert","PageLikeButton","Parent","URI","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p={setup:function(q){h.subscribe([l.LIKED,'FriendRequest/sending'],function(r,s){if((q==s.profile_id&&s.origin=='hovercard')||q==s.uid){var t=o(document.body,'.ego_unit_container');if(t){var u=j.scry(t,'.ego_unit'),v=u.length;for(var w=0;w<v;w++){var x=u[w].getAttribute('data-ego-fbid');if(x==q){var y=j.scry(u[w],'.ego_action a')[0];if(y)y.click();break;}}}}});},updateXids:function(q,r){if(q.length==0&&r.length==0)return;var s=function(ca){return function(da){var ea=da.getAttribute(ca);if(!ea)return false;var fa=new n(ea).getQueryData();return !!fa.xids;};},t=j.scry(document.body,'.ego_unit a');t=t.filter(s('ajaxify'));if(t.length==0)return;var u=new n(t[0].getAttribute('ajaxify')),v=u.getQueryData();if(!v.xids)return;try{var x=JSON.parse(v.xids);}catch(w){return;}for(var y=0;y<q.length;++y)delete x[q[y]];for(y=0;y<r.length;++y)x[r[y]]=1;var z=JSON.stringify(x),aa=function(ca,da){u=new n(ca.getAttribute(da));v=u.getQueryData();v.xids=z;u.setQueryData(v);ca.setAttribute(da,u.toString());};for(y=0;y<t.length;++y)aa(t[y],'ajaxify');var ba=j.scry(document.body,'.ego_unit form');ba=ba.filter(s('action'));for(y=0;y<ba.length;++y)aa(ba[y],'action');},replaceUnit:function(q,r,s,t){var u=m.byClass(q,'ego_unit_container');if(u&&k.isSliding(q)){var v=j.appendContent(u,r);v.forEach(i.hide);k.runAfterSlide(q,p._replaceUnitElement.bind(null,q,v));return;}p._replaceUnit(q,r,s,t);},_replaceUnit:function(q,r,s,t){var u=j.insertAfter(q,r);u.forEach(i.hide);if(t!==undefined&&t!==null){setTimeout(function(){p._replaceUnitFadeout(q,u,s);},t);}else p._replaceUnitFadeout(q,u,s);},_replaceUnitFadeout:function(q,r,s){if(s){new g(q).from('opacity',1).to('opacity',0).duration(s).checkpoint(1,function(){p._replaceUnitElement(q,r);}).go();}else p._replaceUnitElement(q,r);},_replaceUnitElement:function(q,r){j.remove(q);r.forEach(i.show);h.inform('netego_replacedUnit');p.clearHeader();},clearHeader:function(){var q=j.scry(document.body,'.ego_column'),r=[];for(var s=0;s<q.length;++s)r=r.concat(j.scry(q[s],'.uiHeader'));for(s=0;s<r.length;++s){var t=r[s].nextSibling;if(!t||t.childNodes.length===0){j.remove(r[s]);}else if(t.childNodes.length===1){var u=t.childNodes[0];if(i.hasClass(u,'ego_appended_units')&&u.childNodes.length===0)j.remove(r[s]);}}}};e.exports=p;});
__d("legacy:ui-side-nav-future-js",["FutureSideNav"],function(a,b,c,d){a.FutureSideNav=b('FutureSideNav');},3);